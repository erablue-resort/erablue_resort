
@COM_433_1101表示
;所有プラモを確認し、1以上ならデータを挿入する　20行まで
VARSET LOCAL

;購入可能リストから読み込む　一日20個まで　更新タイミングを設定する前はここに仮置き
プラモ_購入可能リスト:1 = 1,2,3,31,51,101

VARSET LOCALS
VARSET プラモ_メッセージウィンドウ下部
;0繰り返し回数　1行数
LOCAL:1 = 1

$LOOP
LOCAL ++
;所有済みかつ完成済みでない
RESULT = プラモ_購入可能リスト:LOCAL
TRYCALLFORM プラモデータ{RESULT}
IF プラモデータ変数:0 > 0 
	IF プラモ_所有キット:プラモデータ変数 >= 1
		LOCALS = 【購入済み】
	ELSE
		LOCALS = 【{プラモデータ変数:1}PP】
	ENDIF
	プラモ_メッセージウィンドウ下部:(LOCAL:1) = [{プラモ_購入可能リスト:(LOCAL:1)}]%プラモデータ文字列:3%：　　%LOCALS%
	LOCAL:1 ++
	プラモデータ変数:0 = 0
ELSE
	RETURN 0
ENDIF

GOTO LOOP







@COM_433_1101実行
;RESULTにナンバーが入った状態で呼び出される
;所有済みかつ完成済みでない


;持ってない
IF プラモ_所有キット:RESULT == 0
	TRYCALLFORM プラモデータ{RESULT}
	IF プラモデータ変数:0 > 0 
		GOTO START
	ENDIF
ENDIF



RETURN 0

;ここの時点でプラモデータは入力されている
$START


;お金が無いと不可
IF プラモデータ変数:1 > プラモ_金
	RETURN 0
ENDIF
プラモ_メッセージウィンドウ下部:1 = {プラモデータ変数:1}PPで%プラモデータ文字列:3%を購入しますか？
プラモ_メッセージウィンドウ下部:2 = 
プラモ_メッセージウィンドウ下部:3 = [1]はい　　[2]いいえ　　　　　　　　
プラモ_購入予定 = プラモデータ変数

@COM_433_1101実行_1
IF プラモ_購入予定 <= 0
	RETURN 0
ENDIF
TRYCALLFORM プラモデータ{プラモ_購入予定}

プラモ_メッセージウィンドウ下部:1 = %プラモデータ文字列:3%を購入した。
プラモ_メッセージウィンドウ下部:2 = 
プラモ_メッセージウィンドウ下部:3 = 
プラモ_所有キット:プラモ_購入予定 = 1

プラモ_購入予定 = 0
プラモ_金 -= プラモデータ変数:1



