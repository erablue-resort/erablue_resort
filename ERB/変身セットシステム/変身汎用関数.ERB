@変身期間消費処理ALL(判定条件, 経過時間 = 1)
#DIMS 判定条件
#DIM 経過時間
#DIM キャラ検索リザルト,2000
#DIM 該当キャラ数

該当キャラ数 = DT_SELECT("変身データベース", @"解除タイミング文字列 LIKE '\%%判定条件%\%'", "キャラ番号 ASC", キャラ検索リザルト)
FOR LOCAL, 0, 該当キャラ数
    CALL 変身期間消費処理キャラ(DT_CELL_GET("変身データベース",キャラ検索リザルト:LOCAL, "キャラ番号", 1), 判定条件, 経過時間)
NEXT


@変身期間消費処理キャラ(キャラ番号, 判定条件, 経過時間 = 1)
#DIM キャラ番号
#DIMS 判定条件
#DIM 経過時間

CALL 変身解除ABLE(キャラ番号, 判定条件)
SIF !RESULT
    RETURN
CALL GET変身データベース(キャラ番号)
変身配列INT:変身残りターン数 -= 経過時間
CALL SET変身データベース
IF 変身配列INT:変身残りターン数 <= 0
    CALL 変身解除実行処理(キャラ番号)
ENDIF


@変身処理キャラ(キャラ番号, 判定条件)
#DIMS 判定条件
#DIM キャラ番号

CALL 変身ABLE(キャラ番号, 判定条件)
SIF !RESULT
    RETURN
CALL 変身実行処理(キャラ番号)


@変身解除処理キャラ(キャラ番号, 判定条件)
#DIMS 判定条件
#DIM キャラ番号

CALL 変身解除ABLE(キャラ番号, 判定条件)
SIF !RESULT
    RETURN
CALL 変身解除実行処理(キャラ番号)
