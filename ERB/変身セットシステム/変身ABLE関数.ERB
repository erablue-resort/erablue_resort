@変身ABLE(キャラ番号, 判定条件)
;変身可否判定関数
#DIMS 判定条件
#DIM キャラ番号
#DIM 変身ID

;問い合わせキャラを検索して、対象が変身可能状態かチェックする
変身ID = FIND_変身ID(キャラ番号)

;データベースに登録がある
IF 変身ID
	;独自の判定の受け口を作っておく
	TRYCCALLFORM 個別変身ABLE_{NO:キャラ番号}(キャラ番号, 判定条件)
		;個別ABLEの判定を受けとる
		IF RESULT
			RETURN 1
		ELSE
			RETURN 0
		ENDIF
	CATCH
		;判定条件で変身可能　かつ　変身していない
		IF STRFINDU(GET_変身_変身タイミング文字列(変身ID), 判定条件) >= 0 && !GET_変身_変身残りターン数(変身ID)
			RETURN 1
		ELSE
			RETURN 0
		ENDIF
	ENDCATCH
ELSE
	;未登録=変身キャラではない
	RETURN 0
ENDIF

@変身解除ABLE(キャラ番号, 判定条件)
;変身可否判定関数
#DIMS 判定条件
#DIM キャラ番号
#DIM 変身ID

;問い合わせキャラを検索して、対象が変身解除可能状態かチェックする
変身ID = FIND_変身ID(キャラ番号)

;データベースに登録がある
IF 変身ID
	;独自の判定の受け口を作っておく
	TRYCCALLFORM 個別変身解除ABLE_{NO:キャラ番号}(キャラ番号, 判定条件)
		;個別ABLEの判定を受けとる
		IF RESULT
			RETURN 1
		ELSE
			RETURN 0
		ENDIF
	CATCH
		;判定条件で変身解除可能　かつ　変身している
		IF STRFINDU(GET_変身_解除タイミング文字列(変身ID), 判定条件) >= 0 && GET_変身_変身残りターン数(変身ID)
			RETURN 1
		ELSE
			RETURN 0
		ENDIF
	ENDCATCH
ELSE
	;未登録=変身キャラではない
	RETURN 0
ENDIF
