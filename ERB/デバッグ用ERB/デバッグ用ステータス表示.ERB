;削除

@恋慕の組み合わせピックアップ処理
#DIM ピックアップ配列, 500
#DIM 島内配列, 500
#DIM 島内数
#DIM ピックアップ数
#DIM カップリングキャラ１
#DIM カップリングキャラ２
VARSET ピックアップ配列

;まず恋慕orセフレで、組み合わせにあなたが入っていないカップリングを割り出す
ピックアップ数 = DT_SELECT("関係性データベース", @"対象キャラ１ <> {CFLAG:MASTER:人物番号} And 対象キャラ２ <> {CFLAG:MASTER:人物番号} And (関係性種別 = '恋慕' Or 関係性種別 = 'セフレ')", ,ピックアップ配列)
;この命令でピックアップ数には「該当するカップリングの数」が
;ピックアップ配列には「該当するデータベースID」が順番に入っている

;例外フォロー忘れずに
SIF ピックアップ数 < 1
	RETURN 0

;組み合わせが島内にいるかどうかを見る
VARSET 島内配列
島内数 = 0
FOR LOCAL, 0, ピックアップ数
	カップリングキャラ１ = FIND_CHARA_FROM_PERSON_ID(DT_CELL_GET("関係性データベース", ピックアップ配列:LOCAL, "対象キャラ１", 1))
	カップリングキャラ２ = FIND_CHARA_FROM_PERSON_ID(DT_CELL_GET("関係性データベース", ピックアップ配列:LOCAL, "対象キャラ２", 1))
	;どっちかいないならダメ
	SIF CFLAG:カップリングキャラ１:滞在期間 < 1
		CONTINUE
	SIF CFLAG:カップリングキャラ２:滞在期間 < 1
		CONTINUE
	島内配列:島内数 = ピックアップ配列:LOCAL
	島内数 ++
NEXT

;例外フォロー忘れずに
SIF 島内数 < 1
	RETURN 0

;どのIDがいいかをランダムに決めてやる
LOCAL = 島内配列:(RAND:島内数)
;該当のIDから対象キャラを持ってきてキャラ番号を取る
カップリングキャラ１ = FIND_CHARA_FROM_PERSON_ID(DT_CELL_GET("関係性データベース", LOCAL, "対象キャラ１", 1))
カップリングキャラ２ = FIND_CHARA_FROM_PERSON_ID(DT_CELL_GET("関係性データベース", LOCAL, "対象キャラ２", 1))

;あとはなんか変数で渡すなり、この関数の中で処理するなり


@デバッグ_エネミーHP1()
#FUNCTION

FOR LOCAL, 0, 10
	SIF 敵BATTLE_STATE:LOCAL:ＨＰ > 0
		敵BATTLE_STATE:LOCAL:ＨＰ = 1
NEXT


@起床前デバッグ処理()
#DIM キャラ番号取得
#DIM キャラ番号取得１
#DIM キャラ番号取得２


CALL 夜這い実処理(1, 0, 0, "恋慕")

HTML_PRINT CSTR:1:夜這い報告_記録文字列

; ;CALL 固有非エロ陥落_フレーバー変更_1147(GETCHARA(1147), "実行メッセージ")

; ;CALL KOJO_EVENT_手紙返事_ラブレター_287(GETCHARA(287))

; 		; キャラ番号取得 = キャラ検索("[天の聖杯]ホムラ")
; 		; キャラ番号取得１ = キャラ検索("[天の聖杯]ヒカリ")
; 		キャラ番号取得 = キャラ検索("[怨霊も恐れ怯む少女]古明地さとり")
; 		キャラ番号取得１ = キャラ検索("[閉じた恋の瞳]古明地こいし")
; ;キャラ番号取得 = キャラ検索("[千年を探す者]ユエル")
; CFLAG:キャラ番号取得:滞在期間=999
; CFLAG:キャラ番号取得１:滞在期間=999
; 		TCVAR:キャラ番号取得:言いなり = 1
; 		TCVAR:キャラ番号取得１:言いなり = 1
; 		STR:イベントうふふ場所名 = デバッグルーム
; 		FLAG:イベントうふふベッドルーム = 1
; 		RCVAR:キャラ番号取得:イベントうふふ対象フラグ = 1
; 		RCVAR:キャラ番号取得１:イベントうふふ対象フラグ = 1
; 		CALL イベント中うふふ移行処理("デバッグ性行為")

