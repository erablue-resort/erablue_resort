;特定のキャラをメインにするイベントカテゴリ
;『シンデレラ』と『舞踏会』を任意のイベント名に変えて使うこと、他との重複不可

@イベント発生条件_キャライベント_『シンデレラ』と『舞踏会』
;開放条件を満たしたら1を返すこと
IF 天使のような悪魔の事務員イベフラグ == 1
	RETURN 1
ENDIF
RETURN 0

@イベント消滅条件_キャライベント_『シンデレラ』と『舞踏会』
;この条件を満たした時、イベントは発生してない扱いとなる
;発生条件＞消滅条件で見るので、発生と消滅を両方満たしている時は「発生した！」というメッセージが出るが発生していない扱いになる
;そのため条件には注意すること

;消滅条件を満たしたら1を返す
; IF 消滅条件式
; 	RETURN 1
; ENDIF
; RETURN 0

;例えば、「発生条件を満たしている時のみ出現させたい」のなら以下のようになる
; CALL イベント発生条件_キャライベント_『シンデレラ』と『舞踏会』
; IF RESULT
; 	;発生条件OKなので0を返す
; 	RETURN 0
; ELSE
; 	;発生条件アウトなので1を返す
; 	RETURN 1
; ENDIF

@イベント関数_キャライベント_『シンデレラ』と『舞踏会』(ARG)
#DIM キャラ番号取得


キャラ番号取得 = GETCHARA(2726)


DRAWLINE
PRINTL ［『シンデレラ』と『舞踏会』］
DRAWLINE
PRINTW
DRAWLINE
PRINTL
PRINTBUTTON "[0] 設定を含めて詳細な説明を受ける", 0
PRINTL
PRINTBUTTON "[1] 解放される機能の説明だけを簡潔に聞く", 1
PRINTL
BINPUT
PRINTL
SELECTCASE RESULT
	CASE 0
	DRAWLINE
	PRINTL
	CALL PRINT_STRL(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/営業ちひろ")
	PRINTL ちひろ：
	CALL PRINT_STRW(@"「では、『ルール』を説明させてもらいますね_H_」")
	PRINTL
	PRINTFORML 深イキしたまま気絶するように眠った夜這いの翌朝とは思えないほどシャキッと元気に起き出したちひろが、
	PRINTFORMW 見慣れた緑のスーツ姿でピッと指をたてる。
	PRINTL
	PRINTFORMW ……ルール？
	PRINTL
	CALL PRINT_STRW(@"「はい_H_ こういうのは、無制限じゃかえって色褪せちゃいますからね。なにか決まりごとがあったほうが、ワクワクするでしょう？」")
	PRINTL
	PRINTFORMW 「コホン。 えー、ではまず、アイドルの皆さんについてですが……」
	PRINTL
	PRINTFORML 「エラさんにご協力いただいて、認識のおく～のほうに」
	PRINTFORML 「『%リゾート名称%には大変お世話になっているのだから、そのオーナーであるあなたがアイドルをつまみ食いするのは当然の権利』で」
	CALL PRINT_STRW(@"「『あなたに手を出していただけるのは、女として大変光栄で名誉なこと』だと、刷り込みをしてありまぁす_H_")
	PRINTL
	PRINTFORML 「そのうえで、プロデューサーさんを含む弊社スタッフの方々には」
	PRINTFORML 「『ご協賛いただいている%リゾート名称%のオーナーさんに感謝を示す仕事は、弊社として決して蔑ろにできないもの』であり」
	CALL PRINT_STRW(@"「『その仕事のなかにアイドルとの性的な接触を含むものがあっても、社の方針としては受け入れるのが正しい』ということにしてあります_H_」")
	PRINTL
	PRINTFORML 「もっとも、本来アイドルには潔癖さや処女性といったものが求められるものですし」
	PRINTFORMW 「みなさん年頃の女の子ですから、おのおの思うところもあるはずなので、認識には多少個人差があるようです」
	PRINTL
	CALL PRINT_STRW(@"「ただまぁ、いちばん刷り込みが浅い子でも『お仕事なので仕方ないし問題ない』という認識ではあるようなので、全員合意と言っていいでしょう_H_」")
	PRINTL
	PRINTFORMW 「そしてこちらにですねぇ……」
	PRINTL

	CALL PRINT_STR(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/ロゴ見本1")
	PRINTFORML 「じゃじゃ～ん♪ このような、ガラスの靴とハートがモチーフのシンプルなロゴマークをご用意しさせていただきました」
	CALL PRINT_STRW(@"「……ふふ_H_ このマーク、よ～く覚えておいてくださいね～？」")
	PRINTL
	PRINTFORMW 「リゾート内でこちらのマークを体のどこかに身につけている子は、『お仕事中』の子です」
	PRINTL
	PRINTFORML 「社の書類上はあなたとの『特別交流会』や『プレミアムファンサービス』、『特別営業』『特殊演技指導』などなど、内容をぼかして記載されるものですが……」
	CALL PRINT_STRW(@"「その実情は『シンデレラ』……つまり『王子様のお手付き待ち』ということになります_H_」")
	PRINTL
	CALL PRINT_STRW(@"「ふふ_H_ わかりますか？_H_」")
	PRINTL
	CALL PRINT_STRW(@"「このマークをつけている子はその日いちにち、『王子様』であるあなたに見初められるのを今か今かと待っているんです_H_」")
	PRINTL
	CALL PRINT_STRW(@"「ムラっときたあなたにいきなり物陰に連れ込まれて、言葉より先にべろちゅーしながらおっぱい揉みくちゃにされるのも_H_」")
	PRINTL
	CALL PRINT_STRW(@"「その場に跪かされて、アイドルの神聖な唇とノドでおちんぽご奉仕覚えさせられちゃうのも_H_」")
	PRINTL
	CALL PRINT_STRW(@"「お尻を出すよう命令されて、ぱんぱんぱん_H_って処女おまんこにコキ捨てお射精されちゃうのも_H_」")
	PRINTL
	CALL PRINT_STRW(@"「ほかの人なら犯罪ですけど、あなたにされるのだけは全部ぜ～んぶ『合意の上』_H_ そういう『お仕事』に就いているサインなんです_H_」")
	PRINTL
	PRINTFORML 「耳飾り、ブレスレット、ネックレス、ブローチ……シュシュのワンポイントやタトゥーシールなど、どのように身につけるかはみんなバラバラなので」
	CALL PRINT_STRW(@"「今日の『シンデレラ』は誰かな～？って、みんなのことちゃ～んと見てあげてくださいね_H_」")
	PRINTL
	PRINT 　　　
	CALL PRINT_STR(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/ロゴ見本2")
	;「タトゥーシールを真似て、仕事を振られてないのに自分から手書きのマークを(油性ペンかなんかで)体に書いてアピールする子」がいてもイイ……
	PRINTFORML 「いちど見つけたその日の『シンデレラ』はこのように、名前の横にマークがつきますので」
	CALL PRINT_STRW(@"「『朝見つけておいた子を夕食後のデザートにしちゃおう』なんて時にも簡単に思い出せちゃいますから、安心ですね_H_」")
	PRINTL
	PRINTFORMW 「このお仕事は、日替わりでアイドルに、当日の朝にランダムに割り振られます」
	PRINTL
	PRINTFORML 「アイドルの子に『お仕事』のメールがいく確率は、全員一律３％」
	;デレステのSSR確率
	CALL PRINT_STRW(@"「対象アイドルはぜんぶで１９０人いますので、１日にだいたい５人か６人は即パコＯＫ_H_の子がいる計算になります」")
	;なおちひろは常にシンデレラマークを身につけているものとする。自分の意思でいつでもＯＫサイン
	PRINTL
	PRINTFORMW 「ただ、その日にその子がリゾートにいるかどうかは別問題なので、リゾート中どこを探してもいない、なんて日も発生しますのでご承知おきください」
	PRINTL
	CALL PRINT_STRL(@"「……逆に、運が良ければ１９０人全員がお手付き待ち、なんて日を迎えることもできるかもしれませんよ_H_」")  
	PRINTFORML 「一応、メールソフトに３％を１９０回連続で引くよりははるかにマシな確率で『全員にメールが届く日』を」
	CALL PRINT_STRW(@"「設定するだけしておきましたから、あとはオーナーさんの運次第、ということになりますね_H_」")  
	;いわゆる「ゴッドパック」。最初は0.1%とか思ってたけど、IF RAND:192 == 0くらいが妥当かなぁ。二年に一度発生するくらいのイメージで

	;本当は「あなたがそのマークを観測した時点からステータスにマークがついて言いなりが視覚化されるようになる」みたいにしたかった名残
	;スカートの内側にあったものが水着になったら見えたりして言いなりバレちゃった♡とか、胸元からブラチラしたついでにバレちゃった♡とか、卓球でポロリして、とか
	;内心乗り気じゃないけど仕事だから仕方なくやってる子がバレづらい場所に身につけてたりすると嬉しいなぁと
	;なのでTCVAR:シンデレラは、1なら耳元2なら胸元3なら臍の下タトゥーシールとか、あるいは9なら手書きの自己意志マークとかで身につけ方や状態を示す予定だった
	;仕様ムズくて現状断念。

	;「そしてこのマークは、『どこに身につけるかは指定がありません』」
	;「なので、耳飾りやチョーカーみたいにわかりやすい場所につける子もいれば、」
	;「外からは見えないスカートの内側なんかにタトゥーシールとして身につけていることもあるでしょう」
	;「ふふ♡物陰に連れ込んで脱がしてみたら襲われ待ちだったのがわかっちゃう♡なんて、胸が躍りませんか？♡」

	PRINTL
	CALL PRINT_STRL(@"「ガラスの靴で『王子様』に見つけてもらって、そのままお城にお持ち帰りされて_H_」")
	CALL PRINT_STRW(@"「寝室に連れ込まれて、押し倒されて_H_ 『妃になれ』『子を孕め』って、手籠めにされちゃうことこそが『シンデレラ』の本懐ですから_H_」")
	PRINTL
	CALL PRINT_STRW(@"「ぜひ楽しんで、あなたの『シンデレラ』を見つけてあげてくださいね_H_」")
	PRINTL
	PRINTFORML 「そしてもうひとつ」
	PRINTFORMW 「運悪く誰もいない日が続くというのも寂しいでしょうから、週に一度、最低保証が設けてあります」
	PRINTL
	PRINTFORMW 「こちらの世界で毎週日曜日に、アイドルと『触れ合う』ことができる［突発イベント］をご用意いたします」
	PRINTL
	PRINTFORML 「ファンにはヒミツのお仕事ですから、情報漏洩対策に、アイドルの子たちには『舞踏会』という符丁で呼ばせています」
	CALL PRINT_STRW(@"「ふふ_H_ 王子様との一晩の逢瀬に、これ以上ふさわしい名前もありませんからね_H_」")
	PRINTL
	PRINTFORML 「こちらに関してましては、アイドル側のスケジュールの関係もありますので、申し訳ありませんが人選はこちらで」
	PRINTFORML 「また、場所についても都度、こちらのほうでご用意させていただくことになります」
	;「実はエラさんに、これ用の扉とビーコンをご用意いただきまして。 開けて入ればすぐ近くまで行けちゃいます」まで入れると冗長か？
	;設定上、「門」は人食い鳥の島にあるらしいので、毎週日曜の業務後とかにそうホイホイ行くか？って話が……
	CALL PRINT_STRW(@"「そのほうがいろんなシチュエーションをご用意できますので、ね_H_ どうかご足労のほど、お願いいたします……_H_」") 
	PRINTL
	PRINTFORML 「アイドルの人選は、リゾートにまだお伺いさせていただいたことのない子を含め」
	PRINTFORMW 「比較的ファン人気の高い子を中心に、個人だったりユニット単位だったり、様々なかたちを模索しながら斡旋させていただく予定なのですが……」
	PRINTL
	CALL PRINT_STRW(@"「大変申し訳ないお話ではあるのですが……こちらについて少々、作業が滞っている工程がございまして……」") 
	
	PRINTL
	PRINTFORML 「と、いいますのも……アイドルをご紹介させていただく時の台本や『舞踏会』のプロットの」
	CALL PRINT_STRW(@"「その初稿を、彼女たちを最もよく知るプロデューサーさんに書かせているのですが……ふふっ_H_」") 
	PRINTL
	CALL PRINT_STRL(@"「これまで手塩にかけて育ててきたアイドルたちの魅力に、誰より先に気が付いていたのは、プロデューサーさんなのに……_H_」") 
	CALL PRINT_STRW(@"「傍でず～っと見守ってきた極上のメスを、自らの手であなたに差し出さなくちゃいけないのが、よぉ～っぽど悔しいんでしょうねぇ……_H_」") 
	;Ⅳ「悔しいでしょうねぇ……」
	PRINTL
	PRINTFORML 「エラさんのお力を借りた影響もあってか、プロデューサーさんったら、オフィスで原稿書かなきゃいけないのに……」
	CALL PRINT_STRW(@"「寝たことないのに勝手に寝取られ気分になっちゃっているみたいで、ひとりで負け犬ぴゅっぴゅするほうが、はかどっちゃっている始末でして……_H_」")
	PRINTL
	CALL PRINT_STRW(@"「なので現状、原稿ができあがっているものしかご提供できないのは、どうかお許しくださいね……_H_」") 
	PRINTL
	PRINTFORML 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　ＥＲＢ に 追 記
	PRINTFORMW 「オーナーさんのほうでどうしても抱きたい子がいらっしゃいましたら、お手数ですが名簿に直接ご記入いただければと」
	PRINTL
	CALL PRINT_STRL(@"「ふふ、そうですねぇ_H_ 納期遅延のペナルティとして、らぶらぶ枕営業の一部始終をプロデューサーさんに見せつける脚本もご用意しましょうか_H_」") 
	CALL PRINT_STRW(@"「……いえ、これじゃあペナルティじゃなくてご褒美になっちゃうでしょうか？ う～ん、これについては要検討、と……」") 
	PRINTL
	PRINTFORML 「あ、それと」
	PRINTFORML 「アイドルたちにとって、オーナーさんへの『お仕事』は同時に『演技力のレッスン及び査定』の意味を持ちます」
	CALL PRINT_STRW(@"「……ふふ_H_ これだけ言われてもわかりませんよね_H_」") 
	PRINTL
	PRINTFORML 「より具体的に言いますと……」
	CALL PRINT_STRL(@"「あなたに押し倒されたアイドルの子が、嫌がったり、泣いちゃったりしたとしても……それらは全て、『演技』ということです_H_」")
	CALL PRINT_STRW(@"「アイドルはときにドラマや映画の出演で女優業だってこなしますから、演技力だってあるに越したことはありませんからね_H_」") 
	PRINTL
;	PRINTFORM 「とはいえ、アイデンティティといいますか、『オーナーさんをどう見てるか』とか」
;	PRINTFORM 「逆に『オーナーさんにどう見られたいか』みたいな自己性は、個人個人で違いますから」

	CALL PRINT_STRL(@"「そもそもエラさんのお力で、どんなに刷り込みが浅い子でも『嫌だけど我慢できる』くらいにまで不快感を抑えてもらっていますから、安心安全です_H_」") 
	CALL PRINT_STRL(@"「たとえ好きな人とのデート中にあなたが突然割り込んで、彼が見ている前でその子の唇を奪っても、その場で地面に押し倒して無理やりバージンを奪っても_H_」") 
	CALL PRINT_STRW(@"「『嫌だけど仕事だから仕方ない』くらいにおさまっちゃうんですから……つくづく、ＺＰってすごいですよねぇ」")
	PRINTL
	PRINTFORML 「『出会ったばかりのオーナーさんにデレデレしちゃうのは恥ずかしいな』とか『軽い子だと思われたくないな』とか」
	CALL PRINT_STRL(@"「あるいは『嫌がってみせたほうが興奮してもらえそう_H_』とか『襲われちゃうほうがドキドキする_H_』とか」") 
	CALL PRINT_STRW(@"「その時の気持ちやシチュエーションに合わせてアドリブすることで演技力を養い、いい演技にはお射精で褒めてもらえて評定も◎_H_」") 
	PRINTL
	CALL PRINT_STRW(@"「気持ちよくて楽しくて成長も見込めるお仕事♪ アイドルにとっては一石四鳥なんですから、どうぞ気兼ねなく襲ってあげてくださいね_H_」") 
	PRINTL
	CALL PRINT_STRL(@"「以上が、『シンデレラ』と『舞踏会』についてのご説明になります_H_」") 
	CALL PRINT_STRW(@"「最後にまとめて、軽くおさらいしておきますね～_H_」") 
CASE 1
	PRINTL
	CALL PRINT_STRL(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/営業ちひろ")
	PRINTL ちひろ：
	CALL PRINT_STRW(@"「は～い。 ではざっくりと機能の紹介についてだけ、簡潔にまとめてお伝えさせていただきますね_H_」") 
ENDSELECT
PRINTL
PRINTFORMW 「まずは『シンデレラ』について」
PRINTL
CALL PRINT_STR(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/ロゴ見本1")
PRINTFORML 「本日より、リゾート内にいる弊社所属のアイドルには低確率で、こちらのロゴマークが」
CALL PRINT_STR(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/ロゴ見本2")
PRINTFORMW 「このように、名前の横に表示されるようになります」
PRINTL
CALL PRINT_STRL(@"「この印の付いた子は、あなたのための『シンデレラ』_H_」")
CALL PRINT_STRW(@"「日替わりでランダムに選定される、その日いちにち限定でお手付き自由、即パコＯＫ_H_の女の子で～す_H_」") 
PRINTL
CALL PRINT_STRW(@"「見つけたらどうぞお気軽に、お手を触れて可愛がってあげてくださいね_H_」")
PRINTL
PRINTFORMW 「そして『舞踏会』について」
PRINTL
PRINTFORML 「こちらは毎週日曜日に、弊プロダクションがご用意させていただく［突発イベント］」
CALL PRINT_STRW(@"「この%リゾート名称%のオーナー様に向けた、いわゆる『枕営業』となります_H_」") 
PRINTL
PRINTFORMW 「こちらは人選もシチュエーションも選べませんが、そのかわりに毎週必ずお楽しみいただけます♪」
PRINTL
PRINTFORML 「内容や演出がどうあれ、『舞踏会』の内容は全てアイドル本人および事務所各位の合意を得たものですので」
CALL PRINT_STRW(@"「どうか安心して、お楽しみいただければと思います_H_」") 
PRINTL
CALL PRINT_STRL(@"IMAGEPATH_%CSTR:キャラ番号取得:画像フォルダ%/にっこりちひろ")
PRINTFORMW 「以上で、ご説明のほうを終えさせていただきます♪」
PRINTL
CALL PRINT_STRW(@"「ふふ_H_ どうぞ今後とも、私ともどもアイドルの皆さんをよろしくお願いしますね、私たちの『王子様』っ_H__H_」") 
PRINTL
IF !FLAG:クリア済み視聴フラグ
	DRAWLINE
    PRINTFORML ※本機能はその仕様上、「関係性に進展の余地があるほど楽しめる」ものとなっています。
    PRINTFORML 任意のキャラクターに対し、OPTIONメニューからCSVの手動更新、およびアイテムの記憶消去薬の使用を行うことで、
    PRINTFORMW キャラクターの状態をほぼ初対面の状態にまで戻すことが可能です。
	PRINTL
	PRINTFORML 『シンデレラ』選定機能が解放されました。
	PRINTFORML 毎週日曜日に突発イベント［『舞踏会』への招待］が発生するようになりました。
	PRINTFORMW 「アイドルマスターシンデレラガールズ」の世界からキャラクターを招待する際、必要ＺＰが１になりました。
	PRINTL
	DRAWLINE
	FOR LOCAL,0,CHARANUM
		SIF CSTR:LOCAL:出演作品 == "アイドルマスターシンデレラガールズ"
			CFLAG:LOCAL:ZPショップ値段 = 1
	NEXT
	SIF 天使のような悪魔の事務員イベフラグ <= 1
		天使のような悪魔の事務員イベフラグ = 2
	PRINTL
	PRINTFORML 「──あ、それと」
	CALL PRINT_STRW(@"「とあるアイドルに関してお願いしたいことがありまして……後日お時間を頂ければと思います_H_」")
	PRINTL
	PRINTFORMW 『シンデレラ』選定機能の解放により、佐久間まゆキャライベント［エンドオブデイドリーム］が発生しました
	PRINTL
	DRAWLINE
ENDIF


CALL イベント完了フラグ汎用処理("『シンデレラ』と『舞踏会』")



[SKIPSTART]
以下、キャライベントの作成例
-------------------------------------------------------------
好感度要素：恋心度がレベル３０相当にまで上がった時、レベル４０相当まで上げるイベント
-------------------------------------------------------------
@イベント発生条件_キャライベント_『シンデレラ』と『舞踏会』

;開放条件を満たしたら1を返すこと
SIF CFLAG:キャラ検索("[キャラの二つ名]キャラの名前"):恋心度 < 経験値テーブル:29
	RETURN 0

RETURN 1

@イベント関数_キャライベント_『シンデレラ』と『舞踏会』(ARG)
#DIM 対象キャラ
#DIM 上昇量
対象キャラ = キャラ検索("[キャラの二つ名]キャラの名前")

DRAWLINE
PRINTL ［『シンデレラ』と『舞踏会』］
DRAWLINE
PRINTW
PRINTFORMW イベント文章
PRINTFORMW イベント文章
PRINTFORMW イベント文章

;ここに恋心度上昇処理
上昇量 = 経験値テーブル:39 - CFLAG:対象キャラ:恋心度
IF 上昇量 > 0
	NOWEX:対象キャラ:恋心度上昇格納 += 上昇量
ELSE
	;既にLv40以上なのでなんか当たり障りのない量を上げる
	NOWEX:対象キャラ:恋心度上昇格納 += 1000
ENDIF

CALL 関係性ゲージUP用関数(対象キャラ, 0, "好感度")
NOWEX:対象キャラ:恋心度上昇格納 = 0

CALL イベント完了フラグ汎用処理("『シンデレラ』と『舞踏会』")
[SKIPEND]





