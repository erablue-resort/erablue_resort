;****************************************
;縁結び系の処理に使う特殊関数
;****************************************
;・使い方
;「3072」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;「<スタイル名>」を任意のスタイル名に変更する
;****************************************

;--------------------------------------------------
;スタイル変更基礎関数
;--------------------------------------------------
@スタイル変更_3072(対象キャラ, 動作モード)
#DIM 対象キャラ
#DIMS 動作モード
;この関数はいくつ別スタイル作ってもキャラ毎に一個
;必須関数、スタイル変更を追加する場合、必ず作成すること

SELECTCASE 動作モード
	CASE "スタイル名取得"
		;ここは触らない
		VARSET RESULTS
		RESULTS:0 = %NAME:対象キャラ%
		RESULTS:10 = ノーマル

		;RESULTS:Xに名前全体を、RESULTS:X+10にリミテッドや水着など通称(？)を入れる
		;例：
		; RESULTS:1 = [強化状態二つ名]テスト太郎
		; RESULTS:11 = 強化スタイル
		;まだ作りかけなのでコメントアウト
		RESULTS:1 = [傾国の悪女]美獣
		RESULTS:11 = 獣人の姿

		;スタイル変更の条件を付けたい場合、RESULTSを条件分岐の中にいれる。
		;以下はキャラの陥落を条件にする場合の条件分岐
		;IF 陥落チェック(対象キャラ)
		;	RESULTS:1 = <スタイル名>
		;	RESULTS:11 = <スタイルのカテゴリ>
		;ENDIF

		; 複数スタイルを作りたい場合はRESULTS:2、RESULTS:12のように数字をふやしていく
        
	CASE @"スタイル解説_%NAME:対象キャラ%"
		TSTR:スタイル解説 = 
		TSTR:スタイル解説 += @"■%NAME:対象キャラ%<br>"
		TSTR:スタイル解説 += "<br>"
		TSTR:スタイル解説 += "ナバール盗賊団首領を洗脳して盗賊団を操り、ホークアイの親友や妹を手にかけ、<br>"
		TSTR:スタイル解説 += "リースのいるローラント王国を襲撃し、王や王子を手にかけるなどホークアイ・リースたちにとって因縁の相手。<br>"
		TSTR:スタイル解説 += "すべては黒の貴公子のため。<br>"
		TSTR:スタイル解説 += "<br>"

	CASE "スタイル解説_[傾国の悪女]美獣"
		TSTR:スタイル解説 = 
		TSTR:スタイル解説 += "■[傾国の悪女]美獣<br>"
		TSTR:スタイル解説 += "<br>"
		TSTR:スタイル解説 += "本来の姿。高い身体能力を発揮して敵を翻弄する。<br>"
		TSTR:スタイル解説 += "リゾートでは不思議とこの姿でも驚かれたりしない。<br>"
		TSTR:スタイル解説 += "<br>"
		
	CASE "変更後処理"
		;CSTR:対象キャラ:スタイル管理文字列をキーにして処理を実行
		;一人称や二人称、素質の変化などの調教側ステータスの変更を想定
		;戦闘ステータスは別の関数
		SELECTCASE CSTR:対象キャラ:スタイル管理文字列
			CASE ""
				;通常時に戻す処理
				
				TALENT:対象キャラ:種族 = 1
				CSTR:対象キャラ:特殊種族 = 
				TALENT:対象キャラ:猫舌 = 0
				TALENT:対象キャラ:発情期あり = 0
				TALENT:対象キャラ:エルーン耳 = 0
				TALENT:対象キャラ:尻尾あり = 0
				TALENT:対象キャラ:戦闘好き = 0

				CSTR:対象キャラ:服名称 = アラビアンドレス
				EQUIP:対象キャラ:上半身鎧あり = 0
				EQUIP:対象キャラ:上半身服あり = 1
				EQUIP:対象キャラ:脇出し = 1
				EQUIP:対象キャラ:へそ出し = 0
				EQUIP:対象キャラ:はだけ可 = 1
				EQUIP:対象キャラ:手差し込み可 = 1
				EQUIP:対象キャラ:パイズリ可 = 1
				EQUIP:対象キャラ:上タイツあり = 0
				EQUIP:対象キャラ:上半身下着あり = 0
				EQUIP:対象キャラ:上半身下着抜き取り可 = 0
				EQUIP:対象キャラ:下腹部後鎧あり = 0
				EQUIP:対象キャラ:下腹部前鎧あり = 0
				EQUIP:対象キャラ:下半身服あり = 0
				EQUIP:対象キャラ:スカートめくり可 = 1
				EQUIP:対象キャラ:ずらし可 = 0
				EQUIP:対象キャラ:下タイツあり = 0
				EQUIP:対象キャラ:下半身下着あり = 1
				EQUIP:対象キャラ:下半身下着抜き取り可 = 1
				EQUIP:対象キャラ:上下一体服 = 0
				EQUIP:対象キャラ:上下一体タイツ = 0
				EQUIP:対象キャラ:上タイツ破れ = 0
				EQUIP:対象キャラ:下タイツ破れ = 0
				
				SIF CSTR:対象キャラ:着せ替え服 == ""
					CALL CLOTHES_RESET_TRAIN(対象キャラ)
								
				CALLNAME:対象キャラ = イザベラ
				CSTR:対象キャラ:フォルダ判定キー '= CALLNAME:対象キャラ
				SWAP CSTR:対象キャラ:画像フォルダ, CSTR:対象キャラ:スタイル変更前画像フォルダ
				SIF !HAS_RESOURCES(対象キャラ, 0)
					CSTR:対象キャラ:画像フォルダ '= GET_RESOURCES_BASE_FOLDER(対象キャラ)

			CASE "[傾国の悪女]美獣"
			
				TALENT:対象キャラ:種族 = 6
				CSTR:対象キャラ:特殊種族 = 獣人
				TALENT:対象キャラ:猫舌 = 1
				TALENT:対象キャラ:発情期あり = 1
				TALENT:対象キャラ:エルーン耳 = 1
				TALENT:対象キャラ:尻尾あり = 1
				TALENT:対象キャラ:戦闘好き = 1
				
				CSTR:対象キャラ:服名称 = 美しい毛皮
				EQUIP:対象キャラ:上半身鎧あり = 0
				EQUIP:対象キャラ:上半身服あり = 0
				EQUIP:対象キャラ:脇出し = 0
				EQUIP:対象キャラ:へそ出し = 0
				EQUIP:対象キャラ:はだけ可 = 0
				EQUIP:対象キャラ:手差し込み可 = 10
				EQUIP:対象キャラ:パイズリ可 = 0
				EQUIP:対象キャラ:上タイツあり = 0
				EQUIP:対象キャラ:上半身下着あり = 0
				EQUIP:対象キャラ:上半身下着抜き取り可 = 0
				EQUIP:対象キャラ:下腹部後鎧あり = 0
				EQUIP:対象キャラ:下腹部前鎧あり = 0
				EQUIP:対象キャラ:下半身服あり = 0
				EQUIP:対象キャラ:スカートめくり可 = 0
				EQUIP:対象キャラ:ずらし可 = 0
				EQUIP:対象キャラ:下タイツあり = 0
				EQUIP:対象キャラ:下半身下着あり = 0
				EQUIP:対象キャラ:下半身下着抜き取り可 = 0
				EQUIP:対象キャラ:上下一体服 = 0
				EQUIP:対象キャラ:上下一体タイツ = 0
				EQUIP:対象キャラ:上タイツ破れ = 0
				EQUIP:対象キャラ:下タイツ破れ = 0
				
				SIF CSTR:対象キャラ:着せ替え服 == ""
					CALL CLOTHES_RESET_TRAIN(対象キャラ)
				
				;スタイル変更時の処理
				CALLNAME:対象キャラ = 美獣
				CSTR:対象キャラ:フォルダ判定キー '= CALLNAME:対象キャラ
				SWAP CSTR:対象キャラ:画像フォルダ, CSTR:対象キャラ:スタイル変更前画像フォルダ
				SIF !HAS_RESOURCES(対象キャラ, 0)
				CSTR:対象キャラ:画像フォルダ '= GET_RESOURCES_BASE_FOLDER(対象キャラ)
				
						
				
				
		ENDSELECT
ENDSELECT

;--------------------------------------------------
;スタイル変更時、戦闘ステータス変動
;--------------------------------------------------
;@スタイルステータス補正_炎拳事務所代表_ユーリ(対象キャラ)
;#DIM 対象キャラ
;#DIM 現在レベル
;関数名に[]が使えないため、しょうがなく[]排除時の文字列をキーに
;例えば[強化状態二つ名]テスト太郎というスタイルなら、
;@スタイルステータス補正_強化状態二つ名_テスト太郎　という関数名にすること

;属性の変更、火とか水とか文字を変えるだけでOK
;装備ステータス補正保存:対象キャラ:基礎属性変更 = 属性文字列数値変換("火") + 10

;現在レベル = 基礎BATTLE_STATE:対象キャラ:Lv

;ステータスの変更
;それぞれの成長率を疑似的に、下記の通り変更。
;　最大ＨＰ ：36→45
;　最大ＭＰ ：24→15
;　攻撃力   ：24→22
;　防御力   ：16→23
;　回復力   ：16→10
;　行動速度 ：22→23
;装備ステータス補正保存:対象キャラ:最大ＨＰ += 現在レベル * 9
;装備ステータス補正保存:対象キャラ:最大ＭＰ -= 現在レベル * 9
;装備ステータス補正保存:対象キャラ:攻撃力   -= 現在レベル * 2
;装備ステータス補正保存:対象キャラ:防御力   += 現在レベル * 7
;装備ステータス補正保存:対象キャラ:回復力   -= 現在レベル * 6
;装備ステータス補正保存:対象キャラ:行動速度 += 現在レベル * 1

;装備再計算時にこの関数は呼ばれる
;補正の順番は「スタイル＞指輪＞耳飾り＞料理など＞パーティキャラ補正」
;補正可能なステータスは「装備ステータス補正保存.ERD」を参照のこと


;--------------------------------------------------
;スタイル変更時、使用可能アビリティの変動
;--------------------------------------------------
;テンプレート「固有アビリティ_キャラ名.ERB」に記述する
;「@固有アビ_3072_任意の文字列(ARGS, キャラ番号)」の上部にある分岐を修正する

; IF スタイル判定関数(キャラ番号, "デフォルト") == 0
; を以下のように修正
; IF スタイル判定関数(キャラ番号, "<スタイル名>") == 0

;こうすることで、そのアビは<スタイル名>になっている時のみ使用可能という意味になる


;--------------------------------------------------
;スタイル変更時、使用可能奥義の変動
;--------------------------------------------------
;奥義はアビのように複数種類を使うことを想定していないため、別関数を呼ぶことを推奨。
;奥義テンプレにある以下の分岐のうち、任意のスタイル名の部分を編集した上で
;奥義テンプレをコピーして作成した関数に貼り付け、中身を記述する。

; IF CSTR:キャラ番号:スタイル管理文字列 == "任意のスタイル名"
; 	CALL 任意のスタイル名固有奥義(ARGS, キャラ番号)
; 	RETURN RESULT
; ENDIF
