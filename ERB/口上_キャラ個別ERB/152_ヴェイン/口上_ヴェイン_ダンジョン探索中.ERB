;****************************************
;ダンジョン探索中に条件を満たしていた時表示される文章
;****************************************
;・使い方
;「152」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;****************************************

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_152(対象キャラ)
#DIM 対象キャラ

;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

;恋慕
IF TALENT:対象キャラ:恋慕
	SELECTCASE RAND:16
	CASE 0
		KSTR:(K++) = 「大丈夫か？あんまり無理するなよ？」」
	CASE 1
		KSTR:(K++) = 「俺の側から離れすぎないようにっ！」
		KSTR:(K++) = 「ちゃんと守れる範囲に居てくれよ？」
	CASE 2
		KSTR:(K++) = 「腹減ったぁ……。%CALLNAME:MASTER%、なにか食べ物持ってないか？」
	CASE 3
		KSTR:(K++) = 「ごくごくっ……ぷはぁ……%CALLNAME:MASTER%も飲むか？」
	CASE 4
		KSTR:(K++) = 「結構体力使うなぁ……。%CALLNAME:MASTER%、疲れてないか？」
	CASE 5
		KSTR:(K++) = 「ほら、結構この辺りは風が強いから俺の後ろに隠れてろって！」
	CASE 6
		KSTR:(K++) = 「……ちゅっ_H_」
		KSTR:(K++) = 「へへっ、みんな見てないしこれくらい良いだろ？」
	CASE 7
		KSTR:(K++) = 「ちょっと汗かいてきたな……」
		KSTR:(K++) = 「%CALLNAME:MASTER%、タオルとか持ってるかー？」
	CASE 8
		KSTR:(K++) = 「ん……ここからは道が険しいなぁ……」
		KSTR:(K++) = 「抜けるまで一緒に手を繋ぐか？」
	CASE 9
		KSTR:(K++) = 「はぁー……本当はこのまま思いっきりハグしてキスしたいけど……」
		KSTR:(K++) = 「探索が終わるまでは我慢……だなっ！」
	CASE 10
		KSTR:(K++) = 「ん？どうした？」
		KSTR:(K++) = 「あんまり見つめてくるなら俺も見つめ返すぞ？……じーっ……」
	CASE 11
		KSTR:(K++) = 「無理してないか？歩くペースとか早かったら遠慮なく言ってくれよ？」
	CASE 12
		KSTR:(K++) = 「本当だったらデートとかしたいけど……」
		KSTR:(K++) = 「一緒に探索できるっていうのも悪くないよなっ！」
	CASE 13
		KSTR:(K++) = 「お、ここ滑りやすいな。気をつけて歩けよ？」
		KSTR:(K++) = ヴェインはやんわりと%CALLNAME:MASTER%と手を繋いだ
	CASE 14
		KSTR:(K++) = 「魔物が急に現れると危ないからあんまり俺から離れるなよ？」
	CASE 15
		KSTR:(K++) = 「……可愛いなぁ」
		KSTR:(K++) = ヴェインは幸せそうな表情で%CALLNAME:MASTER%を見つめている
	ENDSELECT
;セフレ
ELSEIF TALENT:対象キャラ:セフレ
	SELECTCASE RAND:10
	CASE 0
		KSTR:(K++) = 「不意にムラっとくることってあるよなぁ……」
	CASE 1
		KSTR:(K++) = 「んっ……そんなに密着してどうした？」
		KSTR:(K++) = 「もしかして……触って欲しいのか？」
	CASE 2
		KSTR:(K++) = 「はぁ……」
		KSTR:(K++) = 「%CALLNAME:MASTER%と一緒にいるとエロいこと考えちゃうんだよなー……」
	CASE 3
		KSTR:(K++) = 「な、なんだよ、俺の股間じーっと見て……欲求不満かぁ？」
	CASE 4
		IF ABL:TARGET:サド性感 > 2
			KSTR:(K++) = 「ん？喉が渇いたのか？」
			KSTR:(K++) = 「じゃあ、四つん這いになって『ワン！』って鳴いたら、俺の水分けてやるよ！」
		ELSE
			KSTR:(K++) = 「はぁー……喉乾いたぁ……へ？飲んでも良いのか？ありがとな！」
			KSTR:(K++) = 「これって……間接キスか？」
			KSTR:(K++) = 「あはは……普段はもっとエロいことしてるのに何だか照れるなぁ……」
		ENDIF
	CASE 5
		IF TALENT:MASTER:性別 == 2
			KSTR:(K++) = 「はぁ……%CALLNAME:MASTER%に抱かれてぇ……」
			KSTR:(K++) = 「んっ！？俺、今声に出てた！？わ、忘れてくれっ！！」
		ELSE
			KSTR:(K++) = 「はぁ……%CALLNAME:MASTER%のことめちゃくちゃに抱きたい……」
			KSTR:(K++) = 「ぉあっ！？お、俺、今声に出してたか！？わ、忘れてくれっ！！」
		ENDIF
	CASE 6
		KSTR:(K++) = 「ちょっと疲れてきたな……」
		KSTR:(K++) = 「へっ！？『なんで勃起してるのか』って……？」
		KSTR:(K++) = 「ち、違うぞっ！これは……あれだ！……疲れマラってやつだ！」
		KSTR:(K++) = 「%CALLNAME:MASTER%を見て興奮してたわけじゃないからなっ！？」
	CASE 7
		KSTR:(K++) = 「はぁー……なんか身体が火照ってる気がする……」
		KSTR:(K++) = 「風が身体に当たるだけでゾクゾクするぜ……」
		KSTR:(K++) = 「さっき受けた攻撃になんかあったかなー……」
	CASE 8
		KSTR:(K++) = 「なぁなぁ、今回の探索で活躍したら、俺のやりたいプレイなんでも受け入れてくれ」
		KSTR:(K++) = 「な？良いだろ？」
	CASE 9
		IF ABL:TARGET:マゾ性感 > 2
			KSTR:(K++) = 「はぁー……喉乾いたぁ……%CALLNAME:MASTER%、水くれー……」
			KSTR:(K++) = 「へ？『水をあげる代わりに次はナマでヤりたい』って？」
			KSTR:(K++) = 「ぐっ……わ、分かった……なんでも言うこと聞くから水をくださいっ！！」
		ELSE
			KSTR:(K++) = 「はぁー……喉乾いたぁ……へ？飲んでも良いのか？ありがとな！」
			KSTR:(K++) = 「これって……間接キスか？」
			KSTR:(K++) = 「あはは……普段はもっとエロいことしてるのに何だか照れるなぁ……」
		ENDIF	
	ENDSELECT
;未陥落
ELSE
	SELECTCASE RAND:14
	CASE 0
		KSTR:(K++) = 「うぉっ……ここ滑りやすいな……！」
	CASE 1
		KSTR:(K++) = 「お、この木の実は食べられるやつだな。非常食に持っていくか！」
	CASE 2
		KSTR:(K++) = 「%CALLNAME:MASTER%、これ、落としたぞー」
	CASE 3
		KSTR:(K++) = 「ん？疲れてきたのか？……えっと、たしか持ってきてたはず……」
		KSTR:(K++) = 「ほら、レモンの蜂蜜漬け！疲れが取れるぞ！」
	CASE 4
		KSTR:(K++) = 「はぁー……さすがに疲れてきたな」
	CASE 5
		KSTR:(K++) = 「突然魔物が出ることもあるから気をつけろよー？」
	CASE 6
		KSTR:(K++) = 「ここから先は少し警戒した方が良いな。魔物の気配を感じる……」
	CASE 7
		KSTR:(K++) = 「おっ、湧水だ。ちょうど喉が渇いてたから助かるー！」
	CASE 8
		KSTR:(K++) = 「そうだ！今日はお弁当作ってきてるんだ！」
		KSTR:(K++) = 「あとでみんなで食べようぜっ！」
	CASE 9
		KSTR:(K++) = 「けっこう汗かいたなぁ……気持ち悪ぃ……」
		KSTR:(K++) = 「%CALLNAME:MASTER%、タオル持ってないか？」
	CASE 10
		KSTR:(K++) = 「%CALLNAME:MASTER%、大丈夫か？」
		KSTR:(K++) = 「もし辛かったらちゃんと言うんだぞ！」
	CASE 11
		KSTR:(K++) = 「ふぅ……結構歩いたな……。そろそろ休憩するか？」
	CASE 12
		KSTR:(K++) = 「ごくごくっ！ぷはーっ！」
		KSTR:(K++) = 「%CALLNAME:MASTER%も水飲むか？」
	CASE 13
		KSTR:(K++) = 「大丈夫か？あんまり無理するなよー？」
	ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0,,対象キャラ)



;--------------------------------------------------
;固有スキル発動時
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_152_YYYY(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意

;YYYYを固有アビ関数の「@固有アビ_152_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;奥義発動時
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_152(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「これがっ！俺の必殺技だーっ！！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0,,対象キャラ)

;--------------------------------------------------
;チェンバースト発動時
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_152(対象キャラ)
#DIM 対象キャラ

;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃ったキャラ）しか呼ばれないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「みんなっ！いくぜーっ！！」

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = FINDCHARA(NO, ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;トドメ時
;--------------------------------------------------
@KOJO_DUNGEON_トドメ時_152(対象キャラ)
#DIM 対象キャラ

;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される

;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

	SELECTCASE RAND:6
		CASE 0
			KSTR:(K++) = 「へへっ！余裕余裕っ！まだまだいけるぜーっ！」
		CASE 1
			KSTR:(K++) = 「おとといきやがれっ！」
		CASE 2
			KSTR:(K++) = 「うっし！終わりっ！」
		CASE 3
			KSTR:(K++) = 「これくらの相手なら楽勝だぜっ！」
		CASE 4
			KSTR:(K++) = 「白竜騎士団副団長の名は伊達じゃねぇぜ！」
		CASE 5
			KSTR:(K++) = 「これくらいは朝飯前だぜっ！」
	ENDSELECT


CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_152(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = FINDCHARA(NO, 152)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:0」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;戦闘勝利時
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_152(対象キャラ)
#DIM 対象キャラ

;ルピやEXPの取得よりも前に表示される

CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「うっし！次行こうぜ、次っ！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_152(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「うぐっ……情けねぇ……」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_152(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「一旦引くかっ！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ, , , , 対象キャラ)
