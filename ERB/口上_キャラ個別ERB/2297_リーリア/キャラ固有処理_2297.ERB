;****************************************
;各種タイミングで処理を割り込ませるための関数群
;****************************************
;・使い方
;「XXXX」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;****************************************

;--------------------------------------------------
;コマンド実行時処理
;--------------------------------------------------
@TURNEND_CHARAEVENT_2297
#DIM キャラ番号
;コマンド実行直後に毎回呼ばれる処理
;タイミングは実行したコマンドが履歴に保存され、次のオートコマンドの発動判定が終わった後
;コマンド用変数がリセットされる前

;特定の条件を満たした時にパラメータを変化させる場合に使用する
;TARGETの分しか呼ばれないので注意

キャラ番号 = GETCHARA(2297)

;--------------------------------------------------
;一日開始時処理
;--------------------------------------------------
@DAYFIRST_CHARAEVENT_2297
#DIM キャラ番号
;一日開始時に呼ばれる処理
;タイミングは滞在期間チェック後、衣装設定やムード・怒りなどのリセット前

;特定の条件を満たした時に行う処理を入れる
;全員分（島にいなくても）呼ばれる

キャラ番号 = GETCHARA(2297)

;不妊の加護が外れていない間に発生
IF CSTR:キャラ番号:固有素質0 == "不妊の加護"
	;朝の時点のあなたの子供の数をフラグに格納。一日終了時にこれより増えているとサブイベントが発生する
	特定状況口上用フラグ:キャラ番号:0 = MASTERの子供の数:0
	特定状況口上用フラグ:キャラ番号:1 = MASTERの子供の数:1
	;妊娠不可を再設定する
	IF TALENT:キャラ番号:妊娠不可 == 0
		PRINTW 　
		PRINTW リーリアの不妊の加護が力を発揮する……。
		PRINTW ……。
		PRINTW リーリアは妊娠不可になった。
		PRINTW 　
		TALENT:キャラ番号:妊娠不可 = 1
		FLAG:ZP所持量 += 300
	ENDIF
ENDIF

;--------------------------------------------------
;一日終了時処理
;--------------------------------------------------
@DAYEND_CHARAEVENT_2297
#DIM キャラ番号
;一日終了時に呼ばれる処理
;タイミングはリゾートの人気変動の後

;特定の条件を満たした時に行う処理を入れる
;全員分（島にいなくても）呼ばれる

キャラ番号 = GETCHARA(2297)

;--------------------------------------------------
;ZP開放時処理
;--------------------------------------------------
@キャラZP解放時_固有処理_2297
#DIM キャラ番号
;ZPでキャラが解放された時に呼ばれる処理
;性質上、ZPで呼ばないキャラに設定しても無意味

キャラ番号 = GETCHARA(2297)
特定状況口上用フラグ:キャラ番号:0 = MASTERの子供の数:0
特定状況口上用フラグ:キャラ番号:1 = MASTERの子供の数:1

;--------------------------------------------------
;PALAM変化時処理
;--------------------------------------------------
@PALAMUP_CHARAEVENT_2297(PALAM種類変数, 変化量)
#DIM キャラ番号
#DIM PALAM種類変数
#DIM 変化量
;PALAMが変化した直後に飛んでくる処理
;より正確に言えばSOURCE_CALC_系関数から飛んでくるので、直接PALAMをいじっても飛んで来ない

キャラ番号 = GETCHARA(2297)

;--------------------------------------------------
;友情度変化時処理
;--------------------------------------------------
@好感度要素_友情度上昇反応_CHARAEVENT_2297(LOCAL)
#DIM キャラ番号
;増加する要素の量が決定し、実際に増加する直前に呼ばれる関数
;特定の要素を増加させたり減少させたりする目的で使用する

キャラ番号 = GETCHARA(2297)
RETURN LOCAL


;--------------------------------------------------
;信頼度変化時処理
;--------------------------------------------------
@好感度要素_信頼度上昇反応_CHARAEVENT_2297(LOCAL)
#DIM キャラ番号
;増加する要素の量が決定し、実際に増加する直前に呼ばれる関数
;特定の要素を増加させたり減少させたりする目的で使用する

キャラ番号 = GETCHARA(2297)
RETURN LOCAL


;--------------------------------------------------
;恋心度変化時処理
;--------------------------------------------------
@好感度要素_恋心度上昇反応_CHARAEVENT_2297(LOCAL)
#DIM キャラ番号
;増加する要素の量が決定し、実際に増加する直前に呼ばれる関数
;特定の要素を増加させたり減少させたりする目的で使用する

キャラ番号 = GETCHARA(2297)
RETURN LOCAL

;--------------------------------------------------
;性愛度変化時処理
;--------------------------------------------------
@好感度要素_性愛度上昇反応_CHARAEVENT_2297(LOCAL)
#DIM キャラ番号
;増加する要素の量が決定し、実際に増加する直前に呼ばれる関数
;特定の要素を増加させたり減少させたりする目的で使用する

キャラ番号 = GETCHARA(2297)
RETURN LOCAL

;--------------------------------------------------
;恋慕度変化時処理
;--------------------------------------------------
@恋慕度上昇反応_CHARAEVENT_2297(LOCAL)
#DIM キャラ番号
;増加する要素の量が決定し、実際に増加する直前に呼ばれる関数
;特定の要素を増加させたり減少させたりする目的で使用する

キャラ番号 = GETCHARA(2297)
RETURN LOCAL

;--------------------------------------------------
;告白成功判定_キャラ個別条件
;--------------------------------------------------
@告白成功判定_キャラ個別条件_2297(対象キャラ)
#FUNCTION
#DIM 対象キャラ
;告白が成功するかを判定する際に呼ばれる関数
;主に特定の条件を達成してないと告白成功させないなどの目的で使用する
RESULT = 0

; SIF 条件未達成時
;	RESULT ++

;未達成時にLOCALを増やしてLOCALを返り値にすることで
;告白時以外にも直接この関数を呼べば幾つ条件を達成していないのかを取得可能

RETURNF RESULT

;--------------------------------------------------
;キャラ表示条件処理
;--------------------------------------------------
@EXキャラ_表示条件_2297
#DIM キャラ番号
;ZPショップにてキャラを追加する画面にて、キャラを表示する条件を設定可能

キャラ番号 = GETCHARA(2297)
;条件を達成したら１を返す
RETURN 1
;条件未達なら0を返すこと
;RETURN 0

;--------------------------------------------------
;滞在期間基本日数算出処理
;--------------------------------------------------
@滞在期間基本日数算出_2297
#DIM キャラ番号
#DIM 滞在日数
;リゾートの滞在期間を算出する際に呼ばれる関数(ただし、同行者として来訪する場合は呼ばれない)
;キャラの滞在日数を固定したい場合などに使用する

キャラ番号 = GETCHARA(2297)
;デフォルトの滞在日数(乱数値)を使用したい場合は負の値を指定する
滞在日数 = -1

RETURN 滞在日数

;--------------------------------------------------
;滞在期間補正日数算出処理
;--------------------------------------------------
@滞在期間補正日数算出_2297
#DIM キャラ番号
#DIM 補正日数
;リゾートの滞在期間を算出する際に呼ばれる関数(ただし、スイート招待の場合は呼ばれない)
;キャラの滞在日数を固定したい場合などに使用する

キャラ番号 = GETCHARA(2297)
;デフォルトの補正(恋慕による補正)を使用したい場合は負の値を指定する
補正日数 = -1

RETURN 補正日数

;--------------------------------------------------
;プレゼント時処理
;--------------------------------------------------
@プレゼント特殊反応_CHARAEVENT_2297(プレゼント名)
#DIM キャラ番号
#DIMS プレゼント名
;プレゼントが特定のアイテムだった場合に反応する関数

キャラ番号 = GETCHARA(2297)

IF プレゼント名 == "任意のプレゼントアイテム名"
	;ここにプレゼントをもらった時の処理を描く

	; CALL SOURCE_CALC_歓楽(TARGET, PLAYER, 任意の数値)
	; CALL SOURCE_CALC_征服(TARGET, PLAYER, 任意の数値)
	; CALL SOURCE_CALC_接触(TARGET, PLAYER, 任意の数値)
	; CALL SOURCE_CALC_好感度要素_友情度UP(TARGET, PLAYER, 任意の数値)
	; CALL SOURCE_CALC_好感度要素_恋心度UP(TARGET, PLAYER, 任意の数値)
	;が基本。もらった時の口上はここではなく、口上_キャラ名_コマンド実行時.ERBの@KOJO_COM_2297_314で行うこと

	;RFLAG:コマンド結果受渡し変数２にアイテムのランクが入っている。ランクは現状０～５

	;何が特殊反応した場合は１を返すこと
	RETURN 1
ENDIF

;何も特殊反応がない場合は０を返すこと
RETURN 0

; ;--------------------------------------------------
; ;水着着替え時処理
; ;--------------------------------------------------
; @水着着替え特殊処理_2297(対象キャラ)
; #DIM 対象キャラ
; ;水着に着替えるタイミングで水着に着替えるところを、別の処理を行う関数
; ;主に特別な衣装に着替えるなどの処理を行う

; ;--------------------------------------------------
; ;風呂場着替え時処理
; ;--------------------------------------------------
; @風呂場着替え特殊処理_2297(対象キャラ)
; #DIM 対象キャラ
; ;風呂に入るタイミングで湯浴み着に着替えるところを別の処理を行う関数
; ;主に特別な衣装に着替えるなどの処理を行う

; ;--------------------------------------------------
; ;風呂後着替え時処理
; ;--------------------------------------------------
; @風呂後着替え特殊処理_2297(対象キャラ)
; #DIM 対象キャラ
; ;風呂から上がったタイミングで浴衣に着替えるところを別の処理を行う関数
; ;主に特別な衣装に着替えるなどの処理を行う

; ;--------------------------------------------------
; ;自室着替え時処理
; ;--------------------------------------------------
; @自室着替え特殊処理_2297(対象キャラ)
; #DIM 対象キャラ
; ;自室に戻ったタイミングで部屋着に着替えるところを別の処理を行う関数
; ;主に特別な衣装に着替えるなどの処理を行う


