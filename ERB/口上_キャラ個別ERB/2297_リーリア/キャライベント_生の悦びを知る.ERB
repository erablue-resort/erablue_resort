;特定のキャラをメインにするイベントカテゴリ
;YYYYを任意のイベント名に変えて使うこと、他との重複不可

@イベント発生条件_キャライベント_生の悦びを知る
#DIM 対象キャラ
#DIM 産ませた子
#DIM 産んだ子
産ませた子 = MASTERの子供の数:0 - 特定状況口上用フラグ:対象キャラ:0
産んだ子 = MASTERの子供の数:1 - 特定状況口上用フラグ:対象キャラ:1

対象キャラ = キャラ検索("[浄化の姉妹・戦闘担当]リーリア")
;開放条件を満たしたら1を返すこと
SIF CSTR:対象キャラ:固有素質0 == "失われた加護"
	RETURN 0
SIF TALENT:対象キャラ:妊娠不可 == 0
	RETURN 0
;正規のイベントで恋慕不可が解除されていたら発生しない
SIF イベント完了フラグ確認(@"【汎用】[浄化の姉妹・戦闘担当]リーリア[恋慕不可]解除") == 1
	RETURN 0
;一日終了時イベントであなたの子供が生まれていない時は発生しない
SIF 産ませた子 == 0 && 産んだ子 == 0
	RETURN 0
RETURN 1

@イベント消滅条件_キャライベント_生の悦びを知る
;この条件を満たした時、イベントは発生してない扱いとなる
;発生条件＞消滅条件で見るので、発生と消滅を両方満たしている時は「発生した！」というメッセージが出るが発生していない扱いになる
;そのため条件には注意すること
#DIM 対象キャラ
#DIM 産ませた子
#DIM 産んだ子
産ませた子 = MASTERの子供の数:0 - 特定状況口上用フラグ:対象キャラ:0
産んだ子 = MASTERの子供の数:1 - 特定状況口上用フラグ:対象キャラ:1

対象キャラ = キャラ検索("[浄化の姉妹・戦闘担当]リーリア")
;消滅条件を満たしたら1を返す
;正規の恋慕不可解除イベントが実行されたら消滅させる
SIF イベント完了フラグ確認(@"【汎用】[浄化の姉妹・戦闘担当]リーリア[恋慕不可]解除") == 1
	RETURN 1
SIF CSTR:対象キャラ:固有素質0 == "失われた加護"
	RETURN 1
;一日終了時に子供が生まれていないなら消滅させる
SIF 産ませた子 == 0 && 産んだ子 == 0
	RETURN 1
RETURN 0

@イベント関数_キャライベント_生の悦びを知る(ARG)
#DIM 対象キャラ
DRAWLINE
PRINTL ［生の悦びを知る］
DRAWLINE
PRINTW
PRINTFORMW %CALLNAME:PLAYER%の子供が産まれた。
PRINTFORMW シスターであるリーリアは、僅かながらもお産を手伝い、
PRINTFORMW 産声を上げた赤ん坊に感慨深げにしていた。
PRINTFORMW 
PRINTFORMW %CALLNAME:PLAYER%は新たな生命の誕生についてリーリアに語って聞かせる。
PRINTFORMW 肩に触れ、息が当たるほどに顔を近づけ、腰に、腹に手を触れる…。
PRINTFORMW 
PRINTFORMW 星晶獣eraの力を借りて、それだけで十分に成った。
PRINTFORMW 
PRINTFORMW 
PRINTFORMW リーリアの不妊の加護が失われた。
PRINTFORMW 
;イベント中にアイテムやステータスの変動が起こる場合、以下の分岐の中に記述すること
;イベント再視聴で無限に稼ぎが出来たりしないようにする措置
IF !FLAG:クリア済み視聴フラグ
	対象キャラ = キャラ検索("[浄化の姉妹・戦闘担当]リーリア")
	CSTR:対象キャラ:固有素質0 = 失われた加護
	TALENT:対象キャラ:陥落不可 = 0
	TALENT:対象キャラ:妊娠不可 = 0
	CALL イベント完了フラグ汎用処理_再視聴不可(@"【汎用】%NAME:対象キャラ%[恋慕不可]解除")
ENDIF

CALL イベント完了フラグ汎用処理("生の悦びを知る")
