;****************************************
;・使い方
;「2466」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;「<スタイル名>」を任意のスタイル名に変更する
;****************************************

;--------------------------------------------------
;スタイル変更基礎関数
;--------------------------------------------------
@スタイル変更_2466(対象キャラ, 動作モード)
#DIM 対象キャラ
#DIMS 動作モード
;この関数はいくつ別スタイル作ってもキャラ毎に一個
;必須関数、スタイル変更を追加する場合、必ず作成すること

SELECTCASE 動作モード
	CASE "スタイル名取得"
        ;ここは触らない
		VARSET RESULTS
		RESULTS:0 = %NAME:対象キャラ%
		RESULTS:10 = ノーマル

		;RESULTS:Xに名前全体を、RESULTS:X+10にリミテッドや水着など通称(？)を入れる
        ;例：
		; RESULTS:1 = [強化状態二つ名]テスト太郎
		; RESULTS:11 = 強化スタイル
		RESULTS:1 = [偽りの拳]ヴァツ
		RESULTS:11 = 変化術
        
		; 複数スタイルを作りたい場合はRESULTS:2、RESULTS:12のように数字をふやしていく
        
	CASE @"スタイル解説_%NAME:対象キャラ%"
		TSTR:スタイル解説 = 
		TSTR:スタイル解説 += @"■%NAME:対象キャラ%<br>"
		TSTR:スタイル解説 += "<br>"
		TSTR:スタイル解説 += "通常の姿。ステータス変動無し。闇属性。<br>"
		TSTR:スタイル解説 += "<br>"
        ;このCALLはそのままで良い
		CALL スタイル奥義アビ表示_汎用文章(対象キャラ, NAME:対象キャラ)
	CASE "スタイル解説_[偽りの拳]ヴァツ"
		TSTR:スタイル解説 = 
		TSTR:スタイル解説 += "■[偽りの拳]ヴァツ<br>"
		TSTR:スタイル解説 += "<br>"
		TSTR:スタイル解説 += "バツとその仲間達の結束を壊すため、偽物に化けた姿。<br>"
		TSTR:スタイル解説 += "変装術により言動・属性などはバツと同性能。<br>"
		TSTR:スタイル解説 += "ただ戦術の違いや髪に銀色のメッシュが掛かっているなど、不完全な部分が見受けられる。<br>"
		TSTR:スタイル解説 += "<br>"
        ;このCALLはそのままで良い、戦闘アビが変動しない場合は消しても良い
		CALL スタイル奥義アビ表示_汎用文章(対象キャラ, "[偽りの拳]ヴァツ")
	CASE "変更後処理"
		;CSTR:対象キャラ:スタイル管理文字列をキーにして処理を実行
		;一人称や二人称、素質の変化などの調教側ステータスの変更を想定
        ;戦闘ステータスは別の関数
		SELECTCASE CSTR:対象キャラ:スタイル管理文字列
			CASE "[暗黒の刺客]霧嶋九郎"
                ;通常時に戻す処理
			CASE "[偽りの拳]ヴァツ"
                ;スタイル変更時の処理
		ENDSELECT
ENDSELECT


;--------------------------------------------------
;スタイル変更時、戦闘ステータス変動
;--------------------------------------------------
@スタイルステータス補正_偽りの拳_ヴァツ(対象キャラ)
#DIM 対象キャラ
;関数名に[]が使えないため、しょうがなく[]排除時の文字列をキーに
;例えば[強化状態二つ名]テスト太郎というスタイルなら、
;@スタイルステータス補正_強化状態二つ名_テスト太郎　という関数名にすること

;属性の変更、火とか水とか文字を変えるだけでOK
装備ステータス補正保存:対象キャラ:基礎属性変更 = 属性文字列数値変換("火") + 10
;ステータスの変更
装備ステータス補正保存:対象キャラ:攻撃力 += 100

;装備再計算時にこの関数は呼ばれる
;補正の順番は「スタイル＞指輪＞耳飾り＞料理など＞パーティキャラ補正」
;補正可能なステータスは「装備ステータス補正保存.ERD」を参照のこと


;--------------------------------------------------
;スタイル変更時、使用可能アビリティの変動
;--------------------------------------------------
;テンプレート「固有アビリティ_キャラ名.ERB」に記述する
;「@固有アビ_2466_任意の文字列(ARGS, キャラ番号)」の上部にある分岐を修正する

; IF スタイル判定関数(キャラ番号, "デフォルト") == 0
; を以下のように修正
; IF スタイル判定関数(キャラ番号, "<スタイル名>") == 0

;こうすることで、そのアビは<スタイル名>になっている時のみ使用可能という意味になる


;--------------------------------------------------
;スタイル変更時、使用可能奥義の変動
;--------------------------------------------------
;奥義はアビのように複数種類を使うことを想定していないため、別関数を呼ぶことを推奨。
;奥義テンプレにある以下の分岐のうち、任意のスタイル名の部分を編集した上で
;奥義テンプレをコピーして作成した関数に貼り付け、中身を記述する。

@固有奥義_2466(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名

IF CSTR:キャラ番号:スタイル管理文字列 == "[偽りの拳]ヴァツ"
	CALL 固有奥義_2466_ヴァツ専用奥義(ARGS, キャラ番号)
	RETURN RESULT
ENDIF

IF TALENT:恋慕 || TALENT:セフレ || TALENT:非エロ陥落
	奥義名 = 暗黒闇神楽
	奥義威力 = 550
ELSE
	奥義名 = 暗黒気合弾
	奥義威力 = 450
ENDIF

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		IF 奥義名 == "暗黒闇神楽"
			詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>両手の爪で殴り掛かる乱舞技。敵単体に火属性大ダメージ。
		ELSEIF 奥義名 == "暗黒気合弾"
			詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>邪気が込められた全開気合弾を放つ。敵単体に火属性大ダメージ。
		ENDIF
		RETURN 奥義威力
	CASE "奥義前効果"
		;対象決定の後、ダメージよりも前に発生する効果。基本の奥義ダメージ部分は記載する必要はない。
		;奥義威力が0だとここの部分もスキップされる

		;処理の都合上、ここから奥義ダメージまでにリセットを噛ませてないため
		;必要な場合を除きここでリセット
		CALL アビ汎用変数文字列リセット
	CASE "奥義追加効果"
		;ここに奥義効果を記述する。基本の奥義ダメージ部分は記載する必要はない。
		;基本的にアビテンプレートの関数を使用すること
		;テンプレート使用の例は固有アビリティ_キャラ名.ERBに記載
		IF 奥義名 == "暗黒闇神楽"
			CALL アビ対象選択テンプレート_敵単体
			アビ汎用変数:効果割合 = 550
			CALL アビテンプレート_ダメージ処理_火属性
		ELSEIF 奥義名 == "暗黒気合弾"
			CALL アビ対象選択テンプレート_敵単体
			アビ汎用変数:効果割合 = 450
			CALL アビテンプレート_ダメージ処理_火属性
		ENDIF
ENDSELECT


@固有奥義_2466_ヴァツ専用奥義(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名

IF TALENT:恋慕 || TALENT:セフレ || TALENT:非エロ陥落
	奥義名 = 暗黒闇神楽
	奥義威力 = 550
ELSE
	奥義名 = 暗黒気合弾
	奥義威力 = 450
ENDIF

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		IF 奥義名 == "暗黒闇神楽"
			詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>両手の爪で殴り掛かる乱舞技。敵単体に火属性大ダメージ。
		ELSEIF 奥義名 == "暗黒気合弾"
			詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>邪気が込められた全開気合弾を放つ。敵単体に火属性大ダメージ。
		ENDIF
		RETURN 奥義威力
	CASE "奥義前効果"
		;対象決定の後、ダメージよりも前に発生する効果。基本の奥義ダメージ部分は記載する必要はない。
		;奥義威力が0だとここの部分もスキップされる

		;処理の都合上、ここから奥義ダメージまでにリセットを噛ませてないため
		;必要な場合を除きここでリセット
		CALL アビ汎用変数文字列リセット
	CASE "奥義追加効果"
		;ここに奥義効果を記述する。基本の奥義ダメージ部分は記載する必要はない。
		;基本的にアビテンプレートの関数を使用すること
		;テンプレート使用の例は固有アビリティ_キャラ名.ERBに記載
		IF 奥義名 == "暗黒闇神楽"
			CALL アビ対象選択テンプレート_敵単体
			アビ汎用変数:効果割合 = 550
			CALL アビテンプレート_ダメージ処理_火属性
		ELSEIF 奥義名 == "暗黒気合弾"
			CALL アビ対象選択テンプレート_敵単体
			アビ汎用変数:効果割合 = 450
			CALL アビテンプレート_ダメージ処理_火属性
		ENDIF
ENDSELECT

;--------------------------------------------------
;キャラについての解説
;--------------------------------------------------
@口上_ステータス画面_キャラ解説_2466(対象キャラ)
;EXキャラの出典を解説したり、キャラの設定・背景を解説するもの
#DIM 対象キャラ

KSTR:(K++) = 　表向きはジャスティス学園の優等生、その正体は忌野一族抹殺を目論む悪の忍者。
KSTR:(K++) = 　自己中心的で残忍。猜疑心が強く、姉のゆりかと自分を慕うもの全て駒としか見ていない。
KSTR:(K++) = 　…リゾート生活でも敢えて本性を隠し、穏やかな青年を演じている。
KSTR:(K++) = 　
KSTR:(K++) = 　誕生日：9月6日
KSTR:(K++) = 　血液型：AB型
KSTR:(K++) = 　好きな物：力・権力・犬
KSTR:(K++) = 　嫌いな物：忌野一族・姉・自分に指図する人間
KSTR:(K++) = 　特技：洗脳術・変装術・猫被術
KSTR:(K++) = 　
KSTR:(K++) = 　固有素質【暗黒生徒会】
KSTR:(K++) = 　九郎が立ち上げた組織。本編ではゆりか・ももを従えて暗躍する。
