;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「1019」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_1019
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)

SELECTCASE RAND:6
	CASE 0
		WSTR:(K++) = 「眩しくって、下品で、にぎやかで、奥ゆかしくもあって、いい人たちも悪い奴らもいて……」
		KSTR:(K++) = 「まあそんな街だよ、ネオサイタマっていうのは」
		KSTR:(K++) = 「……アサリ＝サンやニチョームの皆、元気かなぁ」
	CASE 1
		WSTR:(K++) = 「アタイのジツなら松明替わりにはなるよ」
		KSTR:(K++) = 浮遊する折鶴が桜色の光を放ちながら周囲を照らしている。
	CASE 2
		WSTR:(K++) = 「ちょっと待って。この人が言ってる、あっちの道には罠があるって」
		KSTR:(K++) = ヤモトが物言わぬ屍と会話している。これが彼女のジツなのか……
	CASE 3
		WSTR:(K++) = 「これ？　オリガミだよ。タコ、ドラゴン、ゴリラ、イーグル。ホラ、四聖獣が出来た」
	CASE 4
		WSTR:(K++) = 「アタイ、これでもちょっとはカラテに自信があるんだ。%CALLNAME:MASTER%＝サンも頼っていいよ」
	CASE 5
		WSTR:(K++) = 「良くして貰いっぱなしっていうわけにもいかないし、%CALLNAME:MASTER%＝サンの仕事、手伝うね」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL,,0)

;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
;オリガミ・ミサイル
@KOJO_DUNGEON_固有アビ発動時_1019_1(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)

STRDATA KSTR:(K++)
	DATA 「行け！」
	DATA 「イヤーッ！」
	DATA 「アタイは空っぽじゃない！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;サクラ・エンハンスメント
@KOJO_DUNGEON_固有アビ発動時_1019_2(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)
STRDATA KSTR:(K++)
	DATA 「やるんだ。アタイならやれる！」
	DATA (((乱すな……心を乱すな……！)))
	DATA 「カタナにカラテを注ぎ込む！」
ENDDATA

;イアイドー
@KOJO_DUNGEON_固有アビ発動時_1019_3(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)
STRDATA KSTR:(K++)
	DATA 「イアイド！」ヤモトが決断的に愛刀を振るった！
	DATA 「アタイはカタナになるんだ、アタイ自身がカタナだ！」
	DATA 「アタイがやるんだ！　イヤーッ！」
ENDDATA

;シ・バタフライ
@KOJO_DUNGEON_固有アビ発動時_1019_4(使用アビ名)
#DIMS 使用アビ名
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)
STRDATA KSTR:(K++)
	DATA 「シの蝶よ！　舞え！」
	DATA 「何て恐ろしいジツなんだろう……でも……それでも！」
	DATA 「魂をアノヨへ運ぶシの蝶よ！」
ENDDATA


CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_1019(使用奥義名)
#DIMS 使用奥義名

CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)
;サウザンド・オリガミ・ミサイル
SELECTCASE RAND:2
	CASE 0
		KSTR:(K++) = 「ここだ！　この瞬間だ！　アタイの力、見せてやるッ！」
		WSTR:(K++) = 「イイイヤアアアーーーッ！」
	CASE 1
		KSTR:(K++) = 無数のオリガミが宙に浮き、自動的に折り畳まれてゆく。
		KSTR:(K++) = やがてヤモトは荘厳ですらある手つきで標的を指差した……
		WSTR:(K++) = 「――行けッ！」
;	CASE 2
;		KSTR:(K++) = 「」
;		WSTR:(K++) = 「」
	ENDSELECT
;桜色に光る一千の折鶴が、次々に敵へと押し寄せる！
CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_1019
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「今だ！　ヤッチマイナー！」

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = FINDCHARA(NO, ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;味方から回復を受けた時
;「（キャラ名）のＨＰが」の直後に表示される
;複数人回復した場合、ランダムで一人の分が表示される
;--------------------------------------------------
@KOJO_DUNGEON_被回復時_1019
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)

;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:0」でキャラ番号が
;「戦闘行動キャラ」で隊列番号が取れる

KSTR:(K++) = 「アタイはダイジョブだよ。でも、アリガト」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_1019
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「『カラテを忘れるな。ザンシンせよ』……だよね、カギ＝サン」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_1019
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)
SELECTCASE RAND:2
	CASE 0
KSTR:(K++) = 『過去が今／私の人生を収穫に来た』
KSTR:(K++) = ヤモトは以前、どこかで読んだハイクを思い出していた……
	CASE 1
KSTR:(K++) = 「ヤ！ラ！レ！ターッ！」
	ENDSELECT
CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_1019
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = FINDCHARA(NO, 1019)
LOCAL:1 = キャラ隊列検索(LOCAL)

KSTR:(K++) = 「クッ……まだ、倒れられない……」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)
