@固有アビ_97_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM フォルテ隊列

フォルテ隊列 = キャラ隊列検索(GETCHARA(97))
IF バフ番号取得_枠("空中で_防御力", フォルテ隊列) > -1
	アビ名 =
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
	アビ名 = 黒竜双撃波
	消費ＭＰ = 80
ELSE
	アビ名 = 黒竜双撃波
	消費ＭＰ = 50
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に［攻撃力✕450～500％］の闇属性ダメージを与える。
		ELSE
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に［攻撃力✕400％］の闇属性ダメージを与える。
		ENDIF
		IF 戦闘中カウント:フォルテ隊列:自由枠１ == 1
			詳細文文字列受け渡し変数 += @"<br>同じ攻撃をもう一度行う。"
		ENDIF
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
			詳細文文字列受け渡し変数 += @"<br>更に、一定確率で同じ攻撃をもう一度行う。"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵単体
		
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
			アビ汎用変数:効果割合 = RAND:50 + 450
		ELSE
			アビ汎用変数:効果割合 = 400
		ENDIF
		CALL アビテンプレート_ダメージ処理_闇属性

		SIF 基礎BATTLE_STATE:キャラ番号:Lv >= 70 && RAND:100 >= 80
			CALL アビテンプレート_ダメージ処理_闇属性
		IF 戦闘中カウント:戦闘行動キャラ:自由枠１ == 1
			CALL アビテンプレート_ダメージ処理_闇属性
			戦闘中カウント:戦闘行動キャラ:自由枠１ = 0
		ENDIF
ENDSELECT


@固有アビ_97_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

IF バフ番号取得_枠("空中で_防御力", キャラ隊列検索(GETCHARA(97))) > -1
	アビ名 = バトルクライ
	消費ＭＰ = 150
	効果数値 = 30
ELSE
	アビ名 = バトルクライ
	消費ＭＰ = 80
	効果数値 = 10
ENDIF
	
SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>味方全体に［累積15％最大45％］（独自枠）の攻撃力上昇効果を与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
			詳細文文字列受け渡し変数 += @"<br>更に、一定確率で［累積15％最大45％］（独自枠）の攻撃力上昇効果を与える。"
		ENDIF
		詳細文文字列受け渡し変数 += @"<br>敵全体に［累積{効果数値}％最大30％］（累積枠・5ターン）の攻撃力減少効果を与える。"
		RETURN 消費ＭＰ
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = 竜騎の咆哮_攻撃力
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 15
		アビ汎用変数:累積上限_割合 = 45
		アビ汎用変数:持続ターン = -1
		CALL アビテンプレート_有利効果_バフ効果セット
		CALL アビ汎用変数文字列リセット

		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70 && RAND:100 >= 80
			CALL アビ対象選択テンプレート_味方全体_生者のみ
			アビ汎用文字列:バフ・デバフ枠 = ドラコニックエコー_攻撃力
			アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
			アビ汎用変数:効果割合 = 15
			アビ汎用変数:累積上限_割合 = 45
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			CALL アビ汎用変数文字列リセット
		ENDIF

		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用文字列:バフ・デバフ枠 = 攻撃力累積
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 効果数値
		アビ汎用変数:累積上限_割合 = 30
		アビ汎用変数:基礎成功確率 = 100
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_不利効果_累積デバフ効果セット
ENDSELECT


@固有アビ_97_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	IF バフ番号取得_枠("空中で_防御力", キャラ隊列検索(GETCHARA(97))) > -1
		アビ名 = 蒼天魔竜導
		消費ＭＰ = 40
		効果数値 = 100
	ELSE
		アビ名 = 蒼天魔竜導
		消費ＭＰ = 70
		効果数値 = 60
	ENDIF
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>味方単体に［30％］（Ａ枠・3ターン）のクリティカル率上昇効果を与える。成功率{効果数値}％。
		詳細文文字列受け渡し変数 += @"<br>［70％］（Ａ枠・3ターン）のDA率上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>現在ターンが7ターン目以降の時、このアビリティの対象は味方全体になる。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		IF 現在ターン数 >= 7
			CALL アビ対象選択テンプレート_味方全体_生者のみ
		ELSE
			CALL アビ対象選択テンプレート_味方単体_生者のみ
		ENDIF
		アビ汎用文字列:バフ・デバフ枠 = クリティカル率A
		アビ汎用文字列:バフ・デバフ対象能力 = クリティカル率
		アビ汎用変数:効果量 = 30
		アビ汎用変数:基礎成功確率 = 効果数値
		アビ汎用変数:持続ターン = 3
		CALL アビ汎用変数文字列リセット

		IF 現在ターン数 >= 7
			CALL アビ対象選択テンプレート_味方全体_生者のみ
		ELSE
			CALL アビ対象選択テンプレート_味方単体_生者のみ
		ENDIF
		アビ汎用文字列:バフ・デバフ枠 = DA率A
		アビ汎用文字列:バフ・デバフ対象能力 = DA率
		アビ汎用変数:効果量 = 70
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@固有アビ_97_4(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

IF バフ番号取得_枠("空中で_防御力", キャラ隊列検索(GETCHARA(97))) > -1
	アビ名 =
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 48
	アビ名 = 呪われた竜騎士＋＋
	消費ＭＰ = 160
	効果数値 = 360
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 呪われた竜騎士＋
	消費ＭＰ = 120
	効果数値 = 240
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
	アビ名 = 呪われた竜騎士
	消費ＭＰ = 80
	効果数値 = 120
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵縦列に［攻撃力✕{効果数値}％］の闇属性ダメージを与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
			詳細文文字列受け渡し変数 += @"<br>更に、一定確率で同じ攻撃をもう一度行う。"
		ENDIF
		詳細文文字列受け渡し変数 += @"<br>［最大体力の（回復力÷100）％］（通常枠・3ターン）の火傷効果を与える。成功率85％。"
		詳細文文字列受け渡し変数 += @"<br>自身に（2ターン）の空中効果を与える。"
		RETURN 消費ＭＰ
	CASE "アビ説明文_詳細"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵縦列に［攻撃力✕{効果数値}％］の闇属性ダメージを与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
			詳細文文字列受け渡し変数 += @"<br>更に、一定確率で同じ攻撃をもう一度行う。"
		ENDIF
		詳細文文字列受け渡し変数 += @"<br>［最大体力の（回復力÷100）％］（通常枠・3ターン）の火傷効果を与える。成功率85％。"
		詳細文文字列受け渡し変数 += @"<br>自身に（2ターン）の空中効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>（空中："
		詳細文文字列受け渡し変数 += @"<br>　［75％］の防御力上昇効果互換。"
		詳細文文字列受け渡し変数 += @"<br>　また、一部のアビリティが強化され、一部のアビリティが使用可能・不可能になる）"
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵縦列
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_闇属性

		SIF 基礎BATTLE_STATE:キャラ番号:Lv >= 70 && RAND:100 >= 80
			CALL アビテンプレート_ダメージ処理_闇属性

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 火傷
		アビ汎用文字列:バフ・デバフ対象能力 = 火傷
		CALL バフ込み数値算出("回復力")
		アビ汎用変数:効果割合 = RESULT / 100
		アビ汎用変数:持続ターン = 3
		アビ汎用変数:基礎成功確率 = 85
		CALL アビテンプレート_ダメージ処理_闇属性
		CALL アビテンプレート_不利効果_デバフ効果セット

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果割合 = 75
		アビ汎用文字列:バフ・デバフ枠 = 空中で_防御力
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:持続ターン = 2
		CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@固有アビ_97_5(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

IF バフ番号取得_枠("空中で_防御力", キャラ隊列検索(GETCHARA(97))) > -1
	アビ名 = 黒竜の解放
	消費ＭＰ = 150
ELSE
	アビ名 =
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 '= アビ名
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に［攻撃力✕600～700％］の闇属性ダメージを与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
			詳細文文字列受け渡し変数 += @"<br>更に、一定確率で同じ攻撃をもう一度行う。"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵全体_生者のみ
			アビ汎用変数:効果割合 = 600 + RAND:100
		CALL アビテンプレート_ダメージ処理_闇属性

		SIF 基礎BATTLE_STATE:キャラ番号:Lv >= 70 && RAND:100 >= 80
			CALL アビテンプレート_ダメージ処理_闇属性
ENDSELECT

; @バフ・デバフ特殊表示_竜騎の咆哮(隊列番号, バフ・デバフ行数)
; #DIM 隊列番号
; #DIM バフ・デバフ行数
; VARSET LOCALS

; PRINTFORML 

@バフ・デバフ特殊表示_空中で(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
VARSET LOCALS

PRINTFORML ［75％］の防御力上昇効果互換。
PRINTFORML また、一部のアビリティが強化され、一部のアビリティが使用可能・不可能になる。

@固有ターン終了時処理_キャラ_97
#DIM キャラ番号

CALL アビ汎用変数文字列リセット
CALL アビ対象選択テンプレート_自己のみ
アビ汎用変数:効果割合 = 3
アビ汎用変数:累積上限_割合 = 50
アビ汎用文字列:バフ・デバフ枠 = 我々は黒龍だ_攻撃力
アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
アビ汎用変数:持続ターン = -1
CALL アビテンプレート_有利効果_累積バフ効果セット

IF RAND:100 >= 60
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_味方全体_生者のみ
	アビ汎用変数:累積上限_割合 = 30
	アビ汎用文字列:バフ・デバフ枠 = スカイ・スプレマシー_攻撃力
	アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
	アビ汎用変数:効果割合 = 10
	アビ汎用変数:持続ターン = -1
	CALL アビテンプレート_有利効果_バフ効果セット
ENDIF

@口上_ステータス画面_固有特性解説_97(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;基本的にWAIT系列は使わないことを推奨

KSTR:(K++) = □ 特性 □-------------------------------------------------------------------------------
KSTR:(K++) = □『我々は黒龍だ』□
KSTR:(K++) = 　ターン終了時、徐々に自身の攻撃力が上昇する。
KSTR:(K++) = 　
KSTR:(K++) = □『スカイ・スプレマシー』□
KSTR:(K++) = 　ターン終了時、一定確率で味方全体の攻撃力が上昇する。
KSTR:(K++) = 　

CALL 口上変数表示(対象キャラ, 1)
