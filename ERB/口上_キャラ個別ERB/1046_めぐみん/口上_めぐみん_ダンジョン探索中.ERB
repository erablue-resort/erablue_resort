;****************************************
;ダンジョン探索中に条件を満たしていた時表示される文章
;****************************************
;・使い方
;「1046」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;****************************************

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_1046(対象キャラ)
#DIM 対象キャラ

;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:2
	CASE 0
KSTR:(K++) = 「我が名はめぐみん！アークウィザードを生業とし、最強の攻撃魔法、爆裂魔法を操る者！」
	CASE 1
KSTR:(K++) = 「ここはいい世界ですね！　一日一回と言わず、撃ちたくなれば撃ちたいときに気兼ねなく爆裂魔法を撃てるのですから！」
	ENDSELECT
		
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)


;--------------------------------------------------
;固有スキル発動時
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_1046_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;紅魔の瞳
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「貴様の弱点！　それは！　我が爆裂魔法なり！！」
	DATA 「知りませんでしたか？　この瞳が燃えるように輝くとき、何がどうなるかを！」
	DATA 「我が魔眼はあらゆる虚栄を看破する！」
	DATA 「はーっはっはっはっは！　はーっはっはっはっは！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1046_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;詠唱破棄
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「今回は『巻き』で行きますよー！」
	DATA 「はいはい、巻けばいいんですよね？」
	DATA 「詠唱短縮でもいいんですけど、詠唱破棄の方がカッコイイですよね！　詠唱破棄！」
	DATA 「時は来たァーーーーーーッ！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1046_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
;紅と黒の混淆
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「大気に散らばるエーテルよ！　我が掌中へ集え！」
	DATA 「これ、魔力が空っぽだと使えないんですよねー」
	DATA 「今、漆黒と深紅が混淆し、恐るべき力となる……！！」
	DATA 「天なる力の疊（かさね）より命ず！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;奥義発動時
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_1046(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
SELECTCASE RAND:15
	CASE 0
		KSTR:(K++) = 「エクスプロージョンッ！！」
	CASE 1
		KSTR:(K++) = 「プロージョン！」
	CASE 2
		KSTR:(K++) = 「ジョン！」
	CASE 3
		KSTR:(K++) = 「ばっくれつ！　ばっくれつ！　エクスプロージョン！」
	CASE 4
		KSTR:(K++) = 「――黒より黒く闇より暗き漆黒に、我が深紅の混淆を望みたもう」
		WSTR:(K++) = 「覚醒のとき来たれり。無謬の境界に落ちし理。無行の歪みとなりて現出せよ。
		WSTR:(K++) = 　……踊れ・踊れ・踊れ！　我が力の奔流に望むは崩壊なり。並ぶ者なき崩壊なり！
		WSTR:(K++) = 　万象等しく灰塵に帰し、深淵より来たれ！
		WSTR:(K++) = 　これが人類最大の威力の攻撃手段！　これこそが究極の攻撃魔法！　エクスプロージョン！」
	CASE 5
		KSTR:(K++) = 「光に覆われし漆黒よ。夜を纏いし爆炎よ」
		WSTR:(K++) = 「紅魔の名のもとに原初の崩壊を顕現す。
		WSTR:(K++) = 　終焉の王国の地に、力の根源を隠匿せし者。我が前に統べよ！エクスプロージョン！」
	CASE 6
		KSTR:(K++) = 「紅き黒炎、万界の王！」
		WSTR:(K++) = 「天地の法を敷衍すれど、我は万象昇温の理、崩壊破壊の別名なり！
		WSTR:(K++) = 　永劫の鉄槌は我が元に下れ！　エクスプロージョン！」
	CASE 7
		KSTR:(K++) = 「我が名はめぐみん！」
		WSTR:(K++) = 「紅魔族随一の魔法の使い手にして、爆裂魔法を操りし者！
		WSTR:(K++) = 　我が力、見るがいい！　エクスプロージョン！」
	CASE 8
		KSTR:(K++) = 「我が深紅の流出を以て、世界を覆さん！　エクスプロージョン！」
	CASE 9
		KSTR:(K++) = 「光に覆われし漆黒よ。夜を纏いし爆炎よ――」
		WSTR:(K++) = 「他はともかく、爆裂魔法のことに関しては私は誰にも負けたくないのです！
		WSTR:(K++) = 　行きます！　我が究極の破壊魔法、エクスプロージョン！」
	CASE 10
		KSTR:(K++) = 「空蝉に忍び寄る叛逆の摩天楼。我が前に訪れた静寂なる神雷――」
		WSTR:(K++) = 「時は来た！　今、眠りから目覚め、我が狂気を以て現界せよ！　穿て、エクスプロージョン！」
	CASE 11
		KSTR:(K++) = 「爆走・爆走・爆走――」
		WSTR:(K++) = 「最高最強にして最大の魔法、爆裂魔法の使い手、我が名はめぐみん！
		WSTR:(K++) = 　我に許されし一撃は、同胞の愛にも似た盲目を奏で、塑性を脆性へと葬り去る！
		WSTR:(K++) = 　強き鼓動を享受する！　哀れな獣よ、紅き黒炎と同調し、血潮となりて償いたまえ！
		WSTR:(K++) = 　穿て！　エクスプロージョン！」
	CASE 12
		KSTR:(K++) = 「我を取り巻く戒律の坩堝よ、深淵の血肉が咆哮する！」
		WSTR:(K++) = 「今、紅き波動の一部となれ！　穿て、エクスプロージョン！」
	CASE 13
		KSTR:(K++) = 「我が名はめぐみん！」至高にして全能の支配者、天なる力の疊（かさね）より命ずる者なり！
		KSTR:(K++) = 「至高にして全能の支配者、天なる力の疊（かさね）より命ずる者なり！
		WSTR:(K++) = 　繰るべし、繰るべし、炎の軍勢よ！　我が望みに応じその力を示せ！　エクスプロージョン！」
	CASE 14
		KSTR:(K++) = 「吹けよ嵐！　響けよ爆裂！」
		KSTR:(K++) = 「爆裂魔法はロマンなんです！　不可能も可能にする最強の魔法なんです！
		WSTR:(K++) = 　エクスプロージョン！」
	ENDSELECT

LOCAL = キャラ隊列検索(対象キャラ)
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;チェンバースト発動時
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_1046(対象キャラ)
#DIM 対象キャラ

;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃ったキャラ）しか呼ばれないので注意

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = GETCHARA(ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;トドメ時
;--------------------------------------------------
@KOJO_DUNGEON_トドメ時_1046(対象キャラ)
#DIM 対象キャラ

;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される

;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_1046(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = GETCHARA(1046)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;戦闘勝利時
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_1046(対象キャラ)
#DIM 対象キャラ

;ルピやEXPの取得よりも前に表示される

CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「爆裂魔法の勝利です！！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_1046(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「ぬぅーッ！　これは私と爆裂魔法の敗北では断じてありませんからッ！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_1046(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「チッ……あのタイミングで爆裂魔法を使えていたら……！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
