
@固有アビ_1749_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM マグノス隊列
#DIM 効果数値1
#DIM 効果数値2

マグノス隊列 = キャラ隊列検索(GETCHARA(1749))
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 80
	アビ名 = まだ、道は見えずとも
	消費ＭＰ = 20
	効果数値1 = 50
	効果数値2 = 100
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
	アビ名 = 獅子族の力＋＋
	消費ＭＰ = 20
	効果数値1 = 50
	効果数値2 = 75
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 15
	アビ名 = 獅子族の力＋
	消費ＭＰ = 20
	効果数値1 = 30
	効果数値2 = 50
ELSE
	アビ名 = 獅子族の力
	消費ＭＰ = 20
	効果数値1 = 30
	効果数値2 = 33
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>自分の攻撃力を{効果数値1}％/５Ｔ上昇させる。
		SIF 基礎BATTLE_STATE:キャラ番号:Lv <= 35
				詳細文文字列受け渡し変数 += @"<br>【デメリット】自分のＨＰを{効果数値2}％消費する。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果割合 = 50
		アビ汎用文字列:バフ・デバフ枠 = 獅子族の力
		SIF 基礎BATTLE_STATE:キャラ番号:Lv >= 80
			アビ汎用文字列:バフ・デバフ枠 = まだ、道は見えずとも
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:持続ターン = 5
		CALL アビテンプレート_有利効果_バフ効果セット

		IF 基礎BATTLE_STATE:キャラ番号:Lv <= 35
			IF BATTLE_STATE:マグノス隊列:ＨＰ <= BATTLE_STATE:マグノス隊列:ＨＰ * 効果数値2 / 100
				BATTLE_STATE:マグノス隊列:ＨＰ = 1
			ELSE
				BATTLE_STATE:マグノス隊列:ＨＰ = BATTLE_STATE:マグノス隊列:ＨＰ * 効果数値2 / 100
			ENDIF
		ENDIF
ENDSELECT

@固有アビ_1749_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM マグノス隊列
#DIM 効果数値1
#DIM 効果数値2

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 27
	アビ名 = 勿忘の罪剣
	消費ＭＰ = 65
	効果数値1 = 250
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = スラッシュ＋
	消費ＭＰ = 80
	効果数値1 = 250
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 7
	アビ名 = スラッシュ
	消費ＭＰ = 80
	効果数値1 = 200
ELSE
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に{効果数値1}の火属性ダメージを与える。
	RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 効果数値1
		CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

@固有アビ_1749_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値1

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 34
	アビ名 = プライマルレイジ
	消費ＭＰ = 100
	効果数値1 = 150
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 21
	アビ名 = 咆哮＋
	消費ＭＰ = 100
	効果数値1 = 120
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 13
	アビ名 = 咆哮
	消費ＭＰ = 120
	効果数値1 = 120
ENDIF

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に{効果数値1}の火属性ダメージを与える。
	RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵全体
		アビ汎用変数:効果割合 = 効果数値1
		CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

@固有通常攻撃後処理_キャラ_1749(全滅フラグ, 連撃数)
#DIM キャラ番号
#DIM 連撃数
#DIM 全滅フラグ
#DIM バフ・デバフ行数
#DIM マグノス隊列
#DIM リーダー特性
#DIM マナボ１
#DIM マナボ２
#DIM パワーフリップ性能増加

SIF 全滅フラグ
	戦闘中カウント:マグノス隊列:与ヒット数合計 = 0
SIF 全滅フラグ
	RETURN 0

マグノス隊列 = キャラ隊列検索(GETCHARA(1749))

IF 連撃数 == 3
	CALL アビテンプレート用_表示メッセージ変換処理
	アビテンプレート用_アビ名表示済フラグ = 0

	アビ汎用文字列:実行時メッセージ１ = 「叩き切る！」
	アビ汎用文字列:実行時メッセージ２ = マグノスのパワーフリップ！
	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果割合 = 100 + (戦闘中カウント:マグノス隊列:1 * 150)
	;テオくんと違ってパワフリバフがないので至ってシンプル。
	;hit数反応で補正かかったりもしないので楽ちんですね！！
	;なおリーダー特性等等。オエーーー！！
	CALL アビテンプレート_ダメージ処理_火属性

	;ここで連続パワフリ数を増やしている。
ELSEIF 連撃数 < 3
	戦闘中カウント:マグノス隊列:1 = 0
ENDIF

@固有戦闘開始時処理_キャラ_1749
#DIM マグノス隊列
#DIM 対象番号
#DIM 奥義性能増加
#DIM 現在属性

;マグノス隊列0で共鳴判定
;リーダー特性

マグノス隊列 = キャラ隊列検索(GETCHARA(1749))

IF マグノス隊列 == 0
	FOR LOCAL, 0, 4
		SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
			CONTINUE
		;対象属性（今回は火）かどうか
		IF BATTLE_STATE:LOCAL:属性 == 0
			;現在属性の値
			;　0：火　1：水
			;　2：風　3：土
			;　4：光　5：闇
			戦闘中カウント:マグノス隊列:0 += 1
		ENDIF
	NEXT
ENDIF
IF マグノス隊列 == 0
	FOR LOCAL, 0, 4
		SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
			CONTINUE
		;対象属性（今回は火）かどうか
		IF BATTLE_STATE:LOCAL:属性 == 0
			;現在属性の値
			;　0：火　1：水
			;　2：風　3：土
			;　4：光　5：闇
			CALL アビ対象選択テンプレート_指定(LOCAL, 0)
			アビ汎用文字列:バフ・デバフ枠 = 再起の焔火
			アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
			アビ汎用変数:効果割合 = 30 * 戦闘中カウント:マグノス隊列:0
			アビ汎用変数:持続ターン = -1
			アビ汎用変数:消去不可オプション = 1
			アビ汎用変数:特殊表示オプション = 1
			CALL アビテンプレート_有利効果_バフ効果セット
			;メッセージ出さない用に保存文字列をリセット
			CALL アビテンプレ変数リセット
		ENDIF
	NEXT
ENDIF
CALL アビテンプレ変数リセット
CALL アビ対象選択テンプレート_自己のみ
アビ汎用文字列:バフ・デバフ枠 = 奥義性能増加
アビ汎用文字列:バフ・デバフ対象能力 = 奥義性能増加
アビ汎用変数:持続ターン = -1
アビ汎用変数:消去不可オプション = 1
アビ汎用変数:特殊表示オプション = 1
CALL アビテンプレート_有利効果_バフ効果セット
SIF BATTLE_STATE:マグノス隊列:Lv >= 80
	CALL アビテンプレート_有利効果_ウェポンバースト
;メッセージ出さない用に保存文字列をリセット
CALL アビテンプレ変数リセット

@バフ・デバフ特殊表示_再起の焔火(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM マグノス隊列
#DIM 補正数値
補正数値 = 30 * 戦闘中カウント:マグノス隊列:0

マグノス隊列 = キャラ隊列検索(GETCHARA(1749))
VARSET LOCALS

PRINTFORML 再起の焔火
PRINTFORML 火属性キャラの攻撃力＋{補正数値}％

@バフ・デバフ特殊表示_奥義性能増加(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM マグノス隊列
#DIM リーダー特性
#DIM マナボ１
VARSET LOCALS

マグノス隊列 = キャラ隊列検索(GETCHARA(1749))

SIF 戦闘中カウント:マグノス隊列:0 >= 4
	リーダー特性 = 120
	;リーダー特性適用で１２０％＋
IF BATTLE_STATE:マグノス隊列:Lv >= 60
	マナボ１ = 175
	;贖罪の獅子Lv60時点
ELSEIF BATTLE_STATE:マグノス隊列:Lv >= 30
	マナボ１ = 125
	;贖罪の獅子Lv30時点
ELSE
	;どっちにも満たなければ適用無し
ENDIF
;補正値取得

PRINTFORML 奥義性能アップ
IF 戦闘中カウント:マグノス隊列:0 >= 4
	PRINTFORML ・再起の焔火
	PRINTFORML 自身の奥義ダメージ＋１２０％
ELSE
ENDIF
;リーダー特性表示
	PRINTFORML 
IF BATTLE_STATE:マグノス隊列:Lv >= 30
	PRINTFORML ・贖罪の獅子
	PRINTFORML 自身の奥義ダメージ＋{マナボ１}％
ELSE
ENDIF
;贖罪の獅子表示


;--------------------------------------------------
;戦闘能力画面に表示されるキャラごとの固有処理説明
;--------------------------------------------------
;・使い方
;「XXXX」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;　口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;　基本的にWAIT系列は使わないことを推奨
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_1749(対象キャラ)
#DIM 対象キャラ
#DIM 贖罪の獅子攻撃
#DIM 贖罪の獅子奥義

IF 基礎BATTLE_STATE:対象キャラ:Lv >= 60
贖罪の獅子奥義 = 175
ELSE
贖罪の獅子奥義 = 125
ENDIF

IF 基礎BATTLE_STATE:対象キャラ:Lv >= 80
贖罪の獅子攻撃 = 375
ELSEIF 基礎BATTLE_STATE:対象キャラ:Lv >= 60
贖罪の獅子攻撃 = 175
ELSE
贖罪の獅子攻撃 = 125
ENDIF

CALL 口上変数初期化
KSTR:(K++) = □ リーダー特性：『再起の焔火』 □----------------------------------------------------------
KSTR:(K++) = 　◆1番目に編成時、パーティに火属性キャラを1体編成する度、火属性キャラの攻撃力＋３０％（最大＋１２０％）
KSTR:(K++) = 　◆1番目に編成時、火属性共鳴時、自身の奥義ダメージ＋１２０％
KSTR:(K++) = 　◆1番目に編成時、火属性共鳴時、自身が奥義を発動する度、２Ｔの間自身の攻撃力＋１２０％
KSTR:(K++) = 　
KSTR:(K++) = □ 特性：『クロスブルーフリッパー：剣士』 □-------------------------------------------
KSTR:(K++) = 　トリプルアタック・奥義発動時、パワーフリップ：剣士が発動
KSTR:(K++) = 　◆連続でトリプルアタック時、パワーフリップの性能アップ
KSTR:(K++) = 　
IF 基礎BATTLE_STATE:対象キャラ:Lv >= 30
KSTR:(K++) = □ 特性：『贖罪の獅子』 □-------------------------------------------
KSTR:(K++) = 　自身が火属性キャラである時、自身の奥義ダメージ＋{贖罪の獅子奥義}％
SIF 基礎BATTLE_STATE:対象キャラ:Lv >= 45
KSTR:(K++) = 　自身が火属性キャラである時、自身が奥義を発動する度、２Ｔの間自身の攻撃力＋{贖罪の獅子攻撃}％
SIF 基礎BATTLE_STATE:対象キャラ:Lv >= 80
KSTR:(K++) = 　戦闘開始時、自身の奥義ゲージを１００％にする。
KSTR:(K++) = 　
ELSE
ENDIF


CALL 口上変数表示(対象キャラ, 1)


;このへん雑多メモ

;1/3
;先生、俺マグテオてえてえしたいんすよ。
;テオマグでも可。
;それはそうと仮組みの現段階でもすでにやべえ気配がプンプンしてるぞ。どうんだこれ。
