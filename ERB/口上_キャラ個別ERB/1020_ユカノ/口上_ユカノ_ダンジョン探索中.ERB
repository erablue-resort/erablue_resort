;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「1020」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_1020(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:7
	CASE 0
		WSTR:(K++) = 「『ハイキングはドア・トゥ・ドア』。ミヤモト・マサシのコトワザです」
		KSTR:(K++) = 「何事も、最後の最後まで気を抜いてはいけませんよ、%CALLNAME:MASTER%＝サン」
	CASE 1
		WSTR:(K++) = 「何とも怪しきフィールドですね……」
		KSTR:(K++) = 「『井戸の中の闇を覗きすぎると落ちる』と言います。%CALLNAME:MASTER%＝サンも、無理は禁物です」
	CASE 2
		WSTR:(K++) = 「体調は大丈夫ですか？　体調の不全は注意散漫の元ですよ」
		KSTR:(K++) = 「『注意は一秒、後遺症が死ぬまで』。ミヤモト・マサシもこう言っています」
	CASE 3
		WSTR:(K++) = 「危険ですが、道なき道を行かねば見られぬものもあるのでしょうね」
		KSTR:(K++) = 「ヒョットコを割らねば中を確かめられません。案外私もワクワクしてきました」
	CASE 4
		WSTR:(K++) = 「『湖の魚は地引き網で獲るべからず』……決して焦らず、ヘイキンテキを保つのです」
	CASE 5
		WSTR:(K++) = 「%CALLNAME:MASTER%＝サン、肘を擦り剥いているのではないですか？」
		KSTR:(K++) = 「薬を出しましょう。その程度の怪我なら、私の薬で簡単に治ります」
	CASE 6
		WSTR:(K++) = 「ヤモト＝サンをドージョーに勧誘したのですが、返事を曖昧にされたままなのです」
		KSTR:(K++) = 「……皆は何故、私のSNSに『良い』をつけてくれないのでしょう？」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
;マストダイ・ブレイド
@KOJO_DUNGEON_固有アビ発動時_1020_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA ユカノは決断的にマストダイ・ブレイドで斬りかかる！「キエーッ！」
	DATA ユカノは威圧的に短剣を抜き放った！「カクゴせよ！」
	DATA 「コトワザに曰く『火より早く攻めよ』……キエーッ！」
	DATA ユカノはグルカナイフめいた短剣を振りかざした！「イヤーッ！」
	DATA 「リンピオトーシ！　カイジンリッツァイゼン！」
;	DATA 「私は無慈悲です。カラテで決着をつけましょうか」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;チャドー・ヒーリング
@KOJO_DUNGEON_固有アビ発動時_1020_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「スゥーッ、ハァーッ……スゥーッ、ハァーッ……」
	DATA 「チャドーで癒します」
	DATA 「こちらの世界でも、チャドー・ヒーリングは実際有効ですね」
ENDDATA


;ドラゴンブレス・イブキ
@KOJO_DUNGEON_固有アビ発動時_1020_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「フゥーッ！」
	DATA 「フゥッ！！」KA-BOOOOM！！　火の花が舞い上がった！
	DATA 「フッ」ユカノが掌を杯めいて口に添えて息を吐くと……爆発した！
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_1020(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:3
	CASE 0
		WSTR:(K++) = (((龍の巣へと誘い込むべし……穏やかな準備動作……溜めを作るのだ)))
		KSTR:(K++) = (((龍の眼で狙いを定めよ……そして前触れなく……突風の如く跳躍！)))
	CASE 1
		WSTR:(K++) = 「イイイイヤアアアアーッ！」
		KSTR:(K++) = ユカノは勢いよく地を蹴り、ジェットロケットめいた爆発力で跳躍した！
	CASE 2
		WSTR:(K++) = ユカノは壁を蹴り、あるいは柱を蹴り、障害物を蹴り、高くトライリープ跳躍！　そして！
		KSTR:(K++) = 「イイイイヤアアアアーーーーッ！！」
ENDSELECT
;ドラゴン！！鋭角に突き刺さるチャドー奥義ドラゴン・トビゲリ！
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_1020(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「トドメオサセーッ！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
LOCAL:2 = GETCHARA(1206)
IF キャラ隊列検索(LOCAL:2) > -1


	NSTR:(K++) = ++++
	切り替え名前:1 = %CALLNAME:対象キャラ%
	切り替え顔グラリソース:1 = 探索用_{LOCAL}_顔
	
	KSTR:(K++) = 「ニンジャスレイヤー＝サン、あれをやります！」
	
	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔

	KSTR:(K++) = 「よし！」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_1020(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「マサシ曰く『勝ってメンポを確かめよ』……皆さん、くれぐれも油断せぬように」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_1020(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「私ともあろう者が、なんたるブザマ……！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_1020(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「『逃げる戦士は追う戦士より遠ざかるので致命傷は受けにくい』といいます」
KSTR:(K++) = 「……これも出典はミヤモト・マサシですが、何か？」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
