@PALAMUP_CHARAEVENT_28(PALAM種類変数, 変化量)
#DIM キャラ番号
#DIM PALAM種類変数
#DIM 変化量
;PALAMが変化した直後に飛んでくる処理
;より正確に言えばSOURCE_CALC_系関数から飛んでくるので、直接PALAMをいじっても飛んで来ない


IF TALENT:FINDCHARA(NO, 27):命のリンク
	キャラ番号 = FINDCHARA(NO, 27)
	IF CFLAG:キャラ番号:滞在期間 > 0
		SELECTCASE PALAM種類変数
			CASE 0
				CUP:キャラ番号:0 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 1
				CUP:キャラ番号:1 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 2
				CUP:キャラ番号:2 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 3
				CUP:キャラ番号:3 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 4
				CUP:キャラ番号:4 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
		ENDSELECT
	ENDIF
ENDIF

IF TALENT:FINDCHARA(NO, 146):命のリンク
	キャラ番号 = FINDCHARA(NO, 146)
	IF CFLAG:キャラ番号:滞在期間 > 0
		SELECTCASE PALAM種類変数
			CASE 0
				CUP:キャラ番号:0 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 1
				CUP:キャラ番号:1 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 2
				CUP:キャラ番号:2 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 3
				CUP:キャラ番号:3 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
			CASE 4
				CUP:キャラ番号:4 += 変化量
				CFLAG:キャラ番号:快楽計算フラグ = 1
		ENDSELECT
	ENDIF
ENDIF

IF TALENT:MASTER:命のリンク
	SELECTCASE PALAM種類変数
		CASE 0
			CUP:MASTER:0 += 変化量
			CFLAG:MASTER:快楽計算フラグ = 1
		CASE 1
			CUP:MASTER:1 += 変化量
			CFLAG:MASTER:快楽計算フラグ = 1
		CASE 2
			CUP:MASTER:2 += 変化量
			CFLAG:MASTER:快楽計算フラグ = 1
		CASE 3
			CUP:MASTER:3 += 変化量
			CFLAG:MASTER:快楽計算フラグ = 1
		CASE 4
			CUP:MASTER:4 += 変化量
			CFLAG:MASTER:快楽計算フラグ = 1
	ENDSELECT
ENDIF


