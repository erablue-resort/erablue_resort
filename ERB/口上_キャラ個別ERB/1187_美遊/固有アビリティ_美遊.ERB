@固有アビ_1187_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 隊列番号
#DIM 効果数値, 2
#DIM CD
#DIM CTNOW

CTNOW = 0

隊列番号 = キャラ隊列検索(キャラ番号)

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
	アビ名 = 愉快型魔術礼装（妹）A++
	消費ＭＰ = 150
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 愉快型魔術礼装（妹）A+
	消費ＭＰ = 100
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 1
	アビ名 = 愉快型魔術礼装（妹）A
	消費ＭＰ = 50
ENDIF

SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + 1)
	アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
			詳細文文字列受け渡し変数 = 消費ＭＰ：150
			詳細文文字列受け渡し変数 += "<br>自身に［60％］（独自枠・3ターン）の与ダメージ上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>［60％］（独自枠・3ターン）のクリティカルダメージ率上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>自身に［100］（独自枠・3ターン）の連続攻撃率上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>使用後1ターン使用不能"
			詳細文文字列受け渡し変数 += "　　　　このアビリティでは行動回数を消費しない。"
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
			詳細文文字列受け渡し変数 = 消費ＭＰ：100
			詳細文文字列受け渡し変数 += "<br>自身に［40％］（独自枠・3ターン）の与ダメージ上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>［40％］（独自枠・3ターン）のクリティカルダメージ率上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>自身に［50］（独自枠・3ターン）の連続攻撃率上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>使用後1ターン使用不能"
			詳細文文字列受け渡し変数 += "　　　　このアビリティでは行動回数を消費しない。"
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 1
			詳細文文字列受け渡し変数 = 消費ＭＰ：50
			詳細文文字列受け渡し変数 += "<br>自身に［20％］（独自枠・3ターン）の与ダメージ上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>［20％］（独自枠・3ターン）のクリティカルダメージ率上昇効果を与える。"
			詳細文文字列受け渡し変数 += "<br>使用後1ターン使用不能"
			詳細文文字列受け渡し変数 += "　　　　このアビリティでは行動回数を消費しない。"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
			アビテンプレート用_行動消費無しフラグ = 1
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_与ダメージ
			アビ汎用文字列:バフ・デバフ対象能力 = 与ダメージ
			アビ汎用変数:効果割合 = 60
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			CALL アビ汎用変数文字列リセット
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_クリティカルダメージ率
			アビ汎用文字列:バフ・デバフ対象能力 = クリティカルダメージ率
			アビ汎用変数:効果割合 = 60
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_連続攻撃率
			アビ汎用文字列:バフ・デバフ対象能力 = 連続攻撃率
			アビ汎用変数:効果量 = 100
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			;CTの設定の為のターン数の記録
			戦闘中カウント:隊列番号:CTNOW = 現在ターン数
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
			アビテンプレート用_行動消費無しフラグ = 1
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_与ダメージ
			アビ汎用文字列:バフ・デバフ対象能力 = 与ダメージ
			アビ汎用変数:効果割合 = 40
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			CALL アビ汎用変数文字列リセット
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_クリティカルダメージ率
			アビ汎用文字列:バフ・デバフ対象能力 = クリティカルダメージ率
			アビ汎用変数:効果割合 = 40
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_連続攻撃率
			アビ汎用文字列:バフ・デバフ対象能力 = 連続攻撃率
			アビ汎用変数:効果量 = 50
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			;CTの設定の為のターン数の記録
			戦闘中カウント:隊列番号:CTNOW = 現在ターン数
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 1
			アビテンプレート用_行動消費無しフラグ = 1
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_与ダメージ
			アビ汎用文字列:バフ・デバフ対象能力 = 与ダメージ
			アビ汎用変数:効果割合 = 20
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			CALL アビ汎用変数文字列リセット
			アビ汎用文字列:バフ・デバフ枠 = 愉快型魔術礼装_クリティカルダメージ率
			アビ汎用文字列:バフ・デバフ対象能力 = クリティカルダメージ率
			アビ汎用変数:効果割合 = 20
			アビ汎用変数:持続ターン = 3
			CALL アビテンプレート_有利効果_バフ効果セット
			;CTの設定の為のターン数の記録
			戦闘中カウント:隊列番号:CTNOW = 現在ターン数
		ENDIF
ENDSELECT

@固有アビ_1187_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 隊列番号
#DIM 効果数値, 2
#DIM CD
#DIM CTNOW

CTNOW = 1

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 10
	アビ名 = 少女の意地 B
	消費ＭＰ = 100
	効果数値:0 = 3
	CD = 3
	LOCAL = 戦闘中カウント:隊列番号:CTNOW + CD - 現在ターン数
	SIF 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + CD)
		アビ名 += @" CT:{LOCAL}"
ENDIF

SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + CD)
	アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：100
		詳細文文字列受け渡し変数 += "<br>自身に1回の弱体無効効果を与える"
		詳細文文字列受け渡し変数 += "<br>自身に1回の自動復活効果［50％回復］を与える"
		詳細文文字列受け渡し変数 += @"<br>使用後{CD}ターン使用不能"
		詳細文文字列受け渡し変数 += "　　　　このアビリティでは行動回数を消費しない。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		アビテンプレート用_行動消費無しフラグ = 1
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 少女の意地_自動復活
		アビ汎用文字列:バフ・デバフ対象能力 = 自動復活
		アビ汎用変数:持続回数 = 1
		アビ汎用変数:効果割合 = 50
		CALL アビテンプレート_有利効果_バフ効果セット
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 少女の意地_弱体無効
		アビ汎用文字列:バフ・デバフ対象能力 = 弱体無効
		アビ汎用変数:持続回数 = 1
		CALL アビテンプレート_有利効果_バフ効果セット
		
		戦闘中カウント:隊列番号:CTNOW = 現在ターン数
ENDSELECT
 
@固有アビ_1187_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 隊列番号
#DIM CTNOW

CTNOW = 2

隊列番号 = キャラ隊列検索(キャラ番号)

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 15
	アビ名 = 神稚児の願い EX
	消費ＭＰ = 150
ENDIF

SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + 1)
	アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		詳細文文字列受け渡し変数 += "<br>［50］の奥義ゲージUP効果を与える。"
		詳細文文字列受け渡し変数 += "<br>使用後1ターン使用不能"
		詳細文文字列受け渡し変数 += "　　　　このアビリティでは行動回数を消費しない。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
			アビテンプレート用_行動消費無しフラグ = 1
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_味方単体_生者のみ
			アビ汎用変数:効果量 = 50
			CALL アビテンプレート_有利効果_奥義ゲージUP
			戦闘中カウント:隊列番号:CTNOW = 現在ターン数
ENDSELECT

@固有行動開始時処理_キャラ_1187
#DIM キャラ番号
#DIM 隊列番号

キャラ番号 = GETCHARA(1187)
隊列番号 = キャラ隊列検索(GETCHARA(1187))

CALL アビ汎用変数文字列リセット
CALL アビ対象選択テンプレート_自己のみ
アビ汎用変数:効果割合 = 10
アビ汎用文字列:回復側使用能力値 = 最大ＭＰ
CALL アビテンプレート_ＭＰ回復処理_MAXでも回復

@口上_ステータス画面_固有特性解説_1187(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = □ 特性：『無限の魔力供給 B』  □-----------------------------------------------------------------
KSTR:(K++) = 　行動開始時自身のＭＰが［最大ＭＰ✕10％］回復
KSTR:(K++) = 　

CALL 口上変数表示(対象キャラ, 1)

