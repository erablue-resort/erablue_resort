;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「1029」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_1029(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:5
	CASE 0
		WSTR:(K++) = 「妾こそは数ある魔導書の中でも最高位の存在。当然、相応の敬意を以て遇せよ。わかったな」
	CASE 1
		WSTR:(K++) = 「ほう、妾に記された知識を知りたいとな？」
		KSTR:(K++) = 「だが、よすがよい。魔道の領域は軽々に足を踏み入れていいようなものではないだけ言っておくぞ」
	CASE 2
		WSTR:(K++) = 「こら、小さいからって頭を撫でるな。髪が乱れてしまうし、リボンもほどけてしまうではないか」
		KSTR:(K++) = 「……まあ、あと一回くらいなら許すが……」
	CASE 3
		WSTR:(K++) = 「妾の可愛らしさに惹かれてしまうのは仕方あるまい。褒め言葉ならば存分に向けよ」
	CASE 4
		WSTR:(K++) = 「触っても人間の肉体と大差なかろう？　ふふん、凄いか？　最高位の魔導書たる妾だからこそこのような魂とカタチを持てるのだ」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)




;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_1029_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「力を与えよ！　力を与えよ！　力を与えよ！」
	DATA 「バルザイの偃月刀よ！」
	DATA 「破邪！　斬魔！　天魔・覆滅！」
	DATA 「身の程を知るがよい！」
	DATA 「その首、置いてゆくがよい！」
ENDDATA
	
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1029_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
STRDATA KSTR:(K++)
	DATA 「旧き印（エルダー・サイン）よ、我を護れ！」
	DATA 「旧き印（エルダー・サイン）！」
	DATA 「星の眼よ、燃えよ！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1029_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「時よ、遅滞せよ！」
	DATA 「ド・マリニーの時計よ！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1029_4(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「イア・クトゥグア！　イア・イタクァ！」
	DATA 「旧支配者の力、思い知れ！」
	DATA 「超高温と超低温の同時撃ち、存分に味わうが良い！」
	DATA 「そらそらそら！　切なさ乱れ撃ちじゃあ！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_1029(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

WSTR:(K++) = 「ヒラニプラ・システム接続（アクセス）！」
KSTR:(K++) = 「光射す世界に、汝ら闇黒棲まう場所無し！」
KSTR:(K++) = 「渇かず飢（かつ）えず、無に還れ！　レムリア・インパクト！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_1029(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「ほう、なかなかやるではないか。この妾についてこれるとはな！」

;掛け合いの作り方
;ZZZZ = 掛け合い相手のCSVに記載してあるキャラ番号とする
;
; LOCAL:2 = GETCHARA(ZZZZ)
; IF キャラ隊列検索(LOCAL:2) > -1
; 	KSTR:(K++) = （口上キャラのセリフ）
;
; 	NSTR:(K++) = ++++
;	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
; 	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔
;
; 	KSTR:(K++) = （掛け合い相手のセリフ）
; ENDIF
;と記述すると下に一個、掛け合い相手の顔グラと名前が表示されたメッセージ欄を増やせるので、そこで掛け合いを行う
;複数個メッセージ欄を増やす場合、切り替え顔グラリソース:1、切り替え名前:1のように配列番号を１つずつ増やすこと

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_1029(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「妾の力、憶えたか！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_1029(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = GETCHARA(1029)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:LOCAL)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_1029(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「妾にかかれば、当然の結果よ！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_1029(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「妾ともあろう者がなんと不甲斐無い……」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_1029(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「妾が撤退とな……！」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
