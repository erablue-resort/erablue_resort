
@固有奥義_417(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名
#DIM 蛇紋番号

;IF 陥落チェック(キャラ番号) && 基礎BATTLE_STATE:キャラ番号:Lv >= 70
;	奥義名 =
;	奥義威力 =
;ELSE
	奥義名 = 金牙神然
	奥義威力 = 500
;ENDIF


SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>次の流刀蛇尾・蜿蜒長蛇がMP・行動回数を消費しない
		詳細文文字列受け渡し変数 += @"<br>自身の蛇紋Lvが1上昇［最大Lv5/永続/消去不可］"
		詳細文文字列受け渡し変数 += @"<br>◆蛇紋Lv5の時、Lvをリセットして自身に不休活期効果［12ターン/消去不可］"
		RETURN 奥義威力
	CASE "奥義前効果"
	CASE "奥義追加効果"
		蛇紋番号 = バフ番号取得_枠("蛇紋", キャラ隊列検索(GETCHARA(417)))
		
		IF DT_CELL_GET("戦闘効果データベース", 蛇紋番号, "効果量_固定値") == 5
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 不休活期
			アビ汎用文字列:バフ・デバフ対象能力 = 不休活期
			アビ汎用変数:持続ターン = 12
			アビ汎用変数:消去不可オプション = 1
			アビ汎用変数:特殊表示オプション = 1
			CALL アビテンプレート_有利効果_バフ効果セット

			CALL アビ汎用変数文字列リセット
			アビ汎用文字列:バフ・デバフ枠 = 不休活期_弱体無効
			アビ汎用文字列:バフ・デバフ対象能力 = 弱体無効
			CALL アビテンプレート_有利効果_付随バフ効果セット("不休活期")
			
			CALL アビ汎用変数文字列リセット
			アビ汎用変数:消去不可バフデバフ削除オプション = 1
			CALL アビテンプレート_不利効果_バフ消去("蛇紋")
		ELSE
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = 蛇紋
			アビ汎用文字列:バフ・デバフ対象能力 = 蛇紋
			アビ汎用変数:効果量 = 1
			アビ汎用変数:累積上限_固定値 = 5
			アビ汎用変数:持続ターン = -1
			アビ汎用変数:消去不可オプション = 1
			アビ汎用変数:特殊表示オプション = 1
			CALL アビテンプレート_有利効果_累積バフ効果セット
		ENDIF
		
		戦闘中カウント:戦闘行動キャラ:0 = 1
		戦闘中カウント:戦闘行動キャラ:1 = 1
ENDSELECT



@バフ・デバフ特殊表示_蛇紋(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
VARSET LOCALS

PRINTFORML 蛇紋
PRINTFORML Lvが5の時、奥義発動時にLvを全て消費して自身に不休活期効果を付与する状態［最大Lv5/消去不可］
PRINTFORML Lv：{DT_CELL_GET("戦闘効果データベース", バフ・デバフ行数, "効果量_固定値")}　　　　　持続ターン：永続

