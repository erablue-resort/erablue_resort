
@固有アビ_191_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

;スタイル判定関数を呼び出す
;スタイル変更が無い場合はここは何も触らなくて良い
IF スタイル判定関数(キャラ番号, "デフォルト") == 0
	アビ名 = 
	RETURN 0
ENDIF

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 45
	アビ名 = ローストⅡ＋
	効果数値 = 200
	消費ＭＰ = 50
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
	アビ名 = ローストⅡ
	効果数値 = 200
	消費ＭＰ = 60
ELSE
	アビ名 = チャームファイア
	効果数値 = 140
	消費ＭＰ = 45
ENDIF

;初期状態で習得しない場合は以下のようにする
; IF 基礎BATTLE_STATE:キャラ番号:Lv >= 習得するレベル
; 	アビ名 = （任意のアビリティの名前）
; 	消費ＭＰ = （消費するMPの数値）
; ELSE
; 	アビ名 = 
; ENDIF


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に［攻撃力✕{効果数値}％］の火属性ダメージを与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			詳細文文字列受け渡し変数 += @"<br>［累積50最大500］（通常枠・5ターン）の火傷効果を与える。成功率100％。"
			詳細文文字列受け渡し変数 += @"<br>［1］のスロウ効果を与える。成功率100％。"
		ELSE
			詳細文文字列受け渡し変数 += @"<br>［25％］（通常枠・5ターン）の魅了効果を与える。成功率90％。"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵全体
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_火属性
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			アビ汎用文字列:バフ・デバフ枠 = 火傷
			アビ汎用文字列:バフ・デバフ対象能力 = 火傷
			アビ汎用変数:効果量 = 50
			アビ汎用変数:累積上限_固定値 = 500
			アビ汎用変数:持続ターン = 5
			アビ汎用変数:基礎成功確率 = 100
			CALL アビテンプレート_不利効果_累積デバフ効果セット
			
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_敵全体_生者のみ
			アビ汎用変数:効果量 = 1
			アビ汎用変数:基礎成功確率 = 100
			CALL アビテンプレート_不利効果_スロウ
		ELSE
			CALL アビ汎用変数文字列リセット
			アビ汎用変数:効果割合 = 25
			アビ汎用文字列:バフ・デバフ枠 = 魅了
			アビ汎用文字列:バフ・デバフ対象能力 = 魅了
			アビ汎用変数:持続ターン = 5
			アビ汎用変数:基礎成功確率 = 90
			CALL アビテンプレート_不利効果_デバフ効果セット
		ENDIF
ENDSELECT



@固有アビ_191_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

;スタイル判定関数を呼び出す
;スタイル変更が無い場合はここは何も触らなくて良い
IF スタイル判定関数(キャラ番号, "デフォルト") == 0
	アビ名 = 
	RETURN 0
ENDIF

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 45
	アビ名 = ブラックファイアⅡ＋
	効果数値 = 275
	消費ＭＰ = 70
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
	アビ名 = ブラックファイアⅡ
	効果数値 = 275
	消費ＭＰ = 80
ELSE
	アビ名 = ブラックファイア
	効果数値 = 200
	消費ＭＰ = 60
ENDIF

;初期状態で習得しない場合は以下のようにする
; IF 基礎BATTLE_STATE:キャラ番号:Lv >= 習得するレベル
; 	アビ名 = （任意のアビリティの名前）
; 	消費ＭＰ = （消費するMPの数値）
; ELSE
; 	アビ名 = 
; ENDIF


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に［攻撃力✕{効果数値}％］の火属性ダメージを与える。
		詳細文文字列受け渡し変数 += @"<br>［30％］（通常枠・5ターン）の暗闇効果を与える。成功率90％。"
		SIF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			詳細文文字列受け渡し変数 += @"<br>［25％］（通常枠・5ターン）の魅了効果を与える。成功率90％。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵全体
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_火属性
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:効果割合 = 30
		アビ汎用文字列:バフ・デバフ枠 = 暗闇
		アビ汎用文字列:バフ・デバフ対象能力 = 暗闇
		アビ汎用変数:持続ターン = 5
		アビ汎用変数:基礎成功確率 = 90
		CALL アビテンプレート_不利効果_デバフ効果セット
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_敵全体_生者のみ
			アビ汎用変数:効果割合 = 25
			アビ汎用文字列:バフ・デバフ枠 = 魅了
			アビ汎用文字列:バフ・デバフ対象能力 = 魅了
			アビ汎用変数:持続ターン = 5
			アビ汎用変数:基礎成功確率 = 90
			CALL アビテンプレート_不利効果_デバフ効果セット
		ENDIF
ENDSELECT



@固有アビ_191_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 効果回数
#DIM 対象番号
#DIM 数値保存

;スタイル判定関数を呼び出す
;スタイル変更が無い場合はここは何も触らなくて良い
IF スタイル判定関数(キャラ番号, "デフォルト") == 0
	アビ名 = 
	RETURN 0
ENDIF

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 70
	アビ名 = アンプリファー
	効果数値 = 66
	効果回数 = 10
	消費ＭＰ = 160
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 45
	アビ名 = アンプリファー＋
	効果数値 = 50
	効果回数 = 10
	消費ＭＰ = 160
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
	アビ名 = アンプリファー
	効果数値 = 40
	効果回数 = 10
	消費ＭＰ = 80
ELSE
	アビ名 = ロースト
	効果数値 = 100
	効果回数 = 3
	消費ＭＰ = 20
ENDIF

;初期状態で習得しない場合は以下のようにする
; IF 基礎BATTLE_STATE:キャラ番号:Lv >= 習得するレベル
; 	アビ名 = （任意のアビリティの名前）
; 	消費ＭＰ = （消費するMPの数値）
; ELSE
; 	アビ名 = 
; ENDIF


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>ランダムな敵に［攻撃力✕{効果数値}％］の火属性ダメージを{効果回数}回与える。
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			詳細文文字列受け渡し変数 += @"<br>攻撃前に自身へ［50％］（1ターン）の攻撃力上昇効果を与える。"
			詳細文文字列受け渡し変数 += @"<br>また、敵に付与されているデバフの種類数に応じて攻撃回数が増加する。"
			詳細文文字列受け渡し変数 += @"<br>（1種のデバフにつき1回追加し、最大で+10回まで増加する。）"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			CALL アビ対象選択テンプレート_自己のみ
			アビ汎用文字列:バフ・デバフ枠 = アンプリファー_攻撃力
			アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
			アビ汎用変数:効果割合 = 100
			アビ汎用変数:持続ターン = 1
			CALL アビテンプレート_有利効果_バフ効果セット
		
			CALL アビ汎用変数文字列リセット
			FOR 対象番号, 10, 20
				SIF 敵BATTLE_STATE_STR:(対象番号 - 10):エネミー名 == ""
					CONTINUE
				SIF 敵BATTLE_STATE:(対象番号 - 10):ＨＰ < 1
					CONTINUE
				数値保存 = 弱体数算出(対象番号)
				IF 数値保存 > 効果回数
					効果回数 = 数値保存
					SIF 効果回数 > 10
						効果回数 = 10
				ENDIF
			NEXT
		ENDIF
		
		FOR LOCAL, 0, 10 + 効果回数
			CALL アビ対象選択テンプレート_敵ランダムＸ体(1)
			アビ汎用変数:効果割合 = 100
			CALL アビテンプレート_ダメージ処理_火属性
		NEXT
ENDSELECT



;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_191(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;基本的にWAIT系列は使わないことを推奨

KSTR:(K++) = □ 特性 □-------------------------------------------------------------------------------
KSTR:(K++) = 　
KSTR:(K++) = 　
KSTR:(K++) = 　
KSTR:(K++) = 　

CALL 口上変数表示(対象キャラ, 1)
