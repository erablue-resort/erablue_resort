
@固有アビ_1245_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 玉犬『渾』＋
	効果数値 = 250
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
	アビ名 = 玉犬『渾』
	効果数値 = 220
ELSE
	アビ名 = 玉犬
	効果数値 = 180
ENDIF
	消費ＭＰ = 40


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>影を媒介に犬の式神
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
			詳細文文字列受け渡し変数 += @"玉犬『渾』を召喚する[3ターン/式神枠]"
		ELSE
			詳細文文字列受け渡し変数 += @"玉犬を召喚する。[3ターン/式神枠]"
		ENDIF
		詳細文文字列受け渡し変数 += @"<br>そのまま敵を攻撃させ{効果数値}％の自属性ダメージ"
		
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 式神
		アビ汎用変数:持続ターン = 3
		アビ汎用文字列:バフ・デバフ対象能力 = 追撃
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
			アビ汎用変数:効果割合 = 80
		ELSE
			アビ汎用変数:効果割合 = 50
		ENDIF
		CALL アビテンプレート_有利効果_バフ効果セット
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_自属性
		
		
ENDSELECT


@固有アビ_1245_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = 鵺+
	効果数値 = 230
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 4
	アビ名 = 鵺
	効果数値 = 200
ENDIF
	消費ＭＰ = 75


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>影を媒介に式神鵺を召喚する。[3ターン/式神枠]
		詳細文文字列受け渡し変数 += @"<br>そのまま敵を攻撃させ{効果数値}％の風属性ダメージを与える。"
		詳細文文字列受け渡し変数 += @"<br>更に確率で麻痺させる[2ターン/60％]"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 式神
		アビ汎用変数:持続ターン = 3
		アビ汎用文字列:バフ・デバフ対象能力 = 鵺
	
		CALL アビテンプレート_有利効果_バフ効果セット
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_風属性
		
		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ対象能力 = 麻痺
		アビ汎用文字列:バフ・デバフ枠 = 鵺_麻痺
		アビ汎用変数:基礎成功確率 = 60
		アビ汎用変数:効果割合 = 80
		アビ汎用変数:持続ターン = 2
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		
ENDSELECT


@固有アビ_1245_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 領域判定
#DIM 領域残りターン

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
領域判定 = バフ番号取得_枠("領域展開『嵌合暗影庭』", キャラ番号)

IF 領域判定 > -1
	アビ名 = 影分身
	効果数値 = 0
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 脱兎+
	効果数値 = 30
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 8
	アビ名 = 脱兎
	効果数値 = 20
ENDIF
	消費ＭＰ = 30


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		IF 領域判定 > -1
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>領域展開中の術式効果の向上により、影で分身を作成する[影分身枠]
			詳細文文字列受け渡し変数 += @"<br>回避率100％上昇に加えて、分身が追撃するが、領域と共に分身は消滅する"
			詳細文文字列受け渡し変数 += @"<br>このアビリティは行動回数を消費しない"
		ELSE
			詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>影を媒介に兎の式神脱兎を召喚する。[3ターン/式神枠]
			詳細文文字列受け渡し変数 += @"<br>そのまま敵全体を攻撃させ{効果数値}％の自属性ダメージを与える"
		ENDIF
		RETURN 消費ＭＰ
	CASE "アビ効果"
	
		CALL アビ対象選択テンプレート_自己のみ

		アビ汎用文字列:バフ・デバフ対象能力 = 回避率
		
		IF 領域判定 > -1
			領域残りターン = DT_CELL_GET(@"バフデータベース_{キャラ番号}", 領域判定, "持続ターン")
			
			アビ汎用変数:持続ターン = 領域残りターン
			アビ汎用文字列:バフ・デバフ枠 = 影分身_回避率
			アビ汎用変数:効果割合 = 100
		ELSE
			アビ汎用変数:持続ターン = 3
			アビ汎用文字列:バフ・デバフ枠 = 式神
			アビ汎用変数:効果割合 = 80
		ENDIF
		
		CALL アビテンプレート_有利効果_バフ効果セット
		
		CALL アビ汎用変数文字列リセット
		IF 領域判定 > -1
			アビ汎用文字列:バフ・デバフ対象能力 = 追撃
			アビ汎用変数:持続ターン = 2
			アビ汎用文字列:バフ・デバフ枠 = 影分身_追撃
			アビ汎用変数:効果割合 = 100
			CALL アビテンプレート_有利効果_バフ効果セット
			
			アビテンプレート用_行動消費無しフラグ = 1
		ELSE
			CALL アビ対象選択テンプレート_敵全体_生者のみ
			アビ汎用変数:効果割合 = 効果数値
			CALL アビテンプレート_ダメージ処理_自属性
		ENDIF
		
ENDSELECT


@固有アビ_1245_4(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 万象+
	効果数値 = 250
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
	アビ名 = 万象
	効果数値 = 210
ENDIF
	消費ＭＰ = 100


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>影を媒介に象の式神万象を召喚する。[3ターン/式神枠]
		詳細文文字列受け渡し変数 += @"<br>そのまま敵全体を攻撃させ{効果数値}％の水属性ダメージを与える"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = 式神
		アビ汎用変数:持続ターン = 3
		アビ汎用文字列:バフ・デバフ対象能力 = 万象
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_ダメージ処理_水属性
		
		
ENDSELECT




@固有通常攻撃後処理_バフ_鵺(バフ・デバフ行数, 全滅フラグ, 連撃数)
#DIM 連撃数
#DIM 全滅フラグ
#DIM バフ・デバフ行数
#DIM 威力値
#DIM キャラ番号

	SIF 全滅フラグ
		RETURN 0

	IF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
		威力値 = 75
	ELSE
		威力値 = 65
	ENDIF
	
	
	アビテンプレート用_アビ名 = 電撃（鵺）
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_敵単体
	アビ汎用変数:効果割合 = 威力値
	CALL アビテンプレート_ダメージ処理_風属性

	CALL アビ汎用変数文字列リセット
	アビ汎用文字列:バフ・デバフ対象能力 = 麻痺
	アビ汎用文字列:バフ・デバフ枠 = 鵺_麻痺
	アビ汎用変数:基礎成功確率 = 60
	アビ汎用変数:効果割合 = 80
	アビ汎用変数:持続ターン = 2
	CALL アビテンプレート_不利効果_デバフ効果セット


@固有通常攻撃後処理_バフ_万象(バフ・デバフ行数, 全滅フラグ, 連撃数)
#DIM 連撃数
#DIM 全滅フラグ
#DIM バフ・デバフ行数
#DIM 威力値
#DIM キャラ番号

	SIF 全滅フラグ
		RETURN 0

	IF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
		威力値 = 90
	ELSE
		威力値 = 80
	ENDIF
	
	
	アビテンプレート用_アビ名 = 放水撃
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_敵全体
	アビ汎用変数:効果割合 = 威力値
	CALL アビテンプレート_ダメージ処理_水属性



;----------------------------------------------------------------------------------
;アビリティテンプレート例
;----------------------------------------------------------------------------------
;敵単体に、攻撃力の200%威力で火属性のダメージを与える効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_敵単体
	; アビ汎用変数:効果割合 = 200
	; CALL アビテンプレート_ダメージ処理_火属性

;----------------------------------------------------------------------------------
;戦闘不能ではない敵全体に、防御力の300%威力で自属性のダメージを与える効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_敵全体_生者のみ
	; アビ汎用変数:効果割合 = 300
	; アビ汎用文字列:攻撃側使用能力値 = 防御力
	; CALL アビテンプレート_ダメージ処理_自属性

;----------------------------------------------------------------------------------
;戦闘不能ではない味方全体に、3ターン持続する30%の攻撃力UPを与える効果
;----------------------------------------------------------------------------------
	; CALL アビ対象選択テンプレート_味方全体_生者のみ
	; アビ汎用変数:効果割合 = 30
	; アビ汎用文字列:バフ・デバフ枠 = 攻撃力A
	; アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
	; アビ汎用変数:持続ターン = 3
	; CALL アビテンプレート_有利効果_バフ効果セット

;----------------------------------------------------------------------------------
;敵縦列に、3ターン持続する暗闇（攻撃失敗率40%）を与える効果　基礎成功率70％
;----------------------------------------------------------------------------------
	; CALL アビ対象選択テンプレート_敵縦列
	; アビ汎用変数:効果割合 = 40
	; アビ汎用文字列:バフ・デバフ枠 = 暗闇
	; アビ汎用文字列:バフ・デバフ対象能力 = 暗闇
	; アビ汎用変数:持続ターン = 3
	; アビ汎用変数:基礎成功確率 = 70
	; CALL アビテンプレート_不利効果_デバフ効果セット

;----------------------------------------------------------------------------------
;戦闘不能状態の味方単体を蘇生し、回復力の100%威力でHPを回復する効果
;----------------------------------------------------------------------------------	
	; CALL アビ対象選択テンプレート_味方単体_死者のみ
	; アビ汎用変数:効果割合 = 100
	; アビ汎用変数:蘇生可能オプション = 1
	; CALL アビテンプレート_回復処理


;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
; @口上_ステータス画面_固有特性解説_XXXX(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化

; ;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
; ;基本的にWAIT系列は使わないことを推奨

; KSTR:(K++) = □ 特性 □-------------------------------------------------------------------------------
; KSTR:(K++) = 　
; KSTR:(K++) = 　
; KSTR:(K++) = 　
; KSTR:(K++) = 　

; CALL 口上変数表示(対象キャラ, 1)
