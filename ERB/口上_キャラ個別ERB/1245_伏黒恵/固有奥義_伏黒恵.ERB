
@固有奥義_1245(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名

;レベル30で嵌合暗影庭になる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
	奥義名 = 領域展開『嵌合暗影庭』
	奥義威力 = 0
ELSE
	奥義名 = 式神乱舞
	奥義威力 = 400
ENDIF

;奥義威力を0にした場合、通常の奥義処理は行われず奥義追加効果のみが行われる。
;全体攻撃にしたい時や、攻撃しない奥義を作る場合は0に設定のこと


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰を攻撃しますか？」と表示される。
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、奥義使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の奥義：（奥義名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			詳細文文字列受け渡し変数 = 奥義威力：{300}％<br>不完全ながら領域を展開し、自身の能力向上[3ターン/領域枠]"
			詳細文文字列受け渡し変数 += @"<br>その後、召喚した式神の攻撃により敵全体に自属性ダメージ"
			詳細文文字列受け渡し変数 += @"<br>更にランダムで追加効果"
		ELSE
			詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>召喚可能な限りの式神で一斉に攻撃
			詳細文文字列受け渡し変数 += @"<br>既に調伏をしている式神次第で、ランダムで追加効果"
		ENDIF
		RETURN 奥義威力
	CASE "奥義前効果"
		;対象決定の後、ダメージよりも前に発生する効果。基本の奥義ダメージ部分は記載する必要はない。
		;奥義威力が0だとここの部分もスキップされる

		;処理の都合上、ここから奥義ダメージまでにリセットを噛ませてないため
		;必要な場合を除きここでリセット
		CALL アビ汎用変数文字列リセット
	CASE "奥義追加効果"
		
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 30
			アビ汎用変数:持続ターン = 3
			アビ汎用変数:効果割合 = 20
			アビ汎用変数:消去不可オプション = 1
			アビ汎用文字列:バフ・デバフ枠 = 領域_攻撃力
			アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
			CALL アビテンプレート_有利効果_バフ効果セット
			
			アビ汎用文字列:バフ・デバフ枠 = 領域_防御力
			アビ汎用文字列:バフ・デバフ対象能力 = 防御力
			CALL アビテンプレート_有利効果_バフ効果セット
			
			アビ汎用文字列:バフ・デバフ枠 = 領域_行動速度
			アビ汎用文字列:バフ・デバフ対象能力 = 行動速度
			CALL アビテンプレート_有利効果_バフ効果セット
			
			アビ汎用文字列:バフ・デバフ枠 = 領域_命中率
			アビ汎用文字列:バフ・デバフ対象能力 = 命中率
			CALL アビテンプレート_有利効果_バフ効果セット
			
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_敵全体_生者のみ
			アビ汎用文字列:ダメージ種類 = 奥義ダメージ
			アビ汎用変数:効果割合 = 300
			CALL アビテンプレート_ダメージ処理_自属性
			
		ENDIF
		
		IF 基礎BATTLE_STATE:キャラ番号:Lv >= 12 && RAND:2 == 0
			CALL アビ汎用変数文字列リセット
			CALL アビ対象選択テンプレート_敵全体_生者のみ
			アビ汎用変数:効果割合 = 50
			CALL アビテンプレート_ダメージ処理_水属性
		ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 4 && RAND:2 == 0
			CALL アビ汎用変数文字列リセット
			アビ汎用文字列:バフ・デバフ対象能力 = 麻痺
			アビ汎用文字列:バフ・デバフ枠 = 鵺_麻痺
			アビ汎用変数:基礎成功確率 = 60
			アビ汎用変数:効果割合 = 80
			アビ汎用変数:持続ターン = 2
			CALL アビテンプレート_不利効果_デバフ効果セット
		ENDIF
		
ENDSELECT
