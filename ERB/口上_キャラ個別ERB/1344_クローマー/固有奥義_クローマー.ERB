
@固有奥義_1344(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名
#DIM 表示用奥義威力
#DIM 威力
#DIM 対象キャラ
#DIM ループ用

;スタイルによる奥義の変更部分、スタイル変化_キャラ名.ERBを参照
; IF CSTR:キャラ番号:スタイル管理文字列 == "任意のスタイル名"
; 	CALL 任意のスタイル名固有奥義(ARGS, キャラ番号)
; 	RETURN RESULT
; ENDIF

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 40
	奥義名 = 浄化＋＋
	奥義威力 = 0
	表示用奥義威力 = 640
	威力 = 160
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	奥義名 = 浄化＋
	奥義威力 = 0
	表示用奥義威力 = 560
	威力 = 140
ELSE
	奥義名 = 浄化
	奥義威力 = 0
	表示用奥義威力 = 480
	威力 = 120
ENDIF

;奥義威力を0にした場合、通常の奥義処理は行われず奥義追加効果のみが行われる。
;全体攻撃にしたい時や、攻撃しない奥義を作る場合は0に設定のこと


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰を攻撃しますか？」と表示される。
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、奥義使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の奥義：（奥義名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		詳細文文字列受け渡し変数 = 奥義威力：{表示用奥義威力}％
		詳細文文字列受け渡し変数 += @"<br>敵単体に［攻撃力✕{威力}％］のダメージを4回与えながら、相手に「釘」を3付与［上限15本］"
		詳細文文字列受け渡し変数 += @"<br>攻撃対象の現在HPが3分の1以下の場合、一撃当たりの［威力＋20％］。"
		詳細文文字列受け渡し変数 += @"<br>その後攻撃対象に釘が5本以上付与されている場合、"
		詳細文文字列受け渡し変数 += @"<br>釘を5本消費し［100％］（通常枠・2ターン）の麻痺効果を与える。"
		RETURN 奥義威力
	CASE "奥義前効果"
		;対象決定の後、ダメージよりも前に発生する効果。基本の奥義ダメージ部分は記載する必要はない。
		;奥義威力が0だとここの部分もスキップされる

		;処理の都合上、ここから奥義ダメージまでにリセットを噛ませてないため
		;必要な場合を除きここでリセット
		CALL アビ汎用変数文字列リセット
	CASE "奥義追加効果"
		IF 奥義名 == "浄化"
			CALL アビ対象選択テンプレート_敵単体
			アビ汎用文字列:バフ・デバフ対象能力 = 釘
			アビ汎用変数:累積上限_固定値 = 15
			CALL アビテンプレート_刻印追加(3)

			CALL アビ汎用変数文字列リセット
			アビ汎用文字列:ダメージ種類 = 奥義ダメージ
			アビ汎用変数:効果割合 = 威力
			
			;敵ＨＰが3分の1以下の場合、威力+20
			SIF 敵BATTLE_STATE:(アビテンプレート用_対象保存:0 - 10):ＨＰ < 敵BATTLE_STATE:(アビテンプレート用_対象保存:0 - 10):最大ＨＰ / 3
				アビ汎用変数:効果割合 += 20
			
			FOR ループ用, 0, 4
				CALL アビテンプレート_ダメージ処理_自属性
			NEXT
			
			IF 刻印現在数確認("釘", 対象キャラ) >= 5
				CALL アビ汎用変数文字列リセット
				アビ汎用文字列:バフ・デバフ枠 = 麻痺
				アビ汎用文字列:バフ・デバフ対象能力 = 麻痺
				アビ汎用変数:効果割合 = 100
				アビ汎用変数:持続ターン = 2
				アビ汎用変数:基礎成功確率 = 100
				CALL アビテンプレート_不利効果_デバフ効果セット
				
				CALL アビ汎用変数文字列リセット
				アビ汎用文字列:バフ・デバフ対象能力 = 釘
				CALL アビテンプレート_刻印減少(5)
			ENDIF
		ENDIF
ENDSELECT
