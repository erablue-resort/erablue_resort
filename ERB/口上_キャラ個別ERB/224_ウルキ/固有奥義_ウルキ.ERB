
@固有奥義_224(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 奥義威力
#DIMS 奥義名

; IF レベルやイベント完了などで強化される場合、奥義名や奥義威力などを分岐させる
; 	奥義名 = （任意の奥義名）
; 	奥義威力 = （任意の奥義威力数値。汎用奥義は300、固有奥義は400～500を基準とする）
; ELSE
	奥義名 = 虚宿
	奥義威力 = 450
; ENDIF

;奥義威力を0にした場合、通常の奥義処理は行われず奥義追加効果のみが行われる。
;全体攻撃にしたい時や、攻撃しない奥義を作る場合は0に設定のこと

SELECTCASE ARGS
	CASE "奥義名"
		TSTR:コマンド名受渡 = %奥義名%
	CASE "奥義説明文"
		詳細文文字列受け渡し変数 = 奥義威力：{奥義威力}％<br>対象の氷結Lvが1上昇［最大Lv10/5ターン/回復不可］
		詳細文文字列受け渡し変数 += @"<br>自身にダメージ［75％］カット効果［1ターン］"
		詳細文文字列受け渡し変数 += @"<br>◆氷結Lv7以上の敵がいる時、次の氷柱槌がMPと行動回数を消費しない"
		RETURN 奥義威力
	CASE "奥義前効果"
		;対象決定の後、ダメージよりも前に発生する効果。基本の奥義ダメージ部分は記載する必要はない。
		;奥義威力が0だとここの部分もスキップされる
	CASE "奥義追加効果"
		;ここに奥義効果を記述する。基本の奥義ダメージ部分は記載する必要はない。
		;基本的にアビテンプレートの関数を使用すること
		;テンプレート使用の例は固有アビリティ_キャラ名.ERBに記載
		
		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 氷結
		アビ汎用文字列:バフ・デバフ対象能力 = 氷結
		アビ汎用変数:効果量 = 50
		アビ汎用変数:累積上限_固定値 = 500
		アビ汎用変数:持続ターン = 5
		アビ汎用変数:消去不可オプション = 1
		アビ汎用変数:特殊表示オプション = 1
		CALL アビテンプレート_不利効果_累積デバフ効果セット
		
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ枠 = ダメージカット
		アビ汎用文字列:バフ・デバフ対象能力 = 被ダメージ
		アビ汎用変数:効果割合 = 75
		アビ汎用変数:持続ターン = 1
		CALL アビテンプレート_有利効果_バフ効果セット
		
		FOR LOCAL, 10, 20
			SIF 敵BATTLE_STATE:(LOCAL - 10):ＨＰ < 1
				CONTINUE
			
			IF DT_CELL_GET("戦闘効果データベース", デバフ番号取得_枠("氷結", LOCAL), "効果量_固定値") / 50 > 6
				戦闘中カウント:戦闘行動キャラ:0 = 1
				アビテンプレート用_表示メッセージ格納:戦闘行動キャラ:(A_M_NUM:戦闘行動キャラ++) = 次の氷柱槌がMPと行動回数を消費しなくなった！
				BREAK
			ENDIF
		NEXT
ENDSELECT
