
@固有アビ_2478_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 星の籠（大）＋＋
	効果数値 = 20
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 8
	アビ名 = 星の籠（大）＋
	効果数値 = 15
ELSE
	アビ名 = 星の籠（大）
	効果数値 = 10
ENDIF
	消費ＭＰ = 60


;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
SELECTCASE RAND:3
	CASE 0
		アビ汎用文字列:実行時メッセージ１ = 「まずは一杯、どうでちか？」
	CASE 1
		アビ汎用文字列:実行時メッセージ１ = 「どちらの葛籠がお好みでちか？」
	CASEELSE
		アビ汎用文字列:実行時メッセージ１ = 「お土産はこちらでち！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵全体に[{効果数値}％]（独自枠・3ターン）の防御力・クリティカル率減少効果を
		詳細文文字列受け渡し変数 += @"<br>付与し、更に恐怖効果を与える（独自枠・1ターン）"
		詳細文文字列受け渡し変数 += @"<br>その後、敵全体のＨＰを[回復力×30％]回復する（デメリット）"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:持続ターン = 3
		
		アビ汎用文字列:バフ・デバフ枠 = 星の籠（大）_防御力
		アビ汎用文字列:バフ・デバフ対象能力 = 防御力
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		アビ汎用文字列:バフ・デバフ枠 = 星の籠（大）_クリティカル率
		アビ汎用文字列:バフ・デバフ対象能力 = クリティカル率
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		CALL アビ汎用変数文字列リセット
		アビ汎用変数:持続ターン = 1
		アビ汎用文字列:バフ・デバフ枠 = 星の籠（大）_恐怖
		アビ汎用文字列:バフ・デバフ対象能力 = 恐怖
		CALL アビテンプレート_不利効果_デバフ効果セット
		
		CALL アビ汎用変数文字列リセット
		アビ汎用変数:効果割合 = 30
		CALL アビテンプレート_回復処理_MAXでも回復
		
ENDSELECT


@固有アビ_2478_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値


;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 24
	アビ名 = 星の籠（小）＋＋
	効果数値 = 20
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 12
	アビ名 = 星の籠（小）＋
	効果数値 = 15
ELSE
	アビ名 = 星の籠（小）
	効果数値 = 10
ENDIF

消費ＭＰ = 60

SELECTCASE RAND:3
	CASE 0
		アビ汎用文字列:実行時メッセージ１ = 「まずは一杯、どうでちか？」
	CASE 1
		アビ汎用文字列:実行時メッセージ１ = 「どちらの葛籠がお好みでちか？」
	CASEELSE
		アビ汎用文字列:実行時メッセージ１ = 「お土産はこちらでち！」
ENDSELECT


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>味方全体に[{効果数値}％]（独自枠・3ターン）の攻撃力上昇効果。
		詳細文文字列受け渡し変数 += @"<br>及び[{効果数値}％]の奥義ゲージ上昇効果後に[回復力×50％]回復し"
		詳細文文字列受け渡し変数 += @"<br>敵全体を[回復力×30％]回復する（デメリット）"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方単体_生者のみ
		アビ汎用変数:持続ターン = 3
		
		アビ汎用文字列:バフ・デバフ枠 = 星の籠（小）_攻撃力
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_有利効果_バフ効果セット
		
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_有利効果_奥義ゲージUP
		
		CALL アビ汎用変数文字列リセット
		アビ汎用変数:効果割合 = 50
		CALL アビテンプレート_回復処理_MAXでも回復
		
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_敵全体_生者のみ
		アビ汎用変数:効果割合 = 30
		CALL アビテンプレート_回復処理_MAXでも回復
		
ENDSELECT


@固有アビ_2478_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM 隊列番号


;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 16
	アビ名 = まよいがの膳＋
	効果数値 = 40
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 4
	アビ名 = まよいがの膳
	効果数値 = 30
ENDIF

消費ＭＰ = 50

;スキル使用時に記録したターン数と比較して、CTが過ぎているか確認
SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:0 != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:0 + 2)
	アビテンプレート用_アビ封印用フラグ = 1

;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>自身に[100％]の被ダメージ減少効果（独自枠・1ターン）
		詳細文文字列受け渡し変数 += @"<br>[{効果数値}％]のクリティカルダメージ率上昇効果（独自枠・3ターン）"
		詳細文文字列受け渡し変数 += @"<br>更に[20％]の奥義ゲージ上昇効果。使用後3ターン使用不能。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:持続ターン = 1
		
		アビ汎用文字列:バフ・デバフ枠 = まよいがの膳_被ダメージ
		アビ汎用文字列:バフ・デバフ対象能力 = 被ダメージ
		アビ汎用変数:効果割合 = 100
		CALL アビテンプレート_有利効果_バフ効果セット
		
		アビ汎用変数:持続ターン = 3
		
		アビ汎用文字列:バフ・デバフ枠 = まよいがの膳_クリティカルダメージ率
		アビ汎用文字列:バフ・デバフ対象能力 = クリティカルダメージ率
		アビ汎用変数:効果割合 = 効果数値
		CALL アビテンプレート_有利効果_バフ効果セット
				
		アビ汎用変数:効果割合 = 20
		CALL アビテンプレート_有利効果_奥義ゲージUP
		
		;CTの設定の為のターン数の記録
		戦闘中カウント:隊列番号:0 = 現在ターン数
		
ENDSELECT


@固有アビ_2478_4(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 効果数値
#DIM ループ用

;レベルなどの条件でアビを強化する場合、アビ名の文字列を条件分岐で変化させる
IF 基礎BATTLE_STATE:キャラ番号:Lv >= 32
	アビ名 = 雀六輪＋
	効果数値 = 105
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 雀六輪
	効果数値 = 95
ENDIF

消費ＭＰ = 50


;下の４つの文字列に文章を入れると、対象選択時の文章を変化させることが出来る。
;これらを使わない場合は「誰に使用しますか？」と表示される。		
;アビ汎用文字列:選択時メッセージ１ = 
;アビ汎用文字列:選択時メッセージ２ = 
;アビ汎用文字列:選択時メッセージ３ = 
;アビ汎用文字列:選択時メッセージ４ = 

;下の４つの文字列に文章を入れると、アビ使用時の文章を変化させることが出来る。
;これらを使わない場合は「（キャラ名）の（アビ名）！」と表示される。
;アビ汎用文字列:実行時メッセージ１ = 
;アビ汎用文字列:実行時メッセージ２ = 
;アビ汎用文字列:実行時メッセージ３ = 
;アビ汎用文字列:実行時メッセージ４ = 


SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}<br>敵単体に[{効果数値}％]の自属性ダメージを6回与える。
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 効果数値
		FOR ループ用, 0, 6
			CALL アビテンプレート_ダメージ処理_自属性
		NEXT
ENDSELECT

;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_2478(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

;口上と同じ感覚で使う為に書式を統一しているが、ステータス画面で表示されるので
;基本的にWAIT系列は使わないことを推奨

KSTR:(K++) = □ 特性：『閻魔亭の幼女将』 □-------------------------------------------------------------------------------
KSTR:(K++) = 　奥義ゲージ上昇効率が少し高め。
KSTR:(K++) = 　クリティカル率が少し高め。
KSTR:(K++) = 　クリティカルダメージ率が少し高め。
KSTR:(K++) = 　

CALL 口上変数表示(対象キャラ, 1)
