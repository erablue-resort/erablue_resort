;;--------------------------------------------------
;;●パチュリー・ノーレッジ口上＠erablue_resort用
;;　――固有コマンド：精液を納品する
;;--------------------------------------------------
;
;;--------------------------------------------------
;;●ライセンス/更新履歴/概要/使用フラグ
;;--------------------------------------------------
;;　いずれもパチュリー口上_readme.txt記載に従う
;;--------------------------------------------------
;
;;--------------------------------------------------
;;〇固有コマンド：精液を提供する
;;--------------------------------------------------
;;キャライベント「パッチェさんの魔力集め」を閲覧していると開放
;;以後、日常シーンで、精液を提供できるようになる
;;性処理業務めいたコマンドである
;;--------------------------------------------------
;
;★通常は
;　「感覚遮断しておくから勝手に使って」で、口上は普通にする
;　終わったら「まだ使う？」で何度も何度も射精できる
;　信頼はむしろ下がるが、性愛が爆アガリする（下半身だけガクガクになるので）
;　
;　恋慕自覚以上？　あたりで、通常の押し倒すと同じになる（お願いして押し倒させてもらえる）
;
;
;
;;--------------------------------------------------
;;コマンド名を返す
;;--------------------------------------------------
;@CHARACOMNAME371_1147
;#FUNCTIONS
;	TSTR:コマンド名受渡 = 精液を提供する
;
;;--------------------------------------------------
;;コマンドタイプ
;;--------------------------------------------------
;@COMTYPE_371_1147
;#FUNCTION
;	;性処理業務は「日常」タイプのコマンド。
;	TFLAG:コマンドタイプ受渡 = COMTYPE("日常")
;
;;--------------------------------------------------
;;コマンドの説明文（ツールチップ）
;;--------------------------------------------------
;@COM_TOOLTIP_371_1147
;	LOCALS = <br>■精液を提供する
;	LOCALS += "<br>パチュリーからの依頼で、『精液を提供』するコマンド。"
;	LOCALS += "<br>パチュリー以外の同室者が全員陥落済みの時のみ可能だが、一緒に隠密時は同じ場所に非陥落キャラがいても可能。"
;	LOCALS += "<br>COMタイプ：日常"
;	LOCALS += "<br>取得ソース：なし"
;	LOCALS += "<br>固有の取得経験：なし<br>"
;	TSTR:ツールチップ受渡 = %LOCALS%
;
;;-------------------------------------------------
;;実行判定
;;-------------------------------------------------
;;精液提供のそれぞれに条件はあるが、ここでは全体に関わる条件を見る
;;「そもそも『精液提供するぜ！』って言える状態か」ってことだね
;;-------------------------------------------------
;@COM_ABLE371_1147
;#DIM パッチェさん番号
;
;	;通常モードでのみ可能
;	SIF SAVESTR:ゲームフェイズ管理 != "通常モード"
;		RETURN 0
;	;一括管理
;	SIF GLOBAL_COMABLE(371)
;		RETURN RESULT
;	;キャライベ１をクリアしていないとダメ
;	;（魔力集めを依頼されていないとダメ）
;	SIF イベント完了フラグ確認("パッチェさんの魔力集め") == 0
;		RETURN 0
;	;あなたにちんこがないならダメ
;	;（男性器がない、または、Cが存在しないならダメ）
;	SIF GETBIT(TALENT:PLAYER:性別, 1) == 0 || TALENT:PLAYER:Ｃ感度 == -2
;		RETURN 0
;	;飲み会時はだめ
;	SIF TFLAG:調教モード == 3
;		RETURN 0
;	;ハーヴィンオナホ中はだめ
;	SIF MODE_存在判定_プレイヤー側("ハーヴィンオナホ系", PLAYER)
;		RETURN 0
;	;全裸散歩中はだめ
;	SIF MODE_存在判定_プレイヤー側("全裸散歩", PLAYER)
;		RETURN 0
;
;	パッチェさん番号 = キャラ検索("[動かない大図書館]パチュリー")
;
;	;ターゲットはパッチェさんじゃないとダメ
;	SIF TARGET != パッチェさん番号
;		RETURN 0
;	;睡眠中……でもオッケーにしちゃおうか……！
;	;……って思ったがパターンわけが地獄になるので……そのうちね、そのうち。
;	SIF CFLAG:パッチェさん番号:睡眠
;		RETURN 0
;	;他人とデート中はダメ
;	SIF CFLAG:パッチェさん番号:デート && CFLAG:パッチェさん番号:デート != PLAYER + 100
;		RETURN 0
;
;	IF 0
;	;目撃スルーフィールドを発生させているならOK
;	ELSEIF フィールド展開:うふふ目撃スルー != 0
;	;隠密中は素通し
;	ELSEIF CFLAG:MASTER:隠密 && CFLAG:パッチェさん番号:隠密
;	;非隠密時には、同じ部屋にいる全員が陥落していなければならない
;	ELSE
;		FOR LOCAL,1,CHARANUM
;			;TARGET:0が今相手してるキャラ
;			;TARGET:1以後は「同室のキャラ」になるはず
;			SIF TARGET:LOCAL < 1
;				BREAK
;			;対象がパッチェさんならスルー
;			SIF TARGET:LOCAL == パッチェさん番号
;				CONTINUE
;			;同じ部屋にいる誰かが陥落していないならダメ
;			SIF 陥落チェック(TARGET:LOCAL) == 0
;				RETURN 0
;		NEXT
;	ENDIF
;
;	;ここまで来たらオッケー
;	RETURN 1
;
;
;;--------------------------------------------------
;;コマンド実行内容
;;--------------------------------------------------
;;ソースを追加したり経験を処理したり……だが、このコマンドでは特殊な処理を行う
;;--------------------------------------------------
;★陥落の有無で大きく効果が変更される。
;　その場でシコらされるケースと
;　いいなり状態で押し倒せるケース
;
;@CHARACOM371_1147
;{
;#DIMS CONST 選択先順番制御 = "オナニーする", 
;					 "オカズを要求しオナニーする", 
;					 "手コキしてもらう", 
;					 "フェラしてもらう", 
;					 "パイズリしてもらう", 
;					 "素股してもらう", 
;					 "膣を使わせてもらう", 
;					 "アナルを使わせてもらう", 
;					 "全身を無制限に使わせてもらう"
;}
;#DIM 選択先保存
;#DIMS DYNAMIC 精液提供選択肢, 100
;#DIM DYNAMIC 性処理数
;
;	DRAWLINE
;	PRINTFORML %CALLNAME:TARGET%にどうやって精液を提供しますか？
;	PRINTFORML  
;
;	;性処理から処理を流用
;	FOR LOCAL, 0, VARSIZE("選択先順番制御")
;		;LOCAL番の選択肢が実行可能かチェック
;		CALLFORM 固有1147_精液提供_ABLE_%選択先順番制御:LOCAL%
;		;ツールチップ表示はしない
;		IF 0
;		;返り値が-1ならグレーアウト
;		ELSEIF RESULT == -1
;			CALLFORMF 固有1147_精液提供_NAME_%選択先順番制御:LOCAL%
;			SETCOLOR カラーパレット("グレーアウト")
;			PRINTPLAINFORM [{LOCAL}] %TSTR:コマンド名受渡%
;			RESETCOLOR
;			PRINTL 
;		;返り値が1なら選択可能
;		ELSEIF RESULT == 1
;			CALLFORMF 固有1147_精液提供_NAME_%選択先順番制御:LOCAL%
;			PRINTBUTTON @"[{LOCAL}] %TSTR:コマンド名受渡%", LOCAL
;			PRINTL 
;		;返り値がゼロなら非表示
;		ELSE
;		ENDIF
;	NEXT
;
;	;いったん配列を初期化
;	VARSET RESULTS
;	VARSET 精液提供選択肢
;	;「固有1147_精液提供_ABLE_」から始まる関数の個数を取得
;	ENUMFUNCBEGINSWITH "固有1147_精液提供_ABLE_"
;	性処理数 = RESULT
;	ARRAYCOPY "RESULTS", "精液提供選択肢"
;
;	FOR LOCAL, 0, 性処理数
;		精液提供選択肢:LOCAL = %REPLACE(精液提供選択肢:LOCAL, "固有1147_精液提供_ABLE_", "")%
;		SIF MATCH(選択先順番制御, 精液提供選択肢:LOCAL)
;			CONTINUE
;		CALLFORM %RESULTS:LOCAL%
;		IF RESULT == -1
;			CALLFORMF 固有1147_精液提供_NAME_%精液提供選択肢:LOCAL%
;			SETCOLOR カラーパレット("グレーアウト")
;			PRINTPLAINFORM [{LOCAL + 100}] %TSTR:コマンド名受渡%
;			RESETCOLOR
;			PRINTL 
;		ELSEIF RESULT == 1
;			CALLFORMF 固有1147_精液提供_NAME_%精液提供選択肢:LOCAL%
;			PRINTBUTTON @"[{LOCAL + 100}] %TSTR:コマンド名受渡%", LOCAL + 100
;			PRINTL 
;		;返り値がゼロなら非表示
;		ELSE
;		ENDIF
;	NEXT
;
;	PRINTL
;	PRINTBUTTON "[999] 戻る", 999
;	PRINTL
;
;	;いんぷっと！
;	DRAWLINE
;	BINPUT
;
;	LOCAL = RESULT
;	SELECTCASE LOCAL
;		;戻るならマイナス１を返してコマンド実行前に戻る
;		CASE 999
;			RETURN -1
;		CASE IS < 100
;			;交渉は、そのまま実行しに行く可能性がある
;			CALL 固有1147_精液提供_交渉(TARGET, 選択先順番制御:LOCAL)
;			;やっぱりやめた！の場合はこの関数の頭に戻る
;			SIF RESULT == -1
;				RESTART
;		CASEELSE
;			CALL 固有1147_精液提供_交渉(TARGET, 精液提供選択肢:(LOCAL - 100))
;			;やっぱりやめた！の場合はこの関数の頭に戻る
;			SIF RESULT == -1
;				RESTART
;	ENDSELECT
;
;	RETURN 1
;
;
;;-------------------------------------------------
;;交渉……は、まあないんだけど。やるかどうか。
;;-------------------------------------------------
;@固有1147_精液提供_交渉(対象キャラ, 精液提供方法)
;#DIM 対象キャラ
;#DIMS 精液提供方法
;
;	PRINTFORML %精液提供方法%を%CALLNAME:対象キャラ%にお願いしますか？
;	PRINTBUTTON "[0] はい", 0
;	PRINTL
;	PRINTBUTTON "[1] いいえ", 1
;	PRINTL
;
;	BINPUT
;	SELECTCASE RESULT
;		CASE 0
;			;あとで使うので入れておく
;			RSTR:コマンド結果受渡し文字列 = %精液提供方法%
;			;この先でソースや経験が加算される
;			CALLFORM 固有1147_精液提供_実行_%精液提供方法%
;			RETURN RESULT
;		CASE 1
;			;マイナス１を返すと、「やっぱや～めた！」ってことで再度選択肢に戻るようにしてるよ
;			RETURN -1
;	ENDSELECT
;
;
;;-------------------------------------------------
;;実行時メッセージ
;;-------------------------------------------------
;;順番的には、「精液提供選択肢」→「交渉」→（ソースなど計算）→「実行時メッセージ」→「選択した提供方法の独自テキスト」になるはず。
;;ここでは、すべての提供方法で共通表示する事前テキストを表示な。
;;-------------------------------------------------
;@MESSAGE_COM371_1147
;#DIM 対象キャラ
;#DIMS 実行精液提供
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	実行精液提供 = RSTR:コマンド結果受渡し文字列
;
;	IF 0
;	;全身無制限＝単純に押し倒しである。
;	ELSEIF 実行精液提供 == "全身を無制限に使わせてもらう"
;		PRINTFORM %CALLNAME:PLAYER%は、%CALLNAME:対象キャラ%への『精液提供』（全身無制限使用許可・精液出し放題オプション付き
;		CALL PRINT_STR(@"_H_")
;		PRINTFORMW ）を開始した。
;	;隠密中
;	ELSEIF CFLAG:MASTER:隠密 && CFLAG:対象キャラ:隠密
;		PRINTFORMW %CALLNAME:PLAYER%は上手く物陰に隠れられていることを確認し、%CALLNAME:対象キャラ%への『精液提供』を開始した。
;	;他に誰かがいるが、目撃スルーフィールドを発生させている
;	ELSEIF GET_TARGETNUM() > 1 && フィールド展開:うふふ目撃スルー != 0
;		PRINTFORMW %CALLNAME:PLAYER%は、人目もはばからず、%CALLNAME:対象キャラ%への『精液提供』を開始した。
;	;他に誰かいる場合
;	;※条件的に、周囲のキャラは全員陥落している
;	ELSEIF GET_TARGETNUM() > 1 && フィールド展開:うふふ目撃スルー == 0
;		PRINTFORMW %CALLNAME:PLAYER%は、視線を浴びながら、%CALLNAME:対象キャラ%への『精液提供』を開始した。
;	;他に誰もいない
;	ELSE
;		PRINTFORMW %CALLNAME:PLAYER%は、%CALLNAME:対象キャラ%への『精液提供』を開始した。
;	ENDIF
;
;	;以下、固有メッセージ。
;	CALLFORM 固有1147_精液提供_MESSAGE_%実行精液提供%
;
;	;固有メッセージを出したあと、提供方法経験を保存
;	IF 0
;	ELSEIF 実行精液提供 == "オナニーする"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 0)
;	ELSEIF 実行精液提供 == "オカズを要求しオナニーする"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 1)
;	ELSEIF 実行精液提供 == "手コキしてもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 2)
;	ELSEIF 実行精液提供 == "フェラしてもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 3)
;	ELSEIF 実行精液提供 == "パイズリしてもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 4)
;	ELSEIF 実行精液提供 == "素股してもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 5)
;	ELSEIF 実行精液提供 == "膣を使わせてもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 6)
;	ELSEIF 実行精液提供 == "アナルを使わせてもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 7)
;	ELSEIF 実行精液提供 == "全身を無制限に使わせてもらう"
;		SETBIT (特定状況口上用フラグ:対象キャラ:36, 8)
;	ELSE
;		;ここにはこないはずだよ
;	ENDIF
;
;;-------------------------------------------------
;;非口上時メッセージ
;;-------------------------------------------------
;;これ通るんだろうか？
;;ともあれ、全部「固有1147_精液提供_MESSAGE_%実行精液提供%」で処理する。固有コマンドだしな！
;;-------------------------------------------------
;@MESSAGE_COM371_1147_非口上時
;	;なんもしない
;
;;;-------------------------------------------------
;;;射精回数
;;;-------------------------------------------------
;;;
;;;-------------------------------------------------
;;@固有1147_精液提供_射精回数
;;#FUNCTION
;;#DIM 対象キャラ
;;#DIMS 実行精液提供
;;#DIM 射精回数
;;
;;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;;	実行精液提供 = RSTR:コマンド結果受渡し文字列
;;	射精回数 = 0
;;
;;	RETURNF 射精回数
;
;;-------------------------------------------------
;;経過時間計算
;;-------------------------------------------------
;;性処理業務交渉からそのままチョバって来て多少コメント入れ
;;返り値をTIMEに加算することになるわよ
;;-------------------------------------------------
;@固有1147_精液提供_経過時間計算(行為回数)
;#FUNCTION
;#DIM CONST 減衰閾値 = 24
;#DIM 行為回数
;
;IF 行為回数 <= 減衰閾値
;	;一回５分×行為回数24回＝120分＝2時間までは行為回数に比例
;	RETURNF 行為回数 * 5
;ELSE
;	;以降は減衰
;	;LOG登場してるけど、高校数学さっぱり忘れてるなー……
;	;クッソ大雑把に言うと「値が小さいうちは上昇幅が大きく、大きくなると伸び率が減衰する」性質がある。
;	;　Log（2）＝0.3010...
;	;　Log（4）＝0.6020...
;	;　Log（8）＝0.9030...
;	;　Log（10）＝1
;	;　Log（50）＝1.6989...
;	;　Log（100）＝2
;	;……なので、行為回数が24回の時は120分だが、124回の時は、26回分で130分にしかならない。はず。
;	RETURNF (減衰閾値 + LOG(行為回数 - 減衰閾値)) * 5
;ENDIF
;
;
;
;;-------------------------------------------------
;;〇オナニーする関連
;;-------------------------------------------------
;;各関数の役目は以下の通り。他選択肢でも共通。
;;　NAME：名前を返す。
;;　ABLE：実行可能かを返す。※実行可能でも嫌がられるケースがある。注意。
;;　　　　返り値が０＝選択肢に非表示　１＝選択可能　-1＝選択肢に表示はするが選択不能
;;　実行：ソースや経験を加算
;;　MESSAGE：実行時のメッセージを表示
;;　提供経験記憶：「この方法で精液提供をしたことがあるか」を保存
;;-------------------------------------------------
;@固有1147_精液提供_NAME_オナニーする
;#FUNCTIONS
;	TSTR:コマンド名受渡 = オナニーする
;@固有1147_精液提供_ABLE_オナニーする
;	;無条件で許可。ただし、実行した結果嫌がられることもある
;	RETURN 1
;@固有1147_精液提供_実行_オナニーする
;#DIM 対象キャラ
;#DIM 射精回数
;#DIM 射精予定数
;#DIM 行為回数
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	;特にオカズもないオナニーなので１回固定
;	射精予定数 = 1
;
;	;回数の初期化
;	射精回数 = 0
;	行為回数 = 0
;	;射精予定回数まで繰り返し（１回は必ず実行な）
;	DO
;		;溜まった快楽Cと、増加する快楽Cが10000を越えるまでループ（１回は必ず実行な）
;		DO
;			;セルフ手コキからチョバってきた
;			;あんまり少なくてもなあ……という感じはしないでもないので、セルフ手コキの持続快楽の倍加算
;			CALL SOURCE_CALC_快Ｃ(PLAYER, -1, 200)
;			SIF TALENT:PLAYER:器用な指
;				CALL SOURCE_CALC_快Ｃ(PLAYER, -1, 100)
;			;ビミョーに不快が溜まる
;			CALL SOURCE_CALC_不潔(TARGET, PLAYER, 100)
;			行為回数++
;		LOOP CUP:PLAYER:快Ｃ + PALAM:PLAYER:快Ｃ < 10000
;
;		;射精回数をカウント
;		射精回数++
;	LOOP 射精回数 < 射精予定数
;
;	;「出してくれてありがとう」があるのでちょっとだけ上昇
;	;……いやでもまあまあキモいから相殺かなあ……でも、自分から「精液が欲しい」っていう女だしなあ……パッチェさん変人だしなあ……
;	CALL SOURCE_CALC_好感度要素_友情度UP(対象キャラ, PLAYER, 射精回数 * 30)
;	CALL SOURCE_CALC_好感度要素_性愛度UP(対象キャラ, PLAYER, 射精回数 * 10)
;
;	;精液経験を加算
;	EXP:対象キャラ:精液経験 += 射精回数
;
;	;射精回数を受け渡したいので独自フラグに持っておく
;	パチュリー_固有371_射精回数 = 射精回数
;	;精液提供量（射精回数）を口上用フラグに保存
;	特定状況口上用フラグ:対象キャラ:28 += 射精回数
;
;	;かかった行為回数分時間を加算
;	TIME += 経過時間算出(行為回数)
;
;@固有1147_精液提供_MESSAGE_オナニーする
;#DIM 対象キャラ
;#DIM 射精回数
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	射精回数 = パチュリー_固有371_射精回数
;
;	;精液提供を開始した。……から続く。
;	IF 0
;	;恋慕
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "恋慕")
;		PRINTFORML 男根をさらけ出し、オナニーする。
;		PRINTFORML %CALLNAME:対象キャラ%は、なんでわざわざ、と呟きながら、%CALLNAME:MASTER%を見ている……
;		PRINTFORML %CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;		PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;		PRINTFORML  
;		PRINTFORML 「……本当に、ひとりでするだけでよかったのかしら。
;		PRINTFORML 　手くらいなら貸せたんだけど……」
;		PRINTFORML  
;		PRINTFORML %CALLNAME%はちょっとため息をついた……
;	;恋慕自覚
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "恋慕自覚")
;		PRINTFORML 男根をさらけ出し、オナニーする。
;		PRINTFORML %CALLNAME:対象キャラ%は、若干困惑した顔で%CALLNAME:MASTER%を見ている……
;		PRINTFORML %CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;		PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;		PRINTFORML  
;		PRINTFORML 「見てたらいっぱい出るとかなのかしら。
;		PRINTFORML 　……なんていうか……早まったかしら……」
;		PRINTFORML  
;		PRINTFORML %CALLNAME%はちょっとため息をついた……
;	;セフレ
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "セフレ")
;		PRINTFORML 男根をさらけ出し、オナニーする。
;		PRINTFORML %CALLNAME:対象キャラ%は、若干困惑した顔で%CALLNAME:MASTER%を見ている……
;		PRINTFORML %CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;		PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;		PRINTFORML  
;		PRINTFORML 「ありがとう、また頼むわ。
;		PRINTFORML 　……頼んでくれれば、手くらいは貸すんだけど……そっちのほうが、たくさん出るんじゃないの？」
;		PRINTFORML  
;		PRINTFORML %CALLNAME%はちょっとため息をついた……
;	;その他
;	ELSE
;		PRINTFORML 男根をさらけ出し、オナニーする。
;		PRINTFORML %CALLNAME:対象キャラ%は、若干困惑した顔で%CALLNAME:MASTER%を見ている……
;		PRINTFORML %CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;		PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;		PRINTFORML  
;		PRINTFORML 「ありがとう、また頼むわ。
;		PRINTFORML 　……でも、なにを見せられたのかしら、%CSTR:一人称%……」
;		PRINTFORML  
;		PRINTFORML %CALLNAME%はちょっとため息をついた……
;	ENDIF
;
;
;;-------------------------------------------------
;;〇オカズを要求しオナニーする関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_オカズを要求しオナニーする
;#FUNCTIONS
;	TSTR:コマンド名受渡 = オカズを要求しオナニーする
;@固有1147_精液提供_ABLE_オカズを要求しオナニーする
;	;無条件で許可
;	RETURN 1
;@固有1147_精液提供_実行_オカズを要求しオナニーする
;#DIM 対象キャラ
;#DIM 射精回数
;#DIM 射精予定数
;#DIM 行為回数
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	;基礎は１回
;	射精予定数 = 1
;	;うふふしたことがあるならちょっと過激なオカズを提供してくれる（おかずはランダム）
;	SIF 初体験日:対象キャラ:初うふふ
;		射精予定数 += 1
;	;キスしたことがあるなら、キスもしてくれる（いっぱい出る！）
;	SIF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;		射精予定数 += 1
;
;	;回数の初期化
;	射精回数 = 0
;	行為回数 = 0
;	;射精予定回数まで繰り返し（１回は必ず実行な）
;	DO
;		;溜まった快楽Cと、増加する快楽Cが10000を越えるまでループ（１回は必ず実行な）
;		DO
;			;オナニーする、よりちょっと増加量大。性処理セックスが350なのでそこは気をつけようね
;			CALL SOURCE_CALC_快Ｃ(PLAYER, -1, 250)
;			SIF TALENT:PLAYER:器用な指
;				CALL SOURCE_CALC_快Ｃ(PLAYER, -1, 125)
;
;			CALL SOURCE_CALC_露出(対象キャラ, PLAYER, 100)
;			
;			;オカズを提供してもらってる場合、露出が大きめに上がる
;			SIF 初体験日:対象キャラ:初うふふ
;				CALL SOURCE_CALC_露出(対象キャラ, PLAYER, 100)
;			;キスしてもらってるなら、接触が入る
;			IF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;				CALL SOURCE_CALC_接触(対象キャラ, PLAYER, 150)
;				CALL SOURCE_CALC_接触(対象キャラ, PLAYER, 150)
;				CALL SOURCE_CALC_好感度要素_恋心度UP(対象キャラ, PLAYER, 100)
;				CALL SOURCE_CALC_不潔(対象キャラ, PLAYER, 50)
;			ENDIF
;			;ビミョーに不快が溜まる
;			CALL SOURCE_CALC_不潔(TARGET, PLAYER, 100)
;			行為回数++
;		LOOP CUP:PLAYER:快Ｃ + PALAM:PLAYER:快Ｃ < 10000
;
;		;射精回数をカウント
;		射精回数++
;	LOOP 射精回数 < 射精予定数
;
;	;「出してくれてありがとう」があるのでちょっとだけ上昇
;	;……いやでもまあまあキモいから相殺かなあ……でも、自分から「精液が欲しい」っていう女だしなあ……パッチェさん変人だしなあ……
;	CALL SOURCE_CALC_好感度要素_友情度UP(対象キャラ, PLAYER, 射精回数 * 50)
;	CALL SOURCE_CALC_好感度要素_性愛度UP(対象キャラ, PLAYER, 射精回数 * 10)
;
;	;精液経験を加算
;	EXP:対象キャラ:精液経験 += 射精回数
;
;	;射精回数を受け渡したいので独自フラグに持っておく
;	パチュリー_固有371_射精回数 = 射精回数
;	;精液提供量（射精回数）を口上用フラグに保存
;	特定状況口上用フラグ:対象キャラ:28 += 射精回数
;
;	;かかった行為回数分時間を加算
;	TIME += 経過時間算出(行為回数)
;
;
;@固有1147_精液提供_MESSAGE_オカズを要求しオナニーする
;#DIM 対象キャラ
;#DIM 射精回数
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	射精回数 = パチュリー_固有371_射精回数
;
;	;精液提供を開始した。……から続く。
;	PRINTFORML オナニーするので、オカズを提供してほしい――。
;	PRINTFORM 言えば、%CALLNAME%は、ふう、とため息を吐き、
;	;服装分岐はカットだ……！
;	IF 0
;	;うふふしたことがあればオカズ提供がやや過激になる
;	ELSEIF 初体験日:対象キャラ:初うふふ
;		IF 0
;		ELSEIF !RAND:3
;			IF 0
;			;下着が前張り
;			ELSEIF TEQUIP:対象キャラ:下半身下着あり == 2
;				PRINTFORML スカートをぴらりと持ち上げ、%今日の下着文字列生成(対象キャラ)%を見せつけてきた……
;			;下着ナシ
;			ELSEIF TEQUIP:対象キャラ:下半身下着あり == 0
;				PRINTFORML スカートをぴらりと持ち上げ、下着のない股間を見せつけてきた……
;			;下着がふつうのやつ
;			ELSE
;				PRINTFORML スカートをぴらりと持ち上げ、%今日の下着文字列生成(対象キャラ)%を見せつけてきた……
;			ENDIF
;		ELSEIF !RAND:2
;			PRINTFORML 胸元を開き、豊かな乳房を露わにした……
;		ELSE
;			PRINTFORML %CALLNAME:MASTER%に近づき、乳房を押し当ててきた……
;		ENDIF
;	;うふふしたことがなければおパイをちょっと見せてくれるだけ
;	ELSE
;		PRINTFORML 胸元をくつろげ、谷間を露わにした……
;	ENDIF
;	PRINTFORML  
;	PRINTFORML 「……これでいい？」
;	PRINTFORML  
;	PRINTFORML %CALLNAME:MASTER%は頷き、オナニーを開始した。
;	PRINTFORML ありがたい。そのようなことを言えば、%CALLNAME%はため息を吐いた。
;	PRINTFORML  
;	IF 0
;	;恋慕
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "恋慕")
;		;キスしたことがあるならキスも追加
;		IF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;			PRINTFORML 「贅沢な自慰ね……まったく……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は呆れたように言って、%CALLNAME:MASTER%の頭を引き寄せ、キスをしてきた。
;			PRINTFORML  
;			PRINTFORML 「……これで、もっといっぱい……出るかしら……？」
;			PRINTFORML  
;			PRINTFORML ……いっぱい出た！
;		;キスしたことがない
;		ELSE
;			PRINTFORML 「贅沢な自慰ね……まったく……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は呆れたように言うが、しかし、オカズを提供し続けてくれた……
;			PRINTFORML ……%CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;			PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;			PRINTFORML  
;			PRINTFORML 「ありがとう、また頼むわ。
;			PRINTFORML 　……見せるだけでこれだけ出るなら……費用対効果は悪くないのかしら……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は、うーん、と首をひねった……
;		ENDIF
;	;恋慕自覚
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "恋慕自覚")
;		;キスしたことがあるならキスも追加
;		IF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;			PRINTFORML 「おかず？　っていうなら……キスとかしたら、いっぱい出るかしら」
;			PRINTFORML  
;			PRINTFORML “いっぱい出ますね！”……そう伝えると、%CALLNAME%は呆れたように息を吐いた。
;			PRINTFORML  
;			PRINTFORML 「……してあげるから、一回で出し切って」
;			PRINTFORML  
;			PRINTFORML ……いっぱい出た！
;		;キスしたことがない
;		ELSE
;			PRINTFORML 「おかず？　って、これでいいのかしら……%CSTR:一人称%も、もう少しやる気はあるんだけど……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は呆れたように言うが、しかし、オカズを提供し続けてくれた……
;			PRINTFORML ……%CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;			PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;			PRINTFORML  
;			PRINTFORML 「ありがとう、また頼むわ。
;			PRINTFORML 　……見せるだけでこれだけ出るなら……費用対効果は悪くないのかしら……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は、うーん、と首をひねった……
;		ENDIF
;	;セフレ
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "セフレ")
;		;キスしたことがあるならキスも追加
;		IF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;			PRINTFORML 「おかず？　っていうなら……キスとかしたら、いっぱい出るかしら」
;			PRINTFORML  
;			PRINTFORML “いっぱい出ますね！”……そう伝えると、%CALLNAME%は呆れたように息を吐いた。
;			PRINTFORML  
;			PRINTFORML 「……してあげるから、一回で出し切って」
;			PRINTFORML  
;			PRINTFORML ……いっぱい出た！
;		;キスしたことがない
;		ELSE
;			PRINTFORML 「おかず？　って、これでいいのかしら……見せるだけでいいの……？」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は呆れたように言うが、しかし、オカズを提供し続けてくれた……
;			PRINTFORML ……%CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;			PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;			PRINTFORML  
;			PRINTFORML 「ありがとう、また頼むわ。
;			PRINTFORML 　……見せるだけでこれだけ出るなら……費用対効果は悪くないのかしら……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は、うーん、と首をひねった……
;		ENDIF
;	;その他
;	ELSE
;		;キスしたことがあるならキスも追加
;		IF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;			PRINTFORML 「興奮したらたくさん出るんだったかしら」
;			PRINTFORML  
;			PRINTFORML そういって、%CALLNAME%は唇を無造作に重ねてきた。
;			PRINTFORML 興奮が高まる……！
;			PRINTFORML  
;			PRINTFORML 「……ん、出たわね……多いわねえ……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;			PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;			PRINTFORML ……キスしてくれたが、いいのだろうか？
;			PRINTFORML  
;			PRINTFORML 「別に、キスしたから減るものもないし……
;			PRINTFORML 　これでたくさん出るのなら、効率がいいでしょう？」
;			PRINTFORML  
;			PRINTFORML それは……まあ……そうなのだが。
;			PRINTFORML %CALLNAME%はホクホク顔で精液を持ち帰った……
;		;キスしたことがない
;		ELSE
;			PRINTFORML 「おかず？　って、これでいいのかしら……見せるだけでいいの……？」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は呆れたように言うが、しかし、オカズを提供し続けてくれた……
;			PRINTFORML ……%CALLNAME:MASTER%が射精すると、%CALLNAME%は魔法を使って精液を回収した。
;			PRINTFORML 白濁液の水玉を、%CALLNAME%は検分し、頷いた。
;			PRINTFORML  
;			PRINTFORML 「ありがとう、また頼むわ。
;			PRINTFORML 　……見せるだけでこれだけ出るなら……費用対効果は悪くないのかしら……」
;			PRINTFORML  
;			PRINTFORML %CALLNAME%は、うーん、と首をひねった……
;		ENDIF
;	ENDIF
;
;;-------------------------------------------------
;;〇手コキしてもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_手コキしてもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = 手コキしてもらう
;@固有1147_精液提供_ABLE_手コキしてもらう
;#DIM 対象キャラ
;#DIM 条件判定
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 2)
;		RETURN 1
;	;手コキ経験があればオッケー
;	;手コキはコマンド80番
;	LOCALS = 80
;	SIF STRFIND(コマンド初回フラグ:対象キャラ:0, @"-%LOCALS%-") > -1
;		RETURN 1
;	;性処理：手コキ経験があるならオッケー
;	SIF STRFIND(コマンド初回フラグ:対象キャラ:0, @"-WORKING_手コキ処理-") > -1
;		RETURN 1
;	;精液提供回数が３以上なら以下の条件を無視して「そのくらいならいいか……」してくれる
;	SIF 特定状況口上用フラグ:対象キャラ:28 >= 3
;		RETURN 1
;	;ABL、PALAM、陥落などを参照
;	条件判定 = 0
;	条件判定 += ABL:対象キャラ:欲望 + ABL:対象キャラ:奉仕精神
;	条件判定 += GETPALAMLV(PALAM:対象キャラ:欲情,5) * 1
;	条件判定 += パッチェさん_陥落段階(対象キャラ, "恋慕") * 5
;	条件判定 += パッチェさん_陥落段階(対象キャラ, "セフレ") * 3
;	条件判定 += (パッチェさん_陥落段階(対象キャラ, "恋慕自覚") > 0) * 3
;	条件判定 += (初体験日:対象キャラ:初うふふ > 0) * 3
;	条件判定 += (CFLAG:対象キャラ:好感度レベル < 関係閾値:3) * 1
;
;	;欲望2、奉仕精神1、関係性Lv3以上……あたりからイケる感じ
;	;（そしてイベント発生条件からして、手コキは初期開放想定）
;	SIF 条件判定 >= 4
;		RETURN 1
;
;	;ここまでオッケーが出なければ、-1（グレーアウト）を返す
;	RETURN -1
;
;@固有1147_精液提供_実行_手コキしてもらう
;#DIM 対象キャラ
;#DIM 射精回数
;#DIM 射精予定数
;#DIM 行為回数
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	;基礎は２回
;	射精予定数 = 2
;	;うふふしたことがあるなら
;	SIF 初体験日:対象キャラ:初うふふ
;		射精予定数 += 1
;	;キスしたことがあるなら、キスもしてくれる（いっぱい出る！）
;	SIF CFLAG:対象キャラ:ファーストキスフラグ != 0 && CFLAG:MASTER:ファーストキスフラグ != 0
;		射精予定数 += 1
;	;母乳体質なら授乳手コキに派生
;
;	;回数の初期化
;	射精回数 = 0
;	行為回数 = 0
;	;射精予定回数まで繰り返し（１回は必ず実行な）
;	DO
;		;溜まった快楽Cと、増加する快楽Cが10000を越えるまでループ（１回は必ず実行な）
;		DO
;			;オナニーする、よりちょっと増加量大。性処理セックスが350なのでそこは気をつけようね
;			CALL SOURCE_CALC_快Ｃ(PLAYER, -1, 250)
;			SIF TALENT:PLAYER:器用な指
;				CALL SOURCE_CALC_快Ｃ(PLAYER, -1, 125)
;
;			CALL SOURCE_CALC_露出(TARGET, PLAYER, 100)
;			;ビミョーに不快が溜まる
;			CALL SOURCE_CALC_不潔(TARGET, PLAYER, 100)
;			行為回数++
;		LOOP CUP:PLAYER:快Ｃ + PALAM:PLAYER:快Ｃ < 10000
;
;		;射精回数をカウント
;		射精回数++
;	LOOP 射精回数 < 射精予定数
;
;	;「出してくれてありがとう」があるのでちょっとだけ上昇
;	CALL SOURCE_CALC_好感度要素_友情度UP(対象キャラ, PLAYER, 射精回数 * 50)
;	CALL SOURCE_CALC_好感度要素_性愛度UP(対象キャラ, PLAYER, 射精回数 * 10)
;
;	;精液経験を加算
;	EXP:対象キャラ:精液経験 += 射精回数
;
;
;	;射精回数を受け渡したいので独自フラグに持っておく
;	パチュリー_固有371_射精回数 = 射精回数
;	;精液提供量（射精回数）を口上用フラグに保存
;	特定状況口上用フラグ:対象キャラ:28 += 射精回数
;
;	;かかった行為回数分時間を加算
;	TIME += 経過時間算出(行為回数)
;
;
;@固有1147_精液提供_MESSAGE_手コキしてもらう
;#DIM 対象キャラ
;#DIM 射精回数
;
;	対象キャラ = キャラ検索("[動かない大図書館]パチュリー")
;	射精回数 = パチュリー_固有371_射精回数
;
;	;精液提供を開始した。……から続く。
;	PRINTFORML 
;	PRINTFORML 
;	PRINTFORML 
;
;
;
;;-------------------------------------------------
;;〇フェラしてもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_フェラしてもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = フェラしてもらう
;@固有1147_精液提供_ABLE_フェラしてもらう
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 3)
;		RETURN 1
;@固有1147_精液提供_実行_フェラしてもらう
;@固有1147_精液提供_MESSAGE_フェラしてもらう
;
;;-------------------------------------------------
;;〇パイズリしてもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_パイズリしてもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = パイズリしてもらう
;@固有1147_精液提供_ABLE_パイズリしてもらう
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 4)
;		RETURN 1
;@固有1147_精液提供_実行_パイズリしてもらう
;@固有1147_精液提供_MESSAGE_パイズリしてもらう
;
;;-------------------------------------------------
;;〇素股してもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_素股してもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = 素股してもらう
;@固有1147_精液提供_ABLE_素股してもらう
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 5)
;		RETURN 1
;@固有1147_精液提供_実行_素股してもらう
;@固有1147_精液提供_MESSAGE_素股してもらう
;
;;-------------------------------------------------
;;〇膣を使わせてもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_膣を使わせてもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = 膣を使わせてもらう
;@固有1147_精液提供_ABLE_膣を使わせてもらう
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 6)
;		RETURN 1
;@固有1147_精液提供_実行_膣を使わせてもらう
;@固有1147_精液提供_MESSAGE_膣を使わせてもらう
;
;ごっちゅ_H_　ごっちゅ_H_
;
;寝バック状態で、パチュリーの雌穴をほじる。
;
;
;「……ん、終わったみたいね」
;
;多少汗をかいた、程度の表情をしているが、
;びしゃーっ、ばしゅっ、と潮をまき散らし、がくがくと震えている。
;
;「うわ……なにか変な薬でも使った？　……わけないけど、なにこれ……ひどいわね。
;　後始末は任せたわ」
;
;パチュリーは己の股座を見もせずに言う。
;……後始末に拭うだけでもイキまくるのは困ったぜ！
;
;妊娠率補正プラス。加算値にプラスはしないので口上はでない。こっそり。
;
;
;「ちょっと。あまり揺らさないで」
;　揺れているのはパチュリーの尻だ。
;　脚がびぃんと伸びて、その勢いで尻が跳ね、本を持つ手が揺れている。
;　ちょっと動かすだけで跳ねまわるものだから、『揺らさずに』というのが難しい。
;
;
;感覚遮断してるんだから、私をイかせようとしなくていいんだけど……？
;
;
;;-------------------------------------------------
;;〇アナルを使わせてもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_アナルを使わせてもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = アナルを使わせてもらう
;@固有1147_精液提供_ABLE_アナルを使わせてもらう
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 7)
;		RETURN 1
;@固有1147_精液提供_実行_アナルを使わせてもらう
;@固有1147_精液提供_MESSAGE_アナルを使わせてもらう
;
;;-------------------------------------------------
;;〇全身を無制限に使わせてもらう関連
;;-------------------------------------------------
;@固有1147_精液提供_NAME_全身を無制限に使わせてもらう
;#FUNCTIONS
;	TSTR:コマンド名受渡 = 全身を無制限に使わせてもらう
;@固有1147_精液提供_ABLE_全身を無制限に使わせてもらう
;	;やったことがあるなら無条件許可
;	SIF GETBIT (特定状況口上用フラグ:対象キャラ:36, 8)
;		RETURN 1
;
;@固有1147_精液提供_実行_全身を無制限に使わせてもらう
;@固有1147_精液提供_MESSAGE_全身を無制限に使わせてもらう
;
;	;実質ただの押し倒しなので一言二言言うくらい
;	IF 0
;	;恋慕
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "恋慕")
;	;恋慕自覚
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "恋慕自覚")
;	;セフレ
;	ELSEIF パッチェさん_陥落段階(対象キャラ, "セフレ")
;	;その他
;	ELSE
;	ENDIF
;
;
;