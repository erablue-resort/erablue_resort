;--------------------------------------------------
;●パチュリー・ノーレッジ口上＠erablue_resort用
;　――個別エンド
;--------------------------------------------------

;--------------------------------------------------
;●ライセンス/更新履歴/概要/使用フラグ
;--------------------------------------------------
;　いずれもパチュリー口上_readme.txt記載に従う
;--------------------------------------------------


;--------------------------------------------------
;●エンド判定
;--------------------------------------------------
;「1147_パチュリー個別エンド」を任意のイベント名に変えて使うこと、他との重複不可
;--------------------------------------------------
@イベント関数_エンディングイベント_1147_パチュリー個別エンド(動作モード, イベント行id)
#DIMS 動作モード
#DIM イベント行id
#DIM 対象キャラ

	;イベント行idは通常は使ってないが、該当イベントのDB行にある情報が必要な時に使う
	;DBにはフリー変数・フリー文字列を入れる枠を準備しているのでそれを使った場合などにどうぞ

	SELECTCASE 動作モード
		CASE "設定取得"
			;〇エンディング番号
			;　エンディング番号をセットする。CH01など、アルファベット2文字と数字の組み合わせで設定すること
			;　アルファベットは以下の三種
			;　　CH:Character Endingの略。キャラエンドの意。
			;　　EX:Extra Character Endingの略。EXキャラエンドの意
			;　　GE:General Endingの略。汎用エンドの意
			;　数字は該当するアルファベットの中で連番にすることが望ましいが、別に連番じゃなくても動く。2桁じゃなくてもいい
			;　EX99999とかにしても大丈夫。でも他と被らないように
			;/
			;「連番のほうが望ましい」と言われているが、被らないように、と言うのも若干むずいのよね
			;ということでひとまずパチュリーの番号である1147を設定
			TSTR:コマンド名受渡 = CH1147

			;解説文もここで取得
			TSTR:ツールチップ受渡 = 
			TSTR:ツールチップ受渡 += "■エンディングNo.CH1147『パチュリー個別エンド』<br>"
			TSTR:ツールチップ受渡 += "<br>"
			TSTR:ツールチップ受渡 += "パチュリー・ノーレッジとの個別エンド。<br>"
			TSTR:ツールチップ受渡 += "星晶獣eraに10,000ZPを献上し、契約を満了――『おつり』を貰う。<br>"
			TSTR:ツールチップ受渡 += "祝福しろ　結婚にはそれが必要だ<br>"
			TSTR:ツールチップ受渡 += "<br>"
			TSTR:ツールチップ受渡 += "実行条件：<br>"
			TSTR:ツールチップ受渡 += "・10,000ZPの所持<br>"
			TSTR:ツールチップ受渡 += "・パチュリーと結婚している<br>"
			TSTR:ツールチップ受渡 += "解放要素：なし<br>"
			TSTR:ツールチップ受渡 += "エンディング視聴後：現在の周回を継続<br>"
		CASE "発生条件"
			;リストに表示するための条件
			;一回表示したらその後条件を満たさなくなっても表示したままなので注意

			;リゾートランク２条件は付けることを強く推奨
			SIF リゾートランク < 2
				RETURN 0

			対象キャラ = GETCHARA(1147)
			;肉体関係がないならアウト
			SIF !パッチェさん_陥落段階(対象キャラ, "肉体関係")
				RETURN 0
			;結婚してないならアウト
			SIF !パッチェさん_陥落段階(対象キャラ, "結婚")
				RETURN 0

			RETURN 1

		CASE "実行条件"
			;リストから実行するための条件
			;満たしてない間は実行ボタンが灰色で表示され、クリック不可

			;１万ZP未満ならあうと
			SIF FLAG:ZP所持量 < 10000
				RETURN 0

			;上の解説部分に書いた実行条件を条件文で記述する
			RETURN 1
		CASE "実処理"
			;なんかルピとかZPとかを減らす場合はここに書く
			FLAG:ZP所持量 -= 10000

			;文章部分は分割推奨：ここに記載するよりも別関数に分ける方が見やすいし書きやすいので
			CALL エンディングイベント_シナリオ_1147_パチュリー個別エンド()
			RETURN RESULT
	ENDSELECT

;--------------------------------------------------
;●エンド本文
;--------------------------------------------------
@エンディングイベント_シナリオ_1147_パチュリー個別エンド()

	DRAWLINE
	;以下全部フォーム文で書く
	;「PRINTFORM」にする必要はあまりないが、「統一したほうが見やすい」というのは結構大きい
	PRINTFORML  
	PRINTFORML 星晶獣era：
	PRINTFORML 「――確かに。10000ZPきっちり頂いたよ。
	PRINTFORML 　私はこのZPで再び100年の眠りにつくつもりだが――」
	PRINTFORMW  
	PRINTFORML %CALLNAME:MASTER%は星晶獣eraが要求する額のZPをようやく献上することが出来た。
	PRINTFORML 当初の契約通り、これで%CALLNAME:MASTER%は、力や富を手にしたままこの契約から解放されることになる――
	PRINTFORMW  
	PRINTFORML 星晶獣era：
	PRINTFORML 「――すぐに、『あちら』に渡るつもりか？」
	PRINTFORMW  
	PRINTFORML %CALLNAME:MASTER%は、パチュリーと顔を見合わせ、……首を振った。
	PRINTFORML パチュリーが、一歩進み出て、eraに言う。
	PRINTFORMW  
	PRINTFORML パチュリー：
	PRINTFORML 「こちらの技術や魔術を、まだ知りたいの。もう少し、リゾートは経営してもらうわ」
	PRINTFORMW  
	PRINTFORML ――とのことなので、もう少し、リゾートを経営するつもりだ。
	PRINTFORML カネもモノも集まるようになってきたことだし、パチュリーの趣味はカネがかかるし。
	PRINTFORML まあ、多少の苦労はいとわない。
	PRINTFORMW  
	PRINTFORML ……%CALLNAME:MASTER%は、リゾートで得た余剰のZPで、異世界に渡る力を得た。
	PRINTFORML 幻想郷、と呼ばれる、パチュリーの住む異世界に渡る力だ。
	PRINTFORML そちらにも色々と独特なものがあるとのことだし、平和だそうなので、隠居するのにちょうど良さそうな場所である。
	PRINTFORML それに、『幻想郷はすべてを受け入れる』とのことなので、大丈夫だろう。おそらくは。
	PRINTFORMW  
	PRINTFORML まあ、我儘を聞くのも甲斐性というやつだ。
	PRINTFORML リゾート経営も向いているようだし、パチュリーが満足するまでは続けることにしよう。
	PRINTFORML 言えば、eraは笑った。
	PRINTFORMW  
	PRINTFORML 星晶獣era：
	PRINTFORML 「まったく……再び目覚めたとき、お前ほどの契約者を、得られるかどうか。
	PRINTFORML 　お前の子孫にでも、期待しておくのがいいか。一人くらいはこちらに残していけ。
	PRINTFORML 　目覚めたとき、またこの島が荒廃していることなどないように、教育もしろ。
	PRINTFORML 　……私にはもう頼れないからな？」
	PRINTFORMW  
	PRINTFORML %CALLNAME:MASTER%は頷き、パチュリーと手を繋ぐ。
	PRINTFORML もう、あまり悪さをするつもりはない。
	PRINTFORML 頑張っていく、と返せば、eraは頷いた。
	PRINTFORMW  
	PRINTFORML 星晶獣era：
	PRINTFORML 「頑張りたまえ。我が優秀な元契約者と、その最愛の人。
	PRINTFORML 　お前と、そしてパチュリーのこれからが幸いであるように、私も祈ろう。
	PRINTFORML 　どうか末永く、健やかに過ごしたまえ」
	PRINTFORMW  
	PRINTFORML 輝く白髪の少女である星晶獣eraは、その言葉を最後に、空気に溶けるように姿を消した。
	PRINTFORML %CALLNAME:MASTER%の胸には、一抹の寂しさと、仕事を終えた達成感だけが残っている。
	PRINTFORMW  
	PRINTFORML %CALLNAME:MASTER%の生活はこれからも続いていく。
	PRINTFORML 100年後のeraがさみしくないように、頑張っていこう――握ったパチュリーの手を引いて、歩き出す。
	PRINTFORMW  
	PRINTFORML パチュリー：
	PRINTFORML 「……その名目で……これから、%CSTR:一人称%の、どこに、なにを頑張ってもらう、つもり？」
	PRINTFORMW  
	PRINTFORML 無論――パチュリーの、子宮に、子作りを、頑張ってもらう。
	PRINTFORML 顔を真っ赤にしたパチュリーを、寝室に引きずり込む。
	PRINTFORML リゾートの経営に戻るのは……明日からだ。
	PRINTFORMW 　
	PRINTFORMW 　
	PRINTFORMW 　
	PRINTFORMW エンディングNo.CH1147『パチュリー個別エンド/100年後の友のために（？）』
	PRINTFORMW 　


	;RETURNを1にすると、強制的に次の周回に移行する
	;特に理由がないならまあ０でもいいんじゃないかな
	RETURN 0


;旧エンディング構文
;;--------------------------------------------------
;;恋慕エンディング発生時
;;--------------------------------------------------
;;500ZPをeraに献上した際、恋慕素質持ちかつ恋慕レベル100だと呼び出せるエンディング
;;/
;;これをコメントアウト解除すると、かならずこちらに来て、汎用テキストが表示されなくなる。
;;つまり、「コメントアウトだけしてなにも書かないでいると若干問題が出る」ので、コメントアウトするならかならずきっちり書くこと。
;;/
;;今他に個別エンド実装してる人いないから、わしがフォーマット決めちゃうのでは……？
;;--------------------------------------------------
;@キャラ個別エンディング_恋慕_1147(対象キャラ)
;#DIM 対象キャラ
;
;	;ここでは通常色にする
;	CALL 口上変数初期化_1147(0)
;
;	;汎用エンドはPRINT式なので、そっちに合わせておく
;	KSTR:(K++) = _DRAWLINE_
;	KSTR:(K++) = 　
;	KSTR:(K++) = 「――確かに。500ZPきっちり頂いたよ。
;	KSTR:(K++) = 　私はこのZPで再び100年の眠りにつくつもりだが――」
;	KSTR:(K++) = 　
;	KSTR:(K++) = _主人_は星晶獣eraが要求する額のZPをようやく献上することが出来た。
;	KSTR:(K++) = 当初の契約通り、これであなたは力や富を手にしたままこの契約から解放されることになる――
;	WSTR:(K++) =  
;	KSTR:(K++) = 「――すぐに、『あちら』に渡るつもりか？」
;	KSTR:(K++) = 　
;	KSTR:(K++) = _主人_は、_呼び名_と顔を見合わせ、……首を振った。
;	KSTR:(K++) = _呼び名_が、一歩進み出て、eraに言う。
;	WSTR:(K++) =  
;	KSTR:(K++) = 「こちらの技術や魔術を、まだ知りたいの。もう少し、リゾートは経営してもらうわ」
;	KSTR:(K++) = 　
;	KSTR:(K++) = ――とのことなので、もう少し、リゾートを経営するつもりだ。
;	KSTR:(K++) = カネもモノも集まるようになってきたことだし、_呼び名_の趣味はカネがかかるし。
;	KSTR:(K++) = まあ、多少の苦労はいとわない。
;	KSTR:(K++) = 　
;	KSTR:(K++) = ……_主人_は、リゾートで得た余剰のZPで、異世界に渡る力を得た。
;	KSTR:(K++) = 幻想郷、と呼ばれる、_呼び名_の住む異世界に渡る力だ。
;	KSTR:(K++) = そちらにも色々と独特なものがあるとのことだし、平和だそうなので、隠居するのにちょうど良さそうな場所である。
;	KSTR:(K++) = それに、『幻想郷はすべてを受け入れる』とのことなので、大丈夫だろう。おそらくは。
;	WSTR:(K++) =  
;	KSTR:(K++) = まあ、我儘を聞くのも甲斐性というやつだ。
;	KSTR:(K++) = リゾート経営も向いているようだし、_呼び名_が満足するまでは続けることにしよう。
;	KSTR:(K++) = 言えば、eraは笑った。
;	WSTR:(K++) =  
;	KSTR:(K++) = 「まったく……再び目覚めたとき、お前ほどの契約者を、得られるかどうか。
;	KSTR:(K++) = 　お前の子孫にでも、期待しておくのがいいか。一人くらいはこちらに残していけ。
;	KSTR:(K++) = 　目覚めたとき、またこの島が荒廃していることなどないように、教育もしろ。
;	KSTR:(K++) = 　……私にはもう頼れないからな？」
;	KSTR:(K++) = 　
;	KSTR:(K++) = _主人_は頷き、%CALLNAME:対象キャラ%と手を繋ぐ。
;	KSTR:(K++) = もう、あまり悪さをするつもりはない。
;	KSTR:(K++) = 頑張っていく、と返せば、eraは頷いた。
;	WSTR:(K++) =  
;	KSTR:(K++) = 「頑張りたまえ。我が優秀な元契約者と、その最愛の人。
;	KSTR:(K++) = 　お前と、そして%CALLNAME:対象キャラ%のこれからが幸いであるように、私も祈ろう。
;	KSTR:(K++) = 　どうか末永く、健やかに過ごしたまえ」
;	KSTR:(K++) = 　
;	KSTR:(K++) = 輝く白髪の少女である星晶獣eraは、その言葉を最後に、空気に溶けるように姿を消した。
;	KSTR:(K++) = _主人_の胸には一抹の寂しさと、仕事を終えた達成感だけが残っている。
;	WSTR:(K++) =  
;	KSTR:(K++) = _主人_の生活はこれからも続いていく。
;	KSTR:(K++) = 100年後のeraがさみしくないように、頑張っていこう――握った_呼び名_の手を引いて、歩き出す。
;	WSTR:(K++) =  
;	KSTR:(K++) = 「……その名目で……これから、_一人称_の、どこに、なにを頑張ってもらう、つもり？」
;	KSTR:(K++) = 　
;	KSTR:(K++) = 無論――_呼び名_の、子宮に、子作りを、頑張ってもらう。
;	KSTR:(K++) = 顔を真っ赤にした_呼び名_を、寝室に引きずり込む。
;	KSTR:(K++) = リゾートの経営に戻るのは……明日からだ。
;	KSTR:(K++) = 　
;	KSTR:(K++) = 　
;	WSTR:(K++) =  
;	WSTR:(K++) = %NAME:対象キャラ% END『100年後の友のために（？）』
;	WSTR:(K++) =  
;
;	CALL 口上変数表示(対象キャラ, 0)
;
