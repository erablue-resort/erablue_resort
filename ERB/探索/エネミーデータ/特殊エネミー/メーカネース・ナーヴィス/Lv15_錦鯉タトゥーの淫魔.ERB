
@敵BATTLE_STATE_Lv15_錦鯉タトゥーの淫魔(ARG)
敵BATTLE_STATE:ARG:Lv = 15
敵BATTLE_STATE:ARG:最大ＨＰ = 12300
敵BATTLE_STATE:ARG:ＨＰ = 12000
敵BATTLE_STATE:ARG:攻撃力 = 480
敵BATTLE_STATE:ARG:防御力 = 450
敵BATTLE_STATE:ARG:回復力 = 0
敵BATTLE_STATE:ARG:行動速度 = 400
敵BATTLE_STATE:ARG:DA率 = 0
敵BATTLE_STATE:ARG:TA率 = 0
敵BATTLE_STATE:ARG:命中率 = 70
敵BATTLE_STATE:ARG:回避率 = 0
敵BATTLE_STATE:ARG:属性 = 5
敵BATTLE_STATE:ARG:所持EXP = 1150
敵BATTLE_STATE:ARG:所持ルピ = 0
敵BATTLE_STATE:ARG:最大チャージターン = 2

敵BATTLE_STATE:ARG:ボスフラグ = 1
;liruk:ランダム不許可としていますが、汎用化しランダム化していただく分には全然アリです
敵BATTLE_STATE:ARG:ランダム不許可フラグ = 1

敵BATTLE_STATE_STR:ARG:種族 = 人型_ならず者

@敵討伐後処理_Lv15_錦鯉タトゥーの淫魔(隊列番号)
#DIM 隊列番号
#DIM ドロップ確率
#DIMS ドロップアイテム
#DIM データベース行数
#DIM トレハンLv

トレハンLv = 0
データベース行数 = デバフ番号取得("ドロップ率UP")
SIF データベース行数 > -1
	トレハンLv = DT_CELL_GET("戦闘効果データベース", データベース行数, "効果量_固定値")

ドロップ確率 = 30 + トレハンLv * 2
ドロップアイテム = シルバーネックレス
CALL ドロップ判定処理(ドロップ確率, ドロップアイテム)

@敵トリガー行動_Lv15_錦鯉タトゥーの淫魔
#DIM 攻撃回数


IF 敵BATTLE_STATE:(戦闘行動キャラ - 10):ＨＰ < 敵BATTLE_STATE:(戦闘行動キャラ - 10):最大ＨＰ * 2 / 3 && GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 0) == 0

	WSTR:(K++) = 「%TEXTR("力を抜いて。ふふ……/この目にしかと焼き付けなさい！/さあ、私の目を見て……")%」
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%の特殊攻撃！
	アビ汎用文字列:実行時メッセージ２ = ──《ブレインシェイク》──

	CALL アビ対象選択テンプレート_味方全体_生者のみ()
	アビ汎用変数:効果割合 = 150
	CALL アビテンプレート_ダメージ処理_自属性

	CALL アビ汎用変数文字列リセット
	アビ汎用文字列:バフ・デバフ枠 = 魅了
	アビ汎用文字列:バフ・デバフ対象能力 = 魅了
	アビ汎用変数:効果割合 = 20
	アビ汎用変数:持続ターン = 2
	アビ汎用変数:基礎成功確率 = 70
	CALL アビテンプレート_不利効果_デバフ効果セット

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 0
	;チャージリセット
	敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン = 0
	
ELSEIF 敵BATTLE_STATE:(戦闘行動キャラ - 10):ＨＰ < 敵BATTLE_STATE:(戦闘行動キャラ - 10):最大ＨＰ * 1 / 3 && GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 1) == 0

	WSTR:(K++) = 「%TEXTR("淫魔の本領、見せつけてあげましょう/もう、離さない……！/さあ、目を逸らさないで……")%」
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%の特殊攻撃！
	アビ汎用文字列:実行時メッセージ２ = ──《イビルアイ：ディフュージョン》──

	FOR 攻撃回数, 0, 3
		CALL アビ対象選択テンプレート_味方ランダムＸ体(2, 1)
		アビ汎用変数:効果割合 = 100
		CALL アビテンプレート_ダメージ処理_自属性

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 被ダメージ上昇
		アビ汎用文字列:バフ・デバフ対象能力 = 被ダメージ
		アビ汎用変数:効果割合 = 15
		アビ汎用変数:持続ターン = 3
		アビ汎用変数:基礎成功確率 = 80
		CALL アビテンプレート_不利効果_デバフ効果セット
	NEXT

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 1
	;チャージリセット
	敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン = 0
ELSE
	;通常攻撃は複数回攻撃
	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%の通常攻撃！

	FOR 攻撃回数, 0, RAND:2 + 2
		CALL アビ対象選択テンプレート_味方ランダムＸ体(1)
		アビ汎用変数:効果割合 = 80
		アビ汎用文字列:ダメージ種類 = 通常攻撃ダメージ
		CALL アビテンプレート_ダメージ処理_自属性
	NEXT
	IF デバフ番号取得("恐怖", 戦闘行動キャラ) < 0
		敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン += 1
	ELSE
		;回数消費
		CALL デバフ回数経過処理(戦闘行動キャラ, "恐怖")
	ENDIF
ENDIF

RETURN 1

@敵チャージ行動_Lv15_錦鯉タトゥーの淫魔
アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%の特殊攻撃！
アビ汎用文字列:実行時メッセージ２ = ──《ブレインシェイク》──

CALL アビ対象選択テンプレート_味方全体_生者のみ()
アビ汎用変数:効果割合 = 150
CALL アビテンプレート_ダメージ処理_自属性

CALL アビ汎用変数文字列リセット
アビ汎用文字列:バフ・デバフ枠 = 魅了
アビ汎用文字列:バフ・デバフ対象能力 = 魅了
アビ汎用変数:効果割合 = 20
アビ汎用変数:持続ターン = 2
アビ汎用変数:基礎成功確率 = 70
CALL アビテンプレート_不利効果_デバフ効果セット
