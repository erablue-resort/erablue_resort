@バフ・デバフ汎用表示(隊列番号, バフ・デバフ行数, デバフフラグ)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM デバフフラグ
#DIM 効果タイプ
#DIM 要改行フラグ
;以下、一時保存用
#DIMS バフ・デバフ対象能力
#DIMS バフ・デバフ名
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
#DIM バフ・デバフ持続ターン
#DIM バフ・デバフ持続回数
#DIM バフ・デバフ持続行動回数

IF デバフフラグ
	バフ・デバフ対象能力 '= DT_CELL_GETS(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "デバフ対象能力")
	バフ・デバフ名 '= DT_CELL_GETS(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "デバフ名")
	バフ・デバフ効果枠 '= DT_CELL_GETS(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "デバフ枠")
	バフ・デバフ効果量 = DT_CELL_GET(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "デバフ効果量_固定値")
	バフ・デバフ効果割合 = DT_CELL_GET(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "デバフ効果量_割合")
	バフ・デバフ持続ターン = DT_CELL_GET(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "持続ターン")
	バフ・デバフ持続回数 = DT_CELL_GET(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "持続回数")
	バフ・デバフ持続行動回数 = DT_CELL_GET(@"デバフデータベース_{隊列番号}", バフ・デバフ行数, "持続行動回数")
ELSE
	バフ・デバフ対象能力 '= DT_CELL_GETS(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "バフ対象能力")
	バフ・デバフ名 '= DT_CELL_GETS(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "バフ名")
	バフ・デバフ効果枠 '= DT_CELL_GETS(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "バフ枠")
	バフ・デバフ効果量 = DT_CELL_GET(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "バフ効果量_固定値")
	バフ・デバフ効果割合 = DT_CELL_GET(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "バフ効果量_割合")
	バフ・デバフ持続ターン = DT_CELL_GET(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "持続ターン")
	バフ・デバフ持続回数 = DT_CELL_GET(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "持続回数")
	バフ・デバフ持続行動回数 = DT_CELL_GET(@"バフデータベース_{隊列番号}", バフ・デバフ行数, "持続行動回数")
ENDIF

PRINTFORML %バフ・デバフ表示名(バフ・デバフ対象能力)%\@ デバフフラグ ? デ # \@バフ：%バフ・デバフ名%

TRYCCALLFORM \@ デバフフラグ ? デ # \@バフ固有説明文_%バフ・デバフ効果枠%(バフ・デバフ効果量, バフ・デバフ効果割合)
	;固有説明文があればそれを表示する
	効果タイプ = RESULT
CATCH
	TRYCCALLFORM \@ デバフフラグ ? デ # \@バフ説明文_%バフ・デバフ対象能力%(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
		;暗闇などの特殊なバフは説明文を用意してあげよう
		効果タイプ = RESULT
	CATCH
		;それ以外はステータスかそれと同じように数値計算に絡むタイプのものなので、説明文はなし
		効果タイプ = バフ・デバフ効果タイプ(バフ・デバフ対象能力)
	ENDCATCH
ENDCATCH

要改行フラグ = 0
IF !GETBIT(効果タイプ, 2)
	PRINTFORM 効果枠：%バフ・デバフ効果枠, 20, LEFT%
	要改行フラグ = 1
ENDIF
IF !GETBIT(効果タイプ, 0) && (バフ・デバフ効果量 != 0 || バフ・デバフ効果割合 == 0 || GETBIT(効果タイプ, 1))
	PRINTFORM 効果量：{バフ・デバフ効果量, 4}　　
	要改行フラグ = 1
ENDIF
IF !GETBIT(効果タイプ, 1) && (バフ・デバフ効果割合 != 0 || GETBIT(効果タイプ, 0))
	PRINTFORM 効果割合：{バフ・デバフ効果割合, 4}％　　
	要改行フラグ = 1
ENDIF
SIF 要改行フラグ
	PRINTL 

要改行フラグ = 0
IF バフ・デバフ持続ターン < 0
	PRINT 持続ターン：永続　　
	要改行フラグ = 1
ELSEIF バフ・デバフ持続ターン > 0
	PRINTFORM 持続ターン：{バフ・デバフ持続ターン}　　
	要改行フラグ = 1
ENDIF
IF バフ・デバフ持続回数 > 0
	PRINTFORM 持続回数：{バフ・デバフ持続回数}　　
	要改行フラグ = 1
ENDIF
IF バフ・デバフ持続行動回数 > 0
	PRINTFORM 持続行動回数：{バフ・デバフ持続行動回数}　　
	要改行フラグ = 1
ENDIF
SIF 要改行フラグ
	PRINTL 


@バフ汎用表示(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
JUMP バフ・デバフ汎用表示(隊列番号, バフ・デバフ行数, 0)


@デバフ汎用表示(隊列番号, バフ・デバフ行数)
#DIM 隊列番号
#DIM バフ・デバフ行数
JUMP バフ・デバフ汎用表示(隊列番号, バフ・デバフ行数, 1)


@バフ・デバフ表示名(バフ・デバフ種類)
#FUNCTIONS
#DIMS バフ・デバフ種類
#DIMS 効果対象
;状態異常耐性やダメージ補正のように、名前が表示向きじゃないものは表示用に補正する

SIF バフ・デバフ種類 == "ゲージ上昇効率_被ダメ時"
	RETURNF "ゲージ上昇効率（被ダメージ時）"
SIF バフ・デバフ種類 == "特殊反応_被ダメ時"
	RETURNF "特殊反応（被ダメージ時）"
SIF バフ・デバフ種類 == "特殊反応_回避時"
	RETURNF "特殊反応（回避時）"
SIF バフ・デバフ種類 == "特殊反応_被タゲ時"
	RETURNF "特殊反応（被ターゲット時）"
SIF バフ・デバフ種類 == "特殊反応_戦闘不能時"
	RETURNF "特殊反応（戦闘不能時）"
IF REGEXPMATCH(バフ・デバフ種類, "^ダメージ補正_.*$") > 0
	効果対象 '= SUBSTRINGU(バフ・デバフ種類, STRLENSU("ダメージ補正_"), -1)
	RETURNF 効果対象 + "補正"
ENDIF
IF REGEXPMATCH(バフ・デバフ種類, "^状態異常耐性_.*$") > 0
	効果対象 '= SUBSTRINGU(バフ・デバフ種類, STRLENSU("状態異常耐性_"), -1)
	RETURNF "状態異常耐性（" + 効果対象 + "）"
ENDIF
RETURNF バフ・デバフ種類


@バフ説明文_追撃(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 通常攻撃時、与えたダメージに応じた割合の追加ダメージを与えます。
	RETURN 0
ELSE
	PRINTL 通常攻撃時、追加ダメージを与えます。
	RETURN 1p1
ENDIF


@バフ説明文_カウンター(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL ダメージを受けたとき、反撃を行います。
RETURN 0


@バフ説明文_回避反撃(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 攻撃を回避したとき、反撃を行います。
RETURN 0


@バフ説明文_自動復活(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 戦闘不能時、最大ＨＰに応じた割合のＨＰで自動的に復活します。
	RETURN 0
ELSE
	PRINTL 戦闘不能時、自動的に復活します。
	RETURN 1p1
ENDIF


@バフ説明文_再生(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＨＰに応じた割合のＨＰ回復が発生します。
	RETURN 0
ELSE
	PRINTL 行動終了時、ＨＰ回復が発生します。
	RETURN 1p1
ENDIF


@バフ説明文_高揚(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、現在の奥義ゲージ量に応じた割合で奥義ゲージが増加します。
	RETURN 0
ELSE
	PRINTL 行動終了時、奥義ゲージが増加します。
	RETURN 1p1
ENDIF


@バフ説明文_ＨＰ転換(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINT 対象者へのダメージをＨＰ回復に転換します。
SIF バフ・デバフ効果量 > 0
	PRINTFORM （上限：{バフ・デバフ効果量}）
PRINTL 
RETURN 1p0


@バフ説明文_ＭＰ転換(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINT 対象者へのダメージをＭＰ回復に転換します。
SIF バフ・デバフ効果量 > 0
	PRINTFORM （上限：{バフ・デバフ効果量}）
PRINTL 
RETURN 1p0


@バフ説明文_バリア(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 対象者へのダメージをバリアが肩代わりします。
RETURN 1p1


@バフ説明文_単体かばう(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 全体攻撃でない攻撃から味方をかばいます。
RETURN 1p0 | 1p1


@バフ説明文_全体かばう(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 攻撃から味方をかばいます。
RETURN 1p0 | 1p1


@バフ説明文_反射(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 自身を対象とした通常攻撃や奥義でない攻撃を行動者に反射します。
RETURN 1p0 | 1p1


@バフ説明文_再行動(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL １ターンのうちに行動できる回数を追加します。
RETURN 1p1


@バフ説明文_奥義再発動(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 奥義使用時、その効果がもう１度発動します。
RETURN 1p0 | 1p1


@バフ説明文_弱体無効(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL デバフ付与効果を弾きます。
RETURN 1p0 | 1p1


@バフ説明文_ディスペルガード(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL バフ消去効果を弾きます。
RETURN 1p0 | 1p1


@デバフ説明文_毒(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＨＰに応じた割合のダメージを受けます。
	RETURN 0
ELSE
	PRINTL 行動終了時、ダメージを受けます。
	RETURN 1p1
ENDIF


@デバフ説明文_火傷(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＨＰに応じた割合のダメージを受けます。
	RETURN 0
ELSE
	PRINTL 行動終了時、ダメージを受けます。
	RETURN 1p1
ENDIF


@デバフ説明文_氷結(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＨＰに応じた割合のダメージを受けます。
	RETURN 0
ELSE
	PRINTL 行動終了時、ダメージを受けます。
	RETURN 1p1
ENDIF


@デバフ説明文_自傷(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＨＰに応じた割合のダメージを受けます。
	RETURN 0
ELSE
	PRINTL 行動終了時、ダメージを受けます。
	RETURN 1p1
ENDIF


@デバフ説明文_消耗(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＭＰに応じた割合でＭＰが減少します。
	RETURN 0
ELSE
	PRINTL 行動終了時、ＭＰが減少します。
	RETURN 1p1
ENDIF


@デバフ説明文_ＭＰ自傷(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
IF バフ・デバフ効果割合 != 0
	PRINTL 行動終了時、最大ＭＰに応じた割合でＭＰが減少します。
	RETURN 0
ELSE
	PRINTL 行動終了時、ＭＰが減少します。
	RETURN 1p1
ENDIF


@デバフ説明文_暗闇(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
SIF バフ・デバフ効果割合 >= 100
	PRINT 一定確率で
PRINTL 通常攻撃に失敗します。
RETURN 1p0


@デバフ説明文_魅了(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
SIF バフ・デバフ効果割合 >= 100
	PRINT 一定確率で
PRINTL 行動することができなくなります。
RETURN 1p0


@デバフ説明文_麻痺(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
SIF バフ・デバフ効果割合 >= 100
	PRINT 一定確率で
PRINTL 行動することができなくなります。
RETURN 1p0


@デバフ説明文_睡眠(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
SIF バフ・デバフ効果割合 >= 100
	PRINT 一定確率で
PRINTL 行動することができなくなります。
RETURN 1p0


@デバフ説明文_封印(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
SIF バフ・デバフ効果割合 >= 100
	PRINT 一定確率で
PRINTL 行動することができなくなります。
RETURN 1p0


@デバフ説明文_混乱(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 行動がランダムな味方または敵１体への無属性攻撃のみになります。
RETURN 1p0 | 1p1


@デバフ説明文_呪い(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINT 対象者へのＨＰ回復をダメージに転換します。
SIF バフ・デバフ効果量 > 0
	PRINTFORM （上限：{バフ・デバフ効果量}）
PRINTL 
RETURN 1p0


@デバフ説明文_強圧(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL ＨＰが回復しなくなります。
RETURN 1p0 | 1p1


@デバフ説明文_恐怖(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 通常攻撃や行動終了時の奥義ゲージ・チャージターン増加が発生しなくなります。
RETURN 1p0 | 1p1


@デバフ説明文_奥義封印(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL 奥義を使用することができなくなります。
RETURN 1p0 | 1p1


@デバフ説明文_アビリティ封印(バフ・デバフ効果枠, バフ・デバフ効果量, バフ・デバフ効果割合)
#DIMS バフ・デバフ効果枠
#DIM バフ・デバフ効果量
#DIM バフ・デバフ効果割合
PRINTL アビリティ封印を使用することができなくなります。
RETURN 1p0 | 1p1
